/*!
 * 
 * @openlattice/access-request - v0.7.0
 * OpenLattice module for access request workflows
 * https://github.com/openlattice/access-request
 *
 * Copyright (c) 2017-2021, OpenLattice, Inc. All rights reserved.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openlatticeAccessRequest=t():e.openlatticeAccessRequest=t()}(self,(function(){return(()=>{var e={6419:(e,t,r)=>{e.exports=r(1647)},1511:(e,t,r)=>{e.exports=r(9665)},7766:(e,t,r)=>{e.exports=r(3698)},62:(e,t,r)=>{e.exports=r(4825)},116:(e,t,r)=>{e.exports=r(8486)},8914:(e,t,r)=>{e.exports=r(9143)},1643:(e,t,r)=>{e.exports=r(7942)},2991:(e,t,r)=>{e.exports=r(3839)},2366:(e,t,r)=>{e.exports=r(8913)},3649:(e,t,r)=>{e.exports=r(7190)},2762:(e,t,r)=>{e.exports=r(9391)},9828:(e,t,r)=>{e.exports=r(6350)},9340:(e,t,r)=>{e.exports=r(5434)},368:(e,t,r)=>{e.exports=r(8649)},3978:(e,t,r)=>{e.exports=r(819)},6295:(e,t,r)=>{e.exports=r(9017)},4074:(e,t,r)=>{e.exports=r(3712)},9649:(e,t,r)=>{e.exports=r(3133)},4310:(e,t,r)=>{e.exports=r(2053)},6902:(e,t,r)=>{e.exports=r(4486)},455:(e,t,r)=>{e.exports=r(5933)},1068:(e,t,r)=>{e.exports=r(6600)},3592:(e,t,r)=>{e.exports=r(4273)},8363:(e,t,r)=>{e.exports=r(5976)},9996:(e,t,r)=>{e.exports=r(9671)},5683:(e,t,r)=>{e.exports=r(4773)},5238:(e,t,r)=>{e.exports=r(1432)},189:(e,t,r)=>{e.exports=r(7632)},4341:(e,t,r)=>{e.exports=r(8255)},3263:(e,t,r)=>{e.exports=r(4170)},4889:(e,t,r)=>{e.exports=r(4931)},9356:(e,t,r)=>{e.exports=r(86)},9542:(e,t,r)=>{e.exports=r(8082)},1446:(e,t,r)=>{e.exports=r(7872)},3882:(e,t,r)=>{e.exports=r(3243)},3109:(e,t,r)=>{e.exports=r(1671)},7116:function(e,t,r){var n,a;"undefined"!=typeof self&&self,e.exports=(n=r(6689),a=r(6405),function(){"use strict";var e={655:function(e,t,r){r.r(t),r.d(t,{__extends:function(){return a},__assign:function(){return o},__rest:function(){return s},__decorate:function(){return i},__param:function(){return c},__metadata:function(){return u},__awaiter:function(){return l},__generator:function(){return f},__createBinding:function(){return p},__exportStar:function(){return d},__values:function(){return v},__read:function(){return h},__spread:function(){return y},__spreadArrays:function(){return g},__spreadArray:function(){return m},__await:function(){return x},__asyncGenerator:function(){return S},__asyncDelegator:function(){return E},__asyncValues:function(){return b},__makeTemplateObject:function(){return w},__importStar:function(){return A},__importDefault:function(){return T},__classPrivateFieldGet:function(){return R},__classPrivateFieldSet:function(){return D}});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function i(e,t,r,n){var a,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(a,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function i(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var p=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function d(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function g(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,a++)n[a]=o[s];return n}function m(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){a[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||i(e,t)}))})}function i(e,t){try{(r=a[e](t)).value instanceof x?Promise.resolve(r.value.v).then(c,u):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function c(e){i("next",e)}function u(e){i("throw",e)}function l(e,t){e(t),o.shift(),o.length&&i(o[0][0],o[0][1])}}function E(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:x(e[n](t)),done:"return"===n}:a?a(t):t}:a}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,a){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,a,(t=e[r](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var I=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return I(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function D(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}},297:function(e){e.exports=n},268:function(e){e.exports=a}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.useReactToPrint=e.PrintContextConsumer=void 0;var t=r(655),n=r(297),a=r(268),s=Object.prototype.hasOwnProperty.call(n,"createContext"),i=Object.prototype.hasOwnProperty.call(n,"useMemo")&&Object.prototype.hasOwnProperty.call(n,"useCallback"),c=s?n.createContext({}):null;e.PrintContextConsumer=c?c.Consumer:function(){return null};var u={copyStyles:!0,pageStyle:"@page { size: auto;  margin: 0mm; } @media print { body { -webkit-print-color-adjust: exact; } }",removeAfterPrint:!1,suppressErrors:!1},l=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.startPrint=function(e){var t=r.props,n=t.onAfterPrint,a=t.onPrintError,o=t.print,s=t.suppressErrors,i=t.documentTitle;setTimeout((function(){if(e.contentWindow){if(e.contentWindow.focus(),o)o(e).then(r.handleRemoveIframe).catch((function(e){a?a("print",e):s||console.error("An error was thrown by the specified `print` function",e)}));else if(e.contentWindow.print){var t=document.title;i&&(document.title=i),e.contentWindow.print(),i&&(document.title=t),n&&n()}else s||console.error("Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes.");r.handleRemoveIframe()}else s||console.error("Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/")}),500)},r.triggerPrint=function(e){var t=r.props,n=t.onBeforePrint,a=t.onPrintError;if(n){var o=n();o&&"function"==typeof o.then?o.then((function(){r.startPrint(e)})).catch((function(e){a&&a("onBeforePrint",e)})):r.startPrint(e)}else r.startPrint(e)},r.handleClick=function(){var e=r.props,t=e.onBeforeGetContent,n=e.onPrintError;if(t){var a=t();a&&"function"==typeof a.then?a.then(r.handlePrint).catch((function(e){n&&n("onBeforeGetContent",e)})):r.handlePrint()}else r.handlePrint()},r.handlePrint=function(){var e=r.props,n=e.bodyClass,o=e.content,s=e.copyStyles,i=e.fonts,c=e.pageStyle,u=e.suppressErrors,l=o();if(void 0!==l)if(null!==l){var f=document.createElement("iframe");f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.id="printWindow",f.title="Print Window";var p=a.findDOMNode(l);if(p){var d=p instanceof Text,v=document.querySelectorAll("link[rel='stylesheet']"),h=d?[]:p.querySelectorAll("img");r.linkTotal=v.length+h.length,r.linksLoaded=[],r.linksErrored=[],r.fontsLoaded=[],r.fontsErrored=[];var y=function(e,t){t?r.linksLoaded.push(e):(u||console.error('"react-to-print" was unable to load a linked node. It may be invalid. "react-to-print" will continue attempting to print the page. The linked node that errored was:',e),r.linksErrored.push(e)),r.linksLoaded.length+r.linksErrored.length+r.fontsLoaded.length+r.fontsErrored.length===r.linkTotal&&r.triggerPrint(f)};f.onload=function(){var e,a,o,l;f.onload=null;var v=f.contentDocument||(null===(a=f.contentWindow)||void 0===a?void 0:a.document);if(v){v.body.appendChild(p.cloneNode(!0)),i&&((null===(o=f.contentDocument)||void 0===o?void 0:o.fonts)&&(null===(l=f.contentWindow)||void 0===l?void 0:l.FontFace)?i.forEach((function(e){var t=new FontFace(e.family,e.source);f.contentDocument.fonts.add(t),t.loaded.then((function(e){r.fontsLoaded.push(e)})).catch((function(e){r.fontsErrored.push(t),u||console.error('"react-to-print" was unable to load a font. "react-to-print" will continue attempting to print the page. The font that failed to load is:',t,"The error from loading the font is:",e)}))})):u||console.error('"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API'));var g="function"==typeof c?c():c;if("string"!=typeof g)u||console.error('"react-to-print" expected a "string" from `pageStyle` but received "'+typeof g+'". Styles from `pageStyle` will not be applied.');else{var m=v.createElement("style");m.appendChild(v.createTextNode(g)),v.head.appendChild(m)}if(n&&(e=v.body.classList).add.apply(e,t.__spreadArray([],t.__read(n.split(" ")))),!d){for(var x=v.querySelectorAll("canvas"),S=p.querySelectorAll("canvas"),E=0,b=x.length;E<b;++E){var w=(F=x[E]).getContext("2d");w&&w.drawImage(S[E],0,0)}for(E=0;E<h.length;E++){var I=h[E],A=I.getAttribute("src");if(A){var T=new Image;T.onload=y.bind(null,I,!0),T.onerror=y.bind(null,I,!1),T.src=A}else u||(console.warn('"react-to-print" encountered an <img> tag with an empty "src" attribute. It will not attempt to pre-load it. The <img> is:',I),y(I,!1))}var R="input",D=p.querySelectorAll(R),C=v.querySelectorAll(R);for(E=0;E<D.length;E++)C[E].value=D[E].value;var _="input[type=checkbox],input[type=radio]",j=p.querySelectorAll(_),q=v.querySelectorAll(_);for(E=0;E<j.length;E++)q[E].checked=j[E].checked;var k="select",O=p.querySelectorAll(k),U=v.querySelectorAll(k);for(E=0;E<O.length;E++)U[E].value=O[E].value}if(s)for(var P=document.querySelectorAll("style, link[rel='stylesheet']"),L=(E=0,P.length);E<L;++E){var F;if("STYLE"===(F=P[E]).tagName){var N=v.createElement(F.tagName),M=F.sheet;if(M){for(var B="",Q=0,W=M.cssRules.length;Q<W;++Q)"string"==typeof M.cssRules[Q].cssText&&(B+=M.cssRules[Q].cssText+"\r\n");N.setAttribute("id","react-to-print-"+E),N.appendChild(v.createTextNode(B)),v.head.appendChild(N)}}else if(F.getAttribute("href")){N=v.createElement(F.tagName),Q=0;for(var H=F.attributes.length;Q<H;++Q){var z=F.attributes[Q];z&&N.setAttribute(z.nodeName,z.nodeValue||"")}N.onload=y.bind(null,N,!0),N.onerror=y.bind(null,N,!1),v.head.appendChild(N)}else u||console.warn('"react-to-print" encountered a <link> tag with an empty "href" attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:',F),y(F,!0)}}0!==r.linkTotal&&s||r.triggerPrint(f)},r.handleRemoveIframe(!0),document.body.appendChild(f)}else u||console.error('"react-to-print" could not locate the DOM node corresponding with the `content` prop')}else u||console.error('There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.');else u||console.error('For "react-to-print" to work only Class based components can be printed.')},r.handleRemoveIframe=function(e){var t=r.props.removeAfterPrint;if(e||t){var n=document.getElementById("printWindow");n&&document.body.removeChild(n)}},r}return t.__extends(r,e),r.prototype.render=function(){var e=this.props,t=e.children,r=e.suppressErrors,a=e.trigger;if(a)return n.cloneElement(a(),{onClick:this.handleClick});if(!c)return r||console.error('"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"'),null;var o={handlePrint:this.handleClick};return n.createElement(c.Provider,{value:o},t)},r.defaultProps=u,r}(n.Component);e.default=l,e.useReactToPrint=i?function(e){var r=n.useMemo((function(){return new l(t.__assign(t.__assign({},u),e))}),[e]);return n.useCallback((function(){return r.handleClick()}),[r])}:function(e){e.suppressErrors||console.warn('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')}}(),o}())},4273:e=>{"use strict";e.exports=require("core-js-pure/features/array/from")},5976:e=>{"use strict";e.exports=require("core-js-pure/features/array/is-array")},9671:e=>{"use strict";e.exports=require("core-js-pure/features/get-iterator-method")},4773:e=>{"use strict";e.exports=require("core-js-pure/features/instance/index-of")},1432:e=>{"use strict";e.exports=require("core-js-pure/features/instance/slice")},7632:e=>{"use strict";e.exports=require("core-js-pure/features/object/create")},8255:e=>{"use strict";e.exports=require("core-js-pure/features/object/define-property")},4170:e=>{"use strict";e.exports=require("core-js-pure/features/object/get-own-property-symbols")},4931:e=>{"use strict";e.exports=require("core-js-pure/features/object/get-prototype-of")},86:e=>{"use strict";e.exports=require("core-js-pure/features/object/keys")},8082:e=>{"use strict";e.exports=require("core-js-pure/features/object/set-prototype-of")},7872:e=>{"use strict";e.exports=require("core-js-pure/features/symbol")},3243:e=>{"use strict";e.exports=require("core-js-pure/features/symbol/iterator")},1647:e=>{"use strict";e.exports=require("core-js-pure/stable/array/from")},9665:e=>{"use strict";e.exports=require("core-js-pure/stable/array/is-array")},3698:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/concat")},4825:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/every")},8486:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/filter")},9143:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/for-each")},7942:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/index-of")},3839:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/map")},8913:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/reduce")},7190:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/slice")},9391:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/splice")},6350:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/starts-with")},5434:e=>{"use strict";e.exports=require("core-js-pure/stable/json/stringify")},8649:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-properties")},819:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-property")},9017:e=>{"use strict";e.exports=require("core-js-pure/stable/object/entries")},3712:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptor")},3133:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptors")},2053:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-symbols")},4486:e=>{"use strict";e.exports=require("core-js-pure/stable/object/keys")},5933:e=>{"use strict";e.exports=require("core-js-pure/stable/object/values")},6600:e=>{"use strict";e.exports=require("core-js-pure/stable/reflect/construct")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},1671:e=>{"use strict";e.exports=require("regenerator-runtime")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AccessRequestContainer:()=>tu,initializeAccessRequestStore:()=>po});const e=require("immutable");var t=r.n(e);const a=require("@redux-saga/core");var o=r.n(a);const s=require("connected-react-router/immutable"),i=require("redux");var c=r(4341);function u(e,t,r){return t in e?c(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=require("lattice-auth"),f=require("redux-immutable"),p=require("lattice-utils"),d=require("redux-reqseq");var v,h="access",y=p.ReduxConstants.APP,g=p.ReduxConstants.AUTH,m=p.ReduxConstants.EDM,x=p.ReduxConstants.ENTITY_SETS,S=p.ReduxConstants.ENTITY_SETS_INDEX_MAP,E=p.ReduxConstants.ENTITY_TYPES,b=p.ReduxConstants.ENTITY_TYPES_INDEX_MAP,w=p.ReduxConstants.ERROR,I=p.ReduxConstants.PROPERTY_TYPES,A=p.ReduxConstants.PROPERTY_TYPES_INDEX_MAP,T=p.ReduxConstants.REQUEST_STATE,R=(u(v={},w,!1),u(v,T,d.RequestStates.STANDBY),v),D="accessRequest",C="attachments",_="forms",j="GET_FORMS",q=(0,d.newRequestSequence)(j),k="GET_ALL_ACCESS_REQUESTS",O=(0,d.newRequestSequence)(k),U="GET_ACCESS_REQUEST",P=(0,d.newRequestSequence)(U),L="SUBMIT_ACCESS_REQUEST",F=(0,d.newRequestSequence)(L),N="SELECT_ACCESS_REQUEST",M="CLEAR_ACCESS_REQUEST",B=function(){return{type:M}},Q="CLEAR_ATTACHMENTS",W="UPDATE_ACCESS_REQUEST",H=(0,d.newRequestSequence)(W),z="GET_ATTACHMENTS",G=(0,d.newRequestSequence)(z),K="UPLOAD_ATTACHMENTS",J=(0,d.newRequestSequence)(K),V="DELETE_ATTACHMENTS",Y=(0,d.newRequestSequence)(V),X="SAVE_NEW_FORM_TEMPLATE",$=(0,d.newRequestSequence)(X),Z="UPDATE_ATTACHMENT_TAG",ee=(0,d.newRequestSequence)(Z),te="UPLOAD_FIELD_ATTACHMENT",re=(0,d.newRequestSequence)(te),ne="DELETE_FIELD_ATTACHMENT",ae=(0,d.newRequestSequence)(ne),oe=p.ReduxConstants.REQUEST_STATE;function se(e,t){return Y.reducer(e,t,{REQUEST:function(){return e.setIn([V,oe],d.RequestStates.PENDING)},SUCCESS:function(){var r=t.value,n=e.get(C).deleteAll(r);return e.set(C,n).setIn([V,oe],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([V,oe],d.RequestStates.FAILURE)}})}var ie=p.ReduxConstants.REQUEST_STATE;function ce(e,t){return P.reducer(e,t,{REQUEST:function(){return e.setIn([U,ie],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([U,ie],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([U,ie],d.RequestStates.FAILURE)}})}var ue=p.ReduxConstants.REQUEST_STATE;function le(e,t){return O.reducer(e,t,{REQUEST:function(){return e.setIn([k,ue],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([k,ue],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([k,ue],d.RequestStates.FAILURE)}})}var fe=p.ReduxConstants.REQUEST_STATE;function pe(e,t){return G.reducer(e,t,{REQUEST:function(){return e.setIn([z,fe],d.RequestStates.PENDING)},SUCCESS:function(){return e.set(C,t.value).setIn([z,fe],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([z,fe],d.RequestStates.FAILURE)}})}var de=p.ReduxConstants.REQUEST_STATE;function ve(e,t){return q.reducer(e,t,{REQUEST:function(){return e.setIn([j,de],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([j,de],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([j,de],d.RequestStates.FAILURE)}})}var he=p.ReduxConstants.REQUEST_STATE;function ye(e,t){return F.reducer(e,t,{REQUEST:function(){return e.setIn([L,he],d.RequestStates.PENDING)},SUCCESS:function(){return e.set(D,t.value).setIn([L,he],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([L,he],d.RequestStates.FAILURE)}})}var ge=p.ReduxConstants.REQUEST_STATE;function me(e,t){return H.reducer(e,t,{REQUEST:function(){var r=t.value,n=r.path,a=r.formData;return e.setIn(n,a).setIn([W,ge],d.RequestStates.PENDING)},SUCCESS:function(){return e.setIn([W,ge],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([W,ge],d.RequestStates.FAILURE)}})}var xe=p.ReduxConstants.REQUEST_STATE;function Se(e,t){return ee.reducer(e,t,{REQUEST:function(){var r=t.value,n=r.path,a=r.tag;return e.setIn(n,a).setIn([Z,xe],d.RequestStates.PENDING)},SUCCESS:function(){return e.setIn([Z,xe],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Z,xe],d.RequestStates.FAILURE)}})}var Ee=p.ReduxConstants.REQUEST_STATE;function be(e,t){return J.reducer(e,t,{REQUEST:function(){return e.setIn([K,Ee],d.RequestStates.PENDING)},SUCCESS:function(){return e.setIn([K,Ee],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([K,Ee],d.RequestStates.FAILURE)}})}var we="RESET_REQUEST_STATE",Ie=function(e){return{path:e,type:we}},Ae=r(8363);function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Re=r(1446),De=r(9996),Ce=r(3592);var _e=r(5238);function je(e,t){var r;if(e){if("string"==typeof e)return Te(e,t);var n=_e(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Ce(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function qe(e){return function(e){if(Ae(e))return Te(e)}(e)||function(e){if(void 0!==Re&&null!=De(e)||null!=e["@@iterator"])return Ce(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ke,Oe=r(7766),Ue=r.n(Oe);function Pe(e,t){var r,n,a=t.path;return a&&e.hasIn(a)?e.setIn(Ue()(r=[]).call(r,qe(a),[w]),!1).setIn(Ue()(n=[]).call(n,qe(a),[T]),d.RequestStates.STANDBY):e}var Le=p.ReduxConstants.HITS,Fe=(0,e.fromJS)((u(ke={},D,(0,e.Map)()),u(ke,C,(0,e.Map)()),u(ke,_,(0,e.List)()),u(ke,k,R),u(ke,z,R),u(ke,j,R),u(ke,Le,(0,e.List)()),u(ke,L,R),u(ke,W,R),u(ke,K,R),ke));function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Pe(e,t);case N:return e.set(D,t.value);case M:return e.set(D,Fe.get(D));case Q:return e.set(C,Fe.get(C));case q.case(t.type):return ve(e,t);case P.case(t.type):return ce(e,t);case O.case(t.type):return le(e,t);case F.case(t.type):return ye(e,t);case H.case(t.type):return me(e,t);case G.case(t.type):return pe(e,t);case J.case(t.type):return be(e,t);case Y.case(t.type):return se(e,t);case ee.case(t.type):return Se(e,t);default:return e}}var Me=r(3109),Be=r.n(Me),Qe=r(2366),We=r.n(Qe);const He=require("@redux-saga/core/effects"),ze=require("lattice-sagas");var Ge="GET_EDM_TYPES",Ke=(0,d.newRequestSequence)(Ge),Je=Be().mark(rt),Ve=Be().mark(nt),Ye=new p.Logger("EDMSagas"),Xe=p.LangUtils.isDefined,$e=ze.EntityDataModelApiActions.getAllEntityTypes,Ze=ze.EntityDataModelApiActions.getAllPropertyTypes,et=ze.EntityDataModelApiSagas.getAllEntityTypesWorker,tt=ze.EntityDataModelApiSagas.getAllPropertyTypesWorker;function rt(e){var t,r,n,a;return Be().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,He.put)(Ke.request(e.id));case 3:return o.next=5,(0,He.all)([(0,He.call)(et,$e()),(0,He.call)(tt,Ze())]);case 5:if(n=o.sent,!(a=We()(n).call(n,(function(e,t){return Xe(e)?e:t.error}),void 0))){o.next=9;break}throw a;case 9:return t={data:(r={},u(r,E,n[0].data),u(r,I,n[1].data),r)},o.next=12,(0,He.put)(Ke.success(e.id,t.data));case 12:o.next=20;break;case 14:return o.prev=14,o.t0=o.catch(0),t={error:o.t0},Ye.error(e.type,o.t0),o.next=20,(0,He.put)(Ke.failure(e.id,o.t0));case 20:return o.prev=20,o.next=23,(0,He.put)(Ke.finally(e.id));case 23:return o.finish(20);case 24:return o.abrupt("return",t);case 25:case"end":return o.stop()}}),Je,null,[[0,14,20,24]])}function nt(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(Ge,rt);case 2:case"end":return e.stop()}}),Ve)}var at=Error("invalid parameter: action.value is required and must be defined"),ot=Error("invalid parameter: action.value is the incorrect type"),st=(Error('invalid route: a route must be a non-empty string that starts with "/"'),Error("invalid uuid"),Error("unexpected state"),Error("caught exception in worker saga"),"INITIALIZE_APPLICATION"),it=(0,d.newRequestSequence)(st),ct="SET_ROOT",ut=Be().mark(mt),lt=Be().mark(xt),ft=ze.AppApiActions.getApp,pt=ze.AppApiActions.getAppConfigs,dt=ze.AppApiSagas.getAppWorker,vt=ze.AppApiSagas.getAppConfigsWorker,ht=p.ValidationUtils.isValidUUID,yt=p.LangUtils.isDefined,gt=new p.Logger("AppSagas");function mt(e){var t,r,n,a,o,s,i,c,u,l;return Be().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(t={},f.prev=1,n=e.value,a=n.match,o=n.organizationId,s=n.root,ht(o)){f.next=5;break}throw ot;case 5:if("string"==typeof s){f.next=7;break}throw ot;case 7:if(yt(a)){f.next=9;break}throw ot;case 9:return f.next=11,(0,He.put)(it.request(e.id));case 11:return f.next=13,(0,He.all)([(0,He.call)(rt,Ke()),(0,He.call)(dt,ft("access_requests"))]);case 13:if(!(i=f.sent)[0].error){f.next=16;break}throw i[0].error;case 16:if(!i[1].error){f.next=18;break}throw i[1].error;case 18:return c=i[1].data,f.next=21,(0,He.call)(vt,pt(c.id));case 21:if(!(u=f.sent).error){f.next=24;break}throw u.error;case 24:return l=We()(r=u.data).call(r,(function(e,t){var r=e;return t.organization.id===o&&(r=t),r}),{}),t.data={appConfig:l,root:s,match:a},f.next=28,(0,He.put)(it.success(e.id,t.data));case 28:f.next=35;break;case 30:return f.prev=30,f.t0=f.catch(1),gt.error(e.type,f.t0),f.next=35,(0,He.put)(it.failure(e.id,f.t0));case 35:return f.prev=35,f.next=38,(0,He.put)(it.finally(e.id));case 38:return f.finish(35);case 39:case"end":return f.stop()}}),ut,null,[[1,30,35,39]])}function xt(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(st,mt);case 2:case"end":return e.stop()}}),lt)}var St,Et=p.ReduxConstants.REQUEST_STATE;function bt(e,t){switch(t.type){case ct:var r=t.value;return e.set("root",r);case it.case(t.type):var n=t;return it.reducer(e,n,{REQUEST:function(){return e.setIn([st,Et],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([st,Et],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([st,Et],d.RequestStates.FAILURE)}});default:return e}}var wt=(0,e.fromJS)((u(St={},st,R),u(St,"appConfig",{}),u(St,"root","/"),u(St,"match",{}),St)),It=["app","appConfig","config"],At=["app","root"],Tt=["app","match"];function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Pe(e,t);case it.case(t.type):return bt(e,t);default:return e}}var Dt=r(8914),Ct=r.n(Dt);const _t=require("lattice");var jt=_t.Models.EntityTypeBuilder,qt=_t.Models.PropertyTypeBuilder;function kt(t,r){return Ke.reducer(t,r,{REQUEST:function(){return t.setIn([Ge,T],d.RequestStates.PENDING).setIn([Ge,r.id],r)},SUCCESS:function(){var n=r.value.entityTypes,a=(0,e.List)().asMutable(),o=(0,e.Map)().asMutable();Ct()(n).call(n,(function(e,t){var r=new jt(e).build();a.push(r),o.set(r.id,t),o.set(r.type,t)}));var s=r.value.propertyTypes,i=(0,e.List)().asMutable(),c=(0,e.Map)().asMutable();return Ct()(s).call(s,(function(e,t){var r=new qt(e).build();i.push(r),c.set(r.id,t),c.set(r.type,t)})),t.set(E,a.asImmutable()).set(b,o.asImmutable()).set(I,i.asImmutable()).set(A,c.asImmutable()).setIn([Ge,T],d.RequestStates.SUCCESS)},FAILURE:function(){return t.set(E,(0,e.List)()).set(b,(0,e.Map)()).set(I,(0,e.List)()).set(A,(0,e.Map)()).setIn([Ge,T],d.RequestStates.FAILURE)},FINALLY:function(){return t.deleteIn([Ge,r.id])}})}var Ot=_t.Models.EntitySetBuilder,Ut=ze.EntitySetsApiActions.GET_ENTITY_SET,Pt=ze.EntitySetsApiActions.getEntitySet;function Lt(e,t){return Pt.reducer(e,t,{REQUEST:function(){return e.setIn([Ut,T],d.RequestStates.PENDING).setIn([Ut,t.id],t)},SUCCESS:function(){if(e.hasIn([Ut,t.id])){var r=new Ot(t.value).build(),n=e.get(x),a=e.get(S);if(a.has(r.id))n=n.update(a.get(r.id),(function(){return r}));else{var o=(n=n.push(r)).count()-1;a=a.set(r.id,o).set(r.name,o)}return e.set(x,n).set(S,a).setIn([Ut,T],d.RequestStates.SUCCESS)}return e},FAILURE:function(){return e.hasIn([Ut,t.id])?e.setIn([Ut,T],d.RequestStates.FAILURE):e},FINALLY:function(){return e.deleteIn([Ut,t.id])}})}var Ft,Nt=r(455),Mt=r.n(Nt),Bt=_t.Models.EntitySetBuilder,Qt=ze.EntitySetsApiActions.GET_ENTITY_SETS,Wt=ze.EntitySetsApiActions.getEntitySets;function Ht(e,t){return Wt.reducer(e,t,{REQUEST:function(){return e.setIn([Qt,T],d.RequestStates.PENDING).setIn([Qt,t.id],t)},SUCCESS:function(){if(e.hasIn([Qt,t.id])){var r,n=e.get(x),a=e.get(S);return Ct()(r=Mt()(t.value)).call(r,(function(e){var t=new Bt(e).build();if(a.has(t.id))n=n.update(a.get(t.id),(function(){return t}));else{var r=(n=n.push(t)).count()-1;a=a.set(t.id,r).set(t.name,r)}})),e.set(x,n).set(S,a).setIn([Qt,T],d.RequestStates.SUCCESS)}return e},FAILURE:function(){return e.hasIn([Qt,t.id])?e.setIn([Qt,T],d.RequestStates.FAILURE):e},FINALLY:function(){return e.deleteIn([Qt,t.id])}})}var zt=ze.EntitySetsApiActions.GET_ENTITY_SET,Gt=ze.EntitySetsApiActions.GET_ENTITY_SETS,Kt=ze.EntitySetsApiActions.getEntitySet,Jt=ze.EntitySetsApiActions.getEntitySets,Vt=(0,e.fromJS)((u(Ft={},Ge,R),u(Ft,Gt,R),u(Ft,zt,R),u(Ft,x,(0,e.List)()),u(Ft,S,(0,e.Map)()),u(Ft,E,(0,e.List)()),u(Ft,b,(0,e.Map)()),u(Ft,I,(0,e.List)()),u(Ft,A,(0,e.Map)()),Ft));function Yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Pe(e,t);case Ke.case(t.type):return kt(e,t);case Kt.case(t.type):return Lt(e,t);case Jt.case(t.type):return Ht(e,t);default:return e}}var Xt=r(1511),$t=r.n(Xt),Zt=r(62),er=r.n(Zt);function tr(t,r){return(0,e.getIn)(t,[r,"entitySetId"])}var rr="DELETE_BULK_ENTITIES",nr=(0,d.newRequestSequence)(rr),ar=_t.Models.FQN;const or={ACCESS_REQUEST_SUBMISSION:ar.of("app.accessrequestsubmission"),ATTACHED_TO:ar.of("app.attachedto"),FILE:ar.of("app.file"),FORM:ar.of("app.form")};var sr=_t.Models.FQN;const ir={DATE_TIME:sr.of("ol.datetime"),DESCRIPTION:sr.of("ol.description"),FILE_DATA:sr.of("ol.filedata"),FORM_DATA:sr.of("ol.formdata"),GROUP_ID:sr.of("ol.groupid"),ID:sr.of("ol.id"),LABEL:sr.of("ol.label"),NAME:sr.of("ol.name"),REQUEST_DATE_TIME:sr.of("ol.requestdatetime"),RJSF_JSON_SCHEMA:sr.of("ol.rjsfjsonschema"),RJSF_UI_SCHEMA:sr.of("ol.rjsfuischema"),TYPE:sr.of("ol.type")};var cr=p.ReduxConstants.HITS;function ur(){return function(t){return t.getIn([h,D],(0,e.List)())}}function lr(){return function(e){return e.getIn(It,{})}}function fr(){return function(t){return t.getIn([h,C])||(0,e.Map)()}}const pr=require("lodash/isArray");var dr=r.n(pr),vr=_t.Models.FQN,hr=(0,e.Map)();function yr(t){return function(r){if(!dr()(t)&&!(0,e.isCollection)(t))return hr;var n=(0,e.Map)().withMutations((function(n){Ct()(t).call(t,(function(t){if(vr.isValid(t)){var a=(0,e.getIn)(r,[m,A,t],-1);if(a>=0){var o=(0,e.getIn)(r,[m,I,a]);o&&o.id&&n.set(t,o.id)}}}))}));return n.isEmpty()?hr:n}}p.ReduxUtils.selectEntitySets,p.ReduxUtils.selectEntityTypes,p.ReduxUtils.selectOrganization,p.ReduxUtils.selectPropertyTypes;var gr=r(2991),mr=r.n(gr),xr=r(6902),Sr=r.n(xr),Er=r(6419),br=r.n(Er),wr=Be().mark(Dr),Ir=new p.Logger("DataSagas"),Ar=_t.Types.DeleteTypes,Tr=ze.DataApiActions.deleteEntityData,Rr=ze.DataApiSagas.deleteEntityDataWorker;function Dr(e){var t,r,n,a,o,s;return Be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t={},i.prev=1,null!=(n=e.value)){i.next=5;break}throw at;case 5:return i.next=7,(0,He.put)(nr.request(e.id));case 7:return a=mr()(r=Sr()(n)).call(r,(function(e){var t=br()(n[e]);return(0,He.call)(Rr,Tr({entitySetId:e,entityKeyIds:t,deleteType:Ar.SOFT}))})),i.next=10,(0,He.all)(a);case 10:if(o=i.sent,!(s=We()(o).call(o,(function(e,t){return e.error=e.error||t.error,e}),{})).error){i.next=14;break}throw s;case 14:return i.next=16,(0,He.put)(nr.success(e.id));case 16:i.next=24;break;case 18:return i.prev=18,i.t0=i.catch(1),Ir.error(e.type,i.t0),t.error=i.t0,i.next=24,(0,He.put)(nr.failure(e.id,i.t0));case 24:return i.prev=24,i.next=27,(0,He.put)(nr.finally(e.id));case 27:return i.finish(24);case 28:return i.abrupt("return",t);case 29:case"end":return i.stop()}}),wr,null,[[1,18,24,28]])}var Cr=Be().mark(Or),_r=Be().mark(Ur),jr=p.ValidationUtils.isValidUUID,qr=or.FILE,kr=new p.Logger("AccessSagas");function Or(e){var t,r,n,a,o,s;return Be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t={},i.prev=1,r=e.value,!$t()(r)||er()(r).call(r,jr)){i.next=5;break}throw ot;case 5:return i.next=7,(0,He.put)(Y.request(e.id));case 7:return i.next=9,(0,He.select)(lr());case 9:return n=i.sent,a=tr(n,qr),o=u({},a,r),i.next=14,(0,He.call)(Dr,nr(o));case 14:if(!(s=i.sent).error){i.next=17;break}throw s.error;case 17:return t={data:o},i.next=20,(0,He.put)(Y.success(e.id,r));case 20:i.next=28;break;case 22:return i.prev=22,i.t0=i.catch(1),kr.error(e.type,i.t0),t={error:i.t0},i.next=28,(0,He.put)(Y.failure(e.id,i.t0));case 28:return i.prev=28,i.next=31,(0,He.put)(Y.finally(e.id));case 31:return i.finish(28);case 32:return i.abrupt("return",t);case 33:case"end":return i.stop()}}),Cr,null,[[1,22,28,32]])}function Ur(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(V,Or);case 2:case"end":return e.stop()}}),_r)}function Pr(e,t){return function(e){if(Ae(e))return e}(e)||function(e,t){var r=null==e?null:void 0!==Re&&De(e)||e["@@iterator"];if(null!=r){var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Lr=r(9340),Fr=r.n(Lr);const Nr=require("lodash/isPlainObject");var Mr=r.n(Nr),Br=Be().mark(Vr),Qr=Be().mark(Yr),Wr=ze.DataApiActions.updateEntityData,Hr=ze.DataApiSagas.updateEntityDataWorker,zr=_t.Types.UpdateTypes,Gr=or.ACCESS_REQUEST_SUBMISSION,Kr=ir.FORM_DATA,Jr=new p.Logger("updateAccessRequest");function Vr(e){var t,r,n,a,o,s,i,c,l,f,p;return Be().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,r=e.value,Mr()(r)){d.next=4;break}throw ot;case 4:return n=r.formData,a=r.entityKeyId,o=Fr()(n),d.next=8,(0,He.put)(H.request(e.id,{path:["accessRequest",Kr.toString(),0],formData:o}));case 8:return d.next=10,(0,He.select)(lr());case 10:return s=d.sent,i=tr(s,Gr),d.next=14,(0,He.select)(yr([Kr]));case 14:return c=d.sent,l=c.get(Kr),f=u({},a,u({},l,[o])),d.next=19,(0,He.call)(Hr,Wr({entitySetId:i,entities:f,updateType:zr.PartialReplace}));case 19:if(!(p=d.sent).error){d.next=22;break}throw p.error;case 22:return t={data:p.data},d.next=25,(0,He.put)(H.success(e.id));case 25:d.next=33;break;case 27:return d.prev=27,d.t0=d.catch(0),t={error:d.t0},Jr.error(e.type,d.t0),d.next=33,(0,He.put)(H.failure(e.id,d.t0));case 33:return d.prev=33,d.next=36,(0,He.put)(H.finally(e.id));case 36:return d.finish(33);case 37:return d.abrupt("return",t);case 38:case"end":return d.stop()}}),Br,null,[[0,27,33,37]])}function Yr(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(W,Vr);case 2:case"end":return e.stop()}}),Qr)}var Xr=Be().mark(en),$r=Be().mark(tn),Zr=new p.Logger("DocumentsSagas");function en(e){var t,r,n,a,o,s,i,c,u,l,f;return Be().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,He.put)(ae.request(e.id));case 3:return r=e.value,n=r.accessRequestId,a=r.attachment,o=r.formData,s=(0,He.call)(Or,Y([a.id])),i=(0,He.call)(Vr,H({formData:o,entityKeyId:n})),p.next=8,(0,He.all)([s,i]);case 8:if(c=p.sent,u=Pr(c,2),l=u[0],f=u[1],!l.error){p.next=14;break}throw l.error;case 14:if(!f.error){p.next=16;break}throw f.error;case 16:return t={data:{}},p.next=19,(0,He.put)(ae.success(e.id));case 19:p.next=27;break;case 21:return p.prev=21,p.t0=p.catch(0),Zr.error(e.type,p.t0),t={error:p.t0},p.next=27,(0,He.put)(ae.failure(e.id,p.t0));case 27:return p.prev=27,p.next=30,(0,He.put)(ae.finally(e.id));case 30:return p.finish(27);case 31:return p.abrupt("return",t);case 32:case"end":return p.stop()}}),Xr,null,[[0,21,27,31]])}function tn(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(ne,en);case 2:case"end":return e.stop()}}),$r)}var rn=Be().mark(ln),nn=Be().mark(fn),an=p.ValidationUtils.isValidUUID,on=ze.DataApiActions.getEntityData,sn=ze.DataApiSagas.getEntityDataWorker,cn=or.ACCESS_REQUEST_SUBMISSION,un=new p.Logger("getAccessRequestSagas");function ln(t){var r,n,a,o,s;return Be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,n=t.value,an(n)){i.next=4;break}throw ot;case 4:return i.next=6,(0,He.put)(P.request(t.id));case 6:return i.next=8,(0,He.select)(lr());case 8:return a=i.sent,o=tr(a,cn),i.next=12,(0,He.call)(sn,on({entitySetId:o,entityKeyId:n}));case 12:if(!(s=i.sent).error){i.next=15;break}throw s.error;case 15:return r={data:(0,e.fromJS)(s.data)},i.next=18,(0,He.put)(P.success(t.id,u({},D,r.data)));case 18:i.next=26;break;case 20:return i.prev=20,i.t0=i.catch(0),r={error:i.t0},un.error(t.type,i.t0),i.next=26,(0,He.put)(P.failure(t.id,i.t0));case 26:return i.prev=26,i.next=29,(0,He.put)(P.finally(t.id));case 29:return i.finish(26);case 30:return i.abrupt("return",r);case 31:case"end":return i.stop()}}),rn,null,[[0,20,26,30]])}function fn(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(U,ln);case 2:case"end":return e.stop()}}),nn)}var pn=Be().mark(xn),dn=Be().mark(Sn),vn=ze.SearchApiActions.searchEntitySetData,hn=ze.SearchApiSagas.searchEntitySetDataWorker,yn=or.ACCESS_REQUEST_SUBMISSION,gn=ir.REQUEST_DATE_TIME,mn=new p.Logger("getAllAccessRequestsSagas");function xn(t){var r,n,a,o,s,i;return Be().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,He.put)(O.request(t.id));case 3:return c.next=5,(0,He.select)(lr());case 5:return n=c.sent,a=tr(n,yn),c.next=9,(0,He.select)(yr([gn]));case 9:return o=c.sent,s=o.get(gn),c.next=13,(0,He.call)(hn,vn({entitySetIds:[a],maxHits:1e4,start:0,constraints:[{constraints:[{type:"simple",searchTerm:"*",fuzzy:!1}]}],sort:{propertyTypeId:s,type:"field"}}));case 13:if(!(i=c.sent).error){c.next=16;break}throw i.error;case 16:return r={data:i.data},c.next=19,(0,He.put)(O.success(t.id,{hits:(0,e.fromJS)(i.data.hits)}));case 19:c.next=27;break;case 21:return c.prev=21,c.t0=c.catch(0),r={error:c.t0},mn.error(t.type,c.t0),c.next=27,(0,He.put)(O.failure(t.id,c.t0));case 27:return c.prev=27,c.next=30,(0,He.put)(O.finally(t.id));case 30:return c.finish(27);case 31:return c.abrupt("return",r);case 32:case"end":return c.stop()}}),pn,null,[[0,21,27,31]])}function Sn(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(k,xn);case 2:case"end":return e.stop()}}),dn)}var En=Be().mark(jn),bn=Be().mark(qn),wn=new p.Logger("DocumentsSagas"),In=p.DataUtils.getEntityKeyId,An=p.ValidationUtils.isValidUUID,Tn=ze.SearchApiActions.searchEntityNeighborsWithFilter,Rn=ze.SearchApiSagas.searchEntityNeighborsWithFilterWorker,Dn=or.FILE,Cn=or.ATTACHED_TO,_n=or.ACCESS_REQUEST_SUBMISSION;function jn(t){var r,n,a,o,s,i,c,u,l,f,p;return Be().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(r={},d.prev=1,a=t.value,An(a)){d.next=5;break}throw ot;case 5:return d.next=7,(0,He.put)(G.request(t.id));case 7:return d.next=9,(0,He.select)(lr());case 9:return o=d.sent,s=tr(o,_n),i=tr(o,Dn),c=tr(o,Cn),u={entitySetId:s,filter:{entityKeyIds:[a],edgeEntitySetIds:[c],destinationEntitySetIds:[],sourceEntitySetIds:[i]}},d.next=16,(0,He.call)(Rn,Tn(u));case 16:if(!(l=d.sent).error){d.next=19;break}throw l.error;case 19:return f=mr()(n=(0,e.fromJS)(l.data).get(a,(0,e.List)())).call(n,(function(e){return e.get("neighborDetails")})),p=(0,e.Map)(mr()(f).call(f,(function(e){return[In(e),e]}))),r.data=p,d.next=24,(0,He.put)(G.success(t.id,p));case 24:d.next=31;break;case 26:return d.prev=26,d.t0=d.catch(1),wn.error(t.type,d.t0),d.next=31,(0,He.put)(G.failure(t.id));case 31:return d.prev=31,d.next=34,(0,He.put)(G.finally(t.id));case 34:return d.finish(31);case 35:return d.abrupt("return",r);case 36:case"end":return d.stop()}}),En,null,[[1,26,31,35]])}function qn(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeLatest)(z,jn);case 2:case"end":return e.stop()}}),bn)}var kn=Be().mark(Nn),On=Be().mark(Mn),Un=ze.SearchApiActions.searchEntitySetData,Pn=ze.SearchApiSagas.searchEntitySetDataWorker,Ln=or.FORM,Fn=new p.Logger("getFormsSagas");function Nn(t){var r,n,a,o;return Be().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,He.put)(q.request(t.id));case 3:return s.next=5,(0,He.select)(lr());case 5:return n=s.sent,a=tr(n,Ln),s.next=9,(0,He.call)(Pn,Un({entitySetIds:[a],maxHits:1e4,start:0,constraints:[{constraints:[{type:"simple",searchTerm:"Common Application",fuzzy:!1}]}]}));case 9:if(!(o=s.sent).error){s.next=12;break}throw o.error;case 12:return r={data:o.data},s.next=15,(0,He.put)(q.success(t.id,{forms:(0,e.fromJS)(o.data.hits)}));case 15:s.next=23;break;case 17:return s.prev=17,s.t0=s.catch(0),r={error:s.t0},Fn.error(t.type,s.t0),s.next=23,(0,He.put)(q.failure(t.id,s.t0));case 23:return s.prev=23,s.next=26,(0,He.put)(q.finally(t.id));case 26:return s.finish(23);case 27:return s.abrupt("return",r);case 28:case"end":return s.stop()}}),kn,null,[[0,17,23,27]])}function Mn(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(j,Nn);case 2:case"end":return e.stop()}}),On)}var Bn=Be().mark(Yn),Qn=Be().mark(Xn),Wn=ze.DataApiActions.createOrMergeEntityData,Hn=ze.DataApiSagas.createOrMergeEntityDataWorker,zn=or.FORM,Gn=ir.RJSF_JSON_SCHEMA,Kn=ir.RJSF_UI_SCHEMA,Jn=ir.TYPE,Vn=new p.Logger("saveNewFormTemplateSagas");function Yn(e){var t,r,n,a,o,s,i,c,l,f,p,d,v,h,y,g;return Be().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(m.prev=0,n=e.value,Mr()(n)){m.next=4;break}throw ot;case 4:return m.next=6,(0,He.put)($.request(e.id));case 6:return m.next=8,(0,He.select)(lr());case 8:return a=m.sent,o=tr(a,zn),s=n.schema,i=n.uiSchema,c=n.type,m.next=13,(0,He.select)(yr([Gn,Kn,Jn]));case 13:return l=m.sent,f=l.get(Gn),p=l.get(Kn),d=l.get(Jn),v=Fr()(s),h=Fr()(i),y=[(r={},u(r,d,[c||"Common Application"]),u(r,f,[v]),u(r,p,[h]),r)],m.next=22,(0,He.call)(Hn,Wn({entitySetId:o,entityData:y}));case 22:if(!(g=m.sent).error){m.next=25;break}throw g.error;case 25:return t=g,m.next=28,(0,He.put)($.success(e.id));case 28:m.next=36;break;case 30:return m.prev=30,m.t0=m.catch(0),t={error:m.t0},Vn.error(e.type,m.t0),m.next=36,(0,He.put)($.failure(e.id,m.t0));case 36:return m.prev=36,m.next=39,(0,He.put)($.finally(e.id));case 39:return m.finish(36);case 40:return m.abrupt("return",t);case 41:case"end":return m.stop()}}),Bn,null,[[0,30,36,40]])}function Xn(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(X,Yn);case 2:case"end":return e.stop()}}),Qn)}const $n=require("luxon");var Zn=Be().mark(fa),ea=Be().mark(pa),ta=_t.Constants.OPENLATTICE_ID_FQN,ra=ze.DataApiActions.createOrMergeEntityData,na=ze.DataApiSagas.createOrMergeEntityDataWorker,aa=or.ACCESS_REQUEST_SUBMISSION,oa=ir.FORM_DATA,sa=ir.REQUEST_DATE_TIME,ia=ir.RJSF_JSON_SCHEMA,ca=ir.RJSF_UI_SCHEMA,ua=ir.TYPE,la=new p.Logger("submitAccessRequestSagas");function fa(t){var r,n,a,o,s,i,c,l,f,p,d,v,h,y,g,m,x,S,E,b,w,I,A;return Be().wrap((function(T){for(;;)switch(T.prev=T.next){case 0:if(T.prev=0,o=t.value,Mr()(o)){T.next=4;break}throw ot;case 4:return T.next=6,(0,He.put)(F.request(t.id));case 6:return T.next=8,(0,He.select)(lr());case 8:return s=T.sent,i=tr(s,aa),c=o.formData,l=o.schema,f=o.uiSchema,p=o.type,T.next=13,(0,He.select)(yr([oa,sa,ia,ca,ua]));case 13:return d=T.sent,v=d.get(oa),h=d.get(sa),y=d.get(ia),g=d.get(ca),m=d.get(ua),x=Fr()(c),S=Fr()(l),E=Fr()(f),b=$n.DateTime.local().toISO(),w=[(n={},u(n,m,[p||"Common Application"]),u(n,v,[x]),u(n,y,[S]),u(n,g,[E]),u(n,h,[b]),n)],T.next=26,(0,He.call)(na,ra({entitySetId:i,entityData:w}));case 26:if(!(I=T.sent).error){T.next=29;break}throw I.error;case 29:return A=(0,e.Map)((u(a={},ua,[p||"Common Application"]),u(a,oa,[x]),u(a,ia,[S]),u(a,ca,[E]),u(a,sa,[b]),u(a,ta,I.data),a)),r={data:A},T.next=33,(0,He.put)(F.success(t.id,r.data));case 33:T.next=41;break;case 35:return T.prev=35,T.t0=T.catch(0),r={error:T.t0},la.error(t.type,T.t0),T.next=41,(0,He.put)(F.failure(t.id,T.t0));case 41:return T.prev=41,T.next=44,(0,He.put)(F.finally(t.id));case 44:return T.finish(41);case 45:return T.abrupt("return",r);case 46:case"end":return T.stop()}}),Zn,null,[[0,35,41,45]])}function pa(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(L,fa);case 2:case"end":return e.stop()}}),ea)}var da=Be().mark(Ea),va=Be().mark(ba),ha=ze.DataApiActions.updateEntityData,ya=ze.DataApiSagas.updateEntityDataWorker,ga=_t.Types.UpdateTypes,ma=or.FILE,xa=ir.LABEL,Sa=new p.Logger("updateAttachmentTag");function Ea(e){var t,r,n,a,o,s,i,c,l,f;return Be().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(p.prev=0,r=e.value,Mr()(r)){p.next=4;break}throw ot;case 4:return n=r.tag,a=r.entityKeyId,p.next=7,(0,He.put)(ee.request(e.id,{path:[C,a,xa.toString(),0],tag:n}));case 7:return p.next=9,(0,He.select)(lr());case 9:return o=p.sent,s=tr(o,ma),p.next=13,(0,He.select)(yr([xa]));case 13:return i=p.sent,c=i.get(xa),l=u({},a,u({},c,[n])),p.next=18,(0,He.call)(ya,ha({entitySetId:s,entities:l,updateType:ga.PartialReplace}));case 18:if(!(f=p.sent).error){p.next=21;break}throw f.error;case 21:return t={data:f.data},p.next=24,(0,He.put)(ee.success(e.id));case 24:p.next=32;break;case 26:return p.prev=26,p.t0=p.catch(0),t={error:p.t0},Sa.error(e.type,p.t0),p.next=32,(0,He.put)(ee.failure(e.id,p.t0));case 32:return p.prev=32,p.next=35,(0,He.put)(ee.finally(e.id));case 35:return p.finish(32);case 36:return p.abrupt("return",t);case 37:case"end":return p.stop()}}),da,null,[[0,26,32,36]])}function ba(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(Z,Ea);case 2:case"end":return e.stop()}}),va)}var wa=r(1643),Ia=r.n(wa),Aa=";base64,";const Ta=function(e){var t=Ia()(e).call(e,Aa);return t<0?e:e.substring(t+Aa.length)};var Ra=Be().mark(Ma),Da=Be().mark(Ba),Ca=_t.Models.DataGraphBuilder,_a=or.ACCESS_REQUEST_SUBMISSION,ja=or.ATTACHED_TO,qa=or.FILE,ka=ir.DATE_TIME,Oa=ir.FILE_DATA,Ua=ir.GROUP_ID,Pa=ir.LABEL,La=ir.NAME,Fa=ir.TYPE,Na=new p.Logger("DocumentsSagas");function Ma(e){var t,r,n,a,o,s,i,c,l,f,p,d,v,h,y,g,m,x,S,E,b,w,I,A,T,R,D,C;return Be().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,He.put)(J.request(e.id));case 3:return r=e.value,n=r.accessRequestId,a=r.files,o=void 0===a?[]:a,s=r.tags,i=void 0===s?[]:s,c=r.groupId,l=void 0===c?"":c,_.next=6,(0,He.select)(lr());case 6:return f=_.sent,p=tr(f,_a),d=tr(f,qa),v=tr(f,ja),_.next=12,(0,He.select)(yr([ka,Oa,Ua,Pa,La,Fa]));case 12:return h=_.sent,y=h.get(ka),g=h.get(Oa),m=h.get(La),x=h.get(Fa),S=h.get(Pa),E=h.get(Ua),b=$n.DateTime.local().toISO(),w=mr()(o).call(o,(function(e,t){var r,n=e.base64,a=e.name,o=e.type;return u(r={},y,[b]),u(r,g,[{"content-type":o,"content-disposition":'attachment; filename="'.concat(a,'"'),data:Ta(n)}]),u(r,E,[l]),u(r,m,[a]),u(r,S,[i[t]]),u(r,x,[o]),r})),I=u({},y,[b]),A=[],Ct()(o).call(o,(function(e,t){A.push({srcEntitySetId:d,srcEntityIndex:t,dstEntitySetId:p,dstEntityKeyId:n,data:I})})),T=u({},d,w),R=u({},v,A),D=(new Ca).setAssociations(R).setEntities(T).build(),_.next=29,(0,He.call)(_t.DataApi.createEntityAndAssociationData,D);case 29:if(!(C=_.sent).error){_.next=32;break}throw C.error;case 32:return t={data:{}},_.next=35,(0,He.put)(J.success(e.id));case 35:_.next=43;break;case 37:return _.prev=37,_.t0=_.catch(0),Na.error(e.type,_.t0),t={error:_.t0},_.next=43,(0,He.put)(J.failure(e.id,_.t0));case 43:return _.prev=43,_.next=46,(0,He.put)(J.finally(e.id));case 46:return _.finish(43);case 47:return _.abrupt("return",t);case 48:case"end":return _.stop()}}),Ra,null,[[0,37,43,47]])}function Ba(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(K,Ma);case 2:case"end":return e.stop()}}),Da)}var Qa=Be().mark(za),Wa=Be().mark(Ga),Ha=new p.Logger("DocumentsSagas");function za(e){var t,r,n,a,o,s,i,c,u,l,f,p;return Be().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,(0,He.put)(re.request(e.id));case 3:return r=e.value,n=r.accessRequestId,a=r.file,o=r.formData,s=r.groupId,i=(0,He.call)(Ma,J({files:[a],accessRequestId:n,groupId:s})),c=(0,He.call)(Vr,H({formData:o,entityKeyId:n})),d.next=8,(0,He.all)([i,c]);case 8:if(u=d.sent,l=Pr(u,2),f=l[0],p=l[1],!f.error){d.next=14;break}throw f.error;case 14:if(!p.error){d.next=16;break}throw p.error;case 16:return t={data:{}},d.next=19,(0,He.call)(jn,G(n));case 19:return d.next=21,(0,He.put)(re.success(e.id));case 21:d.next=29;break;case 23:return d.prev=23,d.t0=d.catch(0),Ha.error(e.type,d.t0),t={error:d.t0},d.next=29,(0,He.put)(re.failure(e.id,d.t0));case 29:return d.prev=29,d.next=32,(0,He.put)(re.finally(e.id));case 32:return d.finish(29);case 33:return d.abrupt("return",t);case 34:case"end":return d.stop()}}),Qa,null,[[0,23,29,33]])}function Ga(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(te,za);case 2:case"end":return e.stop()}}),Wa)}const Ka=require("history");var Ja="/request/".concat(":accessRequestId"),Va="GO_TO_ROOT";var Ya="GO_TO_ROUTE";function Xa(e,t){return{route:t,error:e,type:"ROUTING_FAILURE"}}var $a=r(9828),Za=r.n($a);const eo=require("connected-react-router");var to=Be().mark(so),ro=Be().mark(io),no=Be().mark(co),ao=new p.Logger("RoutingSagas"),oo='invalid route: a route must be a non-empty string that starts with "/"';function so(e){var t,r,n;return Be().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.route,r=e.state,n=void 0===r?{}:r,null!=t&&Za()(t).call(t,"/",0)){a.next=6;break}return ao.error(oo,t),a.next=5,(0,He.put)(Xa(oo,t));case 5:return a.abrupt("return");case 6:return a.next=8,(0,He.put)((0,eo.push)({state:Fr()(n),pathname:t}));case 8:case"end":return a.stop()}}),to)}function io(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(Ya,so);case 2:case"end":return e.stop()}}),ro)}function co(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.takeEvery)(Va,so);case 2:case"end":return e.stop()}}),no)}var uo=(0,Ka.createHashHistory)(),lo=Be().mark(fo);function fo(){return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,He.all)([(0,He.fork)(l.AuthSagas.watchAuthAttempt),(0,He.fork)(l.AuthSagas.watchAuthSuccess),(0,He.fork)(l.AuthSagas.watchAuthFailure),(0,He.fork)(l.AuthSagas.watchAuthExpired),(0,He.fork)(l.AuthSagas.watchLogout),(0,He.fork)(xt),(0,He.fork)(nt),(0,He.fork)(co),(0,He.fork)(io),(0,He.fork)(Ur),(0,He.fork)(tn),(0,He.fork)(fn),(0,He.fork)(Sn),(0,He.fork)(qn),(0,He.fork)(Mn),(0,He.fork)(Xn),(0,He.fork)(pa),(0,He.fork)(Yr),(0,He.fork)(ba),(0,He.fork)(Ba),(0,He.fork)(Ga)]);case 2:case"end":return e.stop()}}),lo)}function po(e){var r=o()(),n=[r,(0,s.routerMiddleware)(e)],a=[i.applyMiddleware.apply(void 0,n)],c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({stateSanitizer:function(e){return e.setIn(["edm","entityTypes"],"HIDDEN").setIn(["edm","entityTypesIndexMap"],"HIDDEN").setIn(["edm","propertyTypes"],"HIDDEN").setIn(["edm","propertyTypesIndexMap"],"HIDDEN")},maxAge:100}):i.compose,p=(0,i.createStore)(function(e){var t;return(0,f.combineReducers)((u(t={},h,Ne),u(t,y,Rt),u(t,g,l.AuthReducer),u(t,m,Yt),u(t,"router",(0,s.connectRouter)(e)),t))}(e),t().Map(),c.apply(void 0,a));return r.run(fo),p}var vo=r(6689),ho=r.n(vo);const yo=require("lattice-ui-kit"),go=require("react-router-dom"),mo=require("styled-components");var xo=r.n(mo),So=r(3649),Eo=r.n(So);const bo=require("react-redux");var wo=po(uo),Io=(0,vo.createContext)(null),Ao=((0,bo.createStoreHook)(Io),(0,bo.createDispatchHook)(Io)),To=(0,bo.createSelectorHook)(Io);const Ro=require("react/jsx-runtime");var Do=_t.Constants.OPENLATTICE_LAST_WRITE_FQN,Co=ir.REQUEST_DATE_TIME,_o=ir.TYPE,jo=p.DataUtils.getPropertyValue;const qo=function(e){var t,r,n=e.data,a=e.to,o=Ao(),s=jo(n,[_o,0]),i=jo(n,[Co,0]),c=jo(n,[Do,0]),u=$n.DateTime.fromISO(i),l=$n.DateTime.fromISO(c),f=u.toLocaleString($n.DateTime.DATE_SHORT),p="Created: ".concat(f);if(l.diff(u,"seconds").seconds>1){var d=l.toRelative({style:"short"});p=Ue()(p).call(p," · Updated: ".concat(d))}var v=mr()(t=Eo()(r=s.split(" ")).call(r,0,2)).call(t,(function(e){return e.charAt(0).toUpperCase()})).join("");return(0,Ro.jsxs)(yo.ListItem,{button:!0,component:go.Link,disableGutters:!0,onClick:function(){o({type:N,value:n})},to:a,children:[(0,Ro.jsx)(yo.ListItemAvatar,{children:(0,Ro.jsx)(yo.Avatar,{children:v})}),(0,Ro.jsx)(yo.ListItemText,{primary:s,secondary:p})]})};var ko=r(6295),Oo=r.n(ko);const Uo=function(e,t){var r;return t.params?We()(r=Oo()(t.params)).call(r,(function(e,t){var r=Pr(t,2),n=r[0],a=r[1];return e.replace(RegExp(":".concat(n),"g"),a)}),e):e};var Po=p.DataUtils.getEntityKeyId;const Lo=function(){var t=Ao(),r=To((function(t){return t.getIn([h,cr],(0,e.List)())})),n=To((function(e){return e.getIn(At)})),a=To((function(e){return e.getIn(Tt)})),o=Uo(n,a);return(0,vo.useEffect)((function(){t(O())}),[t]),(0,Ro.jsx)(yo.List,{children:mr()(r).call(r,(function(e){var t,r=Po(e)||"";return(0,Ro.jsx)(qo,{data:e,to:Ue()(t="".concat(o,"/request/")).call(t,r)},r)}))})};var Fo=xo().div.withConfig({displayName:"AllRequestsContainer__HeaderRow",componentId:"k7n8n2-0"})(["display:flex;justify-content:space-between;align-items:center;"]);const No=function(){var e=To((function(e){return e.getIn(At)})),t=To((function(e){return e.getIn(Tt)})),r=Uo(e,t);return(0,Ro.jsxs)("div",{children:[(0,Ro.jsxs)(Fo,{children:[(0,Ro.jsx)(yo.Typography,{variant:"h1",children:"Access Requests"}),(0,Ro.jsx)(yo.Button,{color:"primary",component:go.Link,to:"".concat(r,"/new"),children:"New Request"})]}),(0,Ro.jsx)(Lo,{})]})},Mo=require("@fortawesome/pro-regular-svg-icons/faPrint"),Bo=require("@fortawesome/react-fontawesome"),Qo=require("react-router");var Wo=r(7116);const Ho=require("@fortawesome/pro-regular-svg-icons/faPaperclip"),zo=require("@fortawesome/pro-light-svg-icons/faFilePdf"),Go=require("@fortawesome/pro-light-svg-icons/faFileWord"),Ko=require("@fortawesome/pro-regular-svg-icons/faDownload"),Jo=require("@fortawesome/pro-regular-svg-icons/faPen"),Vo=require("@fortawesome/pro-regular-svg-icons/faTimes"),Yo=require("@fortawesome/pro-regular-svg-icons/faTrashAlt");var Xo="Consent Form",$o="CPHS Review",Zo="Data Release Letter",es="Data Security Letter",ts="Data Use Agreement",rs="Department Support Letter",ns="IRB Approval",as="Participant's Bill of Rights",os=[{label:Xo,value:Xo},{label:$o,value:$o},{label:Zo,value:Zo},{label:es,value:es},{label:ts,value:ts},{label:rs,value:rs},{label:ns,value:ns},{label:as,value:as}];const ss=function(e){var t=e.index,r=e.onTagChange,n=e.value;return(0,Ro.jsx)(yo.Creatable,{isClearable:!0,onChange:function(e){r(t,e)},options:os,placeholder:"Select or create tag",useRawValues:!0,value:n})};var is,cs=xo().div.withConfig({displayName:"styled__CenterWrapper",componentId:"sc-6qf0vq-0"})(["align-items:center;display:flex;height:100%;justify-content:center;"]),us=xo().div.withConfig({displayName:"styled__ItemTextWrapper",componentId:"sc-6qf0vq-1"})(["padding-right:",";width:100%;"],(function(e){return e.paddingRight?e.paddingRight:"16px"})),ls=("".concat("audio/","*"),"".concat("image/","*")),fs=("".concat("video/","*"),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"),ps="application/pdf",ds=(u(is={},ps,zo.faFilePdf),u(is,fs,Go.faFileWord),is),vs=p.DataUtils.getEntityKeyId,hs=p.DataUtils.getPropertyValue,ys=ir.DATE_TIME,gs=ir.FILE_DATA,ms=ir.LABEL,xs=ir.NAME,Ss=ir.TYPE,Es=xo().img.withConfig({displayName:"AttachmentItem__ImagePreview",componentId:"olj6j0-0"})(["max-height:40px;max-width:40px;"]),bs=function(e){var t=e.date,r=e.tag;return(0,Ro.jsxs)(Ro.Fragment,{children:[t,r&&(0,Ro.jsx)(yo.Tag,{mode:"secondary",children:r})]})};const ws=function(e){var t,r,n=e.divider,a=e.file,o=e.onDelete,s=Ao(),i=Pr((0,vo.useState)(!1),2),c=i[0],u=i[1],l=hs(a,[ys,0]),f=$n.DateTime.fromISO(l).toLocaleString($n.DateTime.DATE_SHORT),p=hs(a,[gs,0]),d=vs(a),v=hs(a,[xs,0]),h=hs(a,[ms,0]),y=hs(a,[Ss,0]);Ct()(t=Oo()(ds)).call(t,(function(e){var t=Pr(e,2),n=t[0],a=t[1];Za()(y).call(y,n)&&(r=a)}));var g=r?(0,Ro.jsx)(Bo.FontAwesomeIcon,{fixedWidth:!0,icon:r,size:"2x"}):(0,Ro.jsx)(Es,{src:p});return(0,Ro.jsxs)(yo.ListItem,{divider:n,children:[(0,Ro.jsx)(yo.ListItemAvatar,{children:g}),(0,Ro.jsxs)(us,{paddingRight:"96px",children:[(0,Ro.jsx)(yo.ListItemText,{primary:v,secondary:c?null:(0,Ro.jsx)(bs,{date:f,tag:h})}),c&&(0,Ro.jsx)(ss,{index:d,onTagChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";s(ee({entityKeyId:e,tag:t})),u(!1)},value:h})]}),(0,Ro.jsxs)(yo.ListItemSecondaryAction,{children:[(0,Ro.jsx)(yo.IconButton,{"aria-label":"Edit Tag",onClick:function(){u(!c)},title:"Edit Tag",children:(0,Ro.jsx)(Bo.FontAwesomeIcon,{fixedWidth:!0,icon:c?Vo.faTimes:Jo.faPen})}),(0,Ro.jsx)("a",{"aria-label":"Download",download:!0,href:p,rel:"noreferrer",target:"_blank",title:"Download",children:(0,Ro.jsx)(yo.IconButton,{children:(0,Ro.jsx)(Bo.FontAwesomeIcon,{icon:Ko.faDownload,fixedWidth:!0})})}),(0,Ro.jsx)(yo.IconButton,{"aria-label":"Delete",onClick:function(){o(d)},title:"Delete",children:(0,Ro.jsx)(Bo.FontAwesomeIcon,{fixedWidth:!0,icon:Yo.faTrashAlt})})]})]})};var Is=p.DataUtils.getEntityKeyId;const As=function(e){var t,r=e.accessRequestId,n=To(fr()),a=Ao();(0,vo.useEffect)((function(){a(G(r))}),[r,a]);var o=function(e){a(Y([e]))};return(0,Ro.jsx)(yo.List,{children:mr()(t=n.valueSeq()).call(t,(function(e,t){var r=Is(e),a=t!==n.size-1;return(0,Ro.jsx)(ws,{divider:a,file:e,onDelete:o},r)}))})};var Ts=r(1068),Rs=r.n(Ts);function Ds(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),c(e,n.key,n)}}function Cs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _s=r(189),js=r(9542);function qs(e,t){return qs=js||function(e,t){return e.__proto__=t,e},qs(e,t)}var ks=r(3882);function Os(e){return Os="function"==typeof Re&&"symbol"==typeof ks?function(e){return typeof e}:function(e){return e&&"function"==typeof Re&&e.constructor===Re&&e!==Re.prototype?"symbol":typeof e},Os(e)}function Us(e,t){if(t&&("object"===Os(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cs(e)}var Ps=r(4889);function Ls(e){return Ls=js?Ps:function(e){return e.__proto__||Ps(e)},Ls(e)}var Fs,Ns=r(2762),Ms=r.n(Ns),Bs=(u(Fs={},ps,zo.faFilePdf),u(Fs,fs,Go.faFileWord),Fs),Qs=xo().img.withConfig({displayName:"DocumentItem__ImagePreview",componentId:"sc-15vefxs-0"})(["max-height:40px;max-width:40px;"]);const Ws=function(e){var t,r,n=e.divider,a=e.file,o=e.index,s=e.onDelete,i=e.onTagChange,c=e.tag,u=a.name,l=a.type,f=a.base64;Ct()(t=Oo()(Bs)).call(t,(function(e){var t=Pr(e,2),n=t[0],a=t[1];Za()(l).call(l,n)&&(r=a)}));var p=r?(0,Ro.jsx)(Bo.FontAwesomeIcon,{fixedWidth:!0,icon:r,size:"2x"}):(0,Ro.jsx)(Qs,{src:f});return(0,Ro.jsxs)(yo.ListItem,{divider:n,children:[(0,Ro.jsx)(yo.ListItemAvatar,{children:p}),(0,Ro.jsxs)(us,{children:[(0,Ro.jsx)(yo.ListItemText,{primary:u}),(0,Ro.jsx)(ss,{index:o,onTagChange:i,value:c})]}),(0,Ro.jsx)(yo.ListItemSecondaryAction,{children:(0,Ro.jsx)(yo.IconButton,{"aria-label":"Remove",onClick:function(){s(o)},title:"Remove",children:(0,Ro.jsx)(Bo.FontAwesomeIcon,{fixedWidth:!0,icon:Yo.faTrashAlt})})})]})},Hs=require("prop-types");var zs=r.n(Hs);const Gs=require("file-selector"),Ks=require("attr-accept");var Js=r.n(Ks);function Vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ys(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ys(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xs=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},$s=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," bytes")}},Zs=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," bytes")}},ei={code:"too-many-files",message:"Too many files"};function ti(e,t){var r="application/x-moz-file"===e.type||Js()(e,t);return[r,r?null:Xs(t)]}function ri(e,t,r){if(ni(e.size))if(ni(t)&&ni(r)){if(e.size>r)return[!1,$s(r)];if(e.size<t)return[!1,Zs(t)]}else{if(ni(t)&&e.size<t)return[!1,Zs(t)];if(ni(r)&&e.size>r)return[!1,$s(r)]}return[!0,null]}function ni(e){return null!=e}function ai(e){var t=e.files,r=e.accept,n=e.minSize,a=e.maxSize,o=e.multiple,s=e.maxFiles;return!(!o&&t.length>1||o&&s>=1&&t.length>s)&&t.every((function(e){var t=Vs(ti(e,r),1)[0],o=Vs(ri(e,n,a),1)[0];return t&&o}))}function oi(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function si(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function ii(e){e.preventDefault()}function ci(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function ui(e){return-1!==e.indexOf("Edge/")}function li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return ci(e)||ui(e)}function fi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.some((function(t){return!oi(e)&&t&&t.apply(void 0,[e].concat(n)),oi(e)}))}}function pi(e){return function(e){if(Array.isArray(e))return hi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||vi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||vi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){if(e){if("string"==typeof e)return hi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hi(e,t):void 0}}function hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(r),!0).forEach((function(t){mi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xi(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Si=(0,vo.forwardRef)((function(e,t){var r=e.children,n=wi(xi(e,["children"])),a=n.open,o=xi(n,["open"]);return(0,vo.useImperativeHandle)(t,(function(){return{open:a}}),[a]),ho().createElement(vo.Fragment,null,r(gi(gi({},o),{},{open:a})))}));Si.displayName="Dropzone";var Ei={disabled:!1,getFilesFromEvent:Gs.fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null};Si.defaultProps=Ei,Si.propTypes={children:zs().func,accept:zs().oneOfType([zs().string,zs().arrayOf(zs().string)]),multiple:zs().bool,preventDropOnDocument:zs().bool,noClick:zs().bool,noKeyboard:zs().bool,noDrag:zs().bool,noDragEventsBubbling:zs().bool,minSize:zs().number,maxSize:zs().number,maxFiles:zs().number,disabled:zs().bool,getFilesFromEvent:zs().func,onFileDialogCancel:zs().func,onDragEnter:zs().func,onDragLeave:zs().func,onDragOver:zs().func,onDrop:zs().func,onDropAccepted:zs().func,onDropRejected:zs().func,validator:zs().func};var bi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=gi(gi({},Ei),e),r=t.accept,n=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,s=t.minSize,i=t.multiple,c=t.maxFiles,u=t.onDragEnter,l=t.onDragLeave,f=t.onDragOver,p=t.onDrop,d=t.onDropAccepted,v=t.onDropRejected,h=t.onFileDialogCancel,y=t.preventDropOnDocument,g=t.noClick,m=t.noKeyboard,x=t.noDrag,S=t.noDragEventsBubbling,E=t.validator,b=(0,vo.useRef)(null),w=(0,vo.useRef)(null),I=(0,vo.useReducer)(Ii,bi),A=di(I,2),T=A[0],R=A[1],D=T.isFocused,C=T.isFileDialogActive,_=T.draggedFiles,j=(0,vo.useCallback)((function(){w.current&&(R({type:"openDialog"}),w.current.value=null,w.current.click())}),[R]),q=function(){C&&setTimeout((function(){w.current&&(w.current.files.length||(R({type:"closeDialog"}),"function"==typeof h&&h()))}),300)};(0,vo.useEffect)((function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}}),[w,C,h]);var k=(0,vo.useCallback)((function(e){b.current&&b.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),j()))}),[b,w]),O=(0,vo.useCallback)((function(){R({type:"focus"})}),[]),U=(0,vo.useCallback)((function(){R({type:"blur"})}),[]),P=(0,vo.useCallback)((function(){g||(li()?setTimeout(j,0):j())}),[w,g]),L=(0,vo.useRef)([]),F=function(e){b.current&&b.current.contains(e.target)||(e.preventDefault(),L.current=[])};(0,vo.useEffect)((function(){return y&&(document.addEventListener("dragover",ii,!1),document.addEventListener("drop",F,!1)),function(){y&&(document.removeEventListener("dragover",ii),document.removeEventListener("drop",F))}}),[b,y]);var N=(0,vo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e),L.current=[].concat(pi(L.current),[e.target]),si(e)&&Promise.resolve(a(e)).then((function(t){oi(e)&&!S||(R({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e))}))}),[a,u,S]),M=(0,vo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e);var t=si(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&f&&f(e),!1}),[f,S]),B=(0,vo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e);var t=L.current.filter((function(e){return b.current&&b.current.contains(e)})),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),L.current=t,t.length>0||(R({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),si(e)&&l&&l(e))}),[b,l,S]),Q=(0,vo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e),L.current=[],si(e)&&Promise.resolve(a(e)).then((function(t){if(!oi(e)||S){var n=[],a=[];t.forEach((function(e){var t=di(ti(e,r),2),i=t[0],c=t[1],u=di(ri(e,s,o),2),l=u[0],f=u[1],p=E?E(e):null;if(i&&l&&!p)n.push(e);else{var d=[c,f];p&&(d=d.concat(p)),a.push({file:e,errors:d.filter((function(e){return e}))})}})),(!i&&n.length>1||i&&c>=1&&n.length>c)&&(n.forEach((function(e){a.push({file:e,errors:[ei]})})),n.splice(0)),R({acceptedFiles:n,fileRejections:a,type:"setFiles"}),p&&p(n,a,e),a.length>0&&v&&v(a,e),n.length>0&&d&&d(n,e)}})),R({type:"reset"})}),[i,r,s,o,c,a,p,d,v,S,E]),W=function(e){return n?null:e},H=function(e){return m?null:W(e)},z=function(e){return x?null:W(e)},G=function(e){S&&e.stopPropagation()},K=(0,vo.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,a=e.onKeyDown,o=e.onFocus,s=e.onBlur,i=e.onClick,c=e.onDragEnter,u=e.onDragOver,l=e.onDragLeave,f=e.onDrop,p=xi(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return gi(gi(mi({onKeyDown:H(fi(a,k)),onFocus:H(fi(o,O)),onBlur:H(fi(s,U)),onClick:W(fi(i,P)),onDragEnter:z(fi(c,N)),onDragOver:z(fi(u,M)),onDragLeave:z(fi(l,B)),onDrop:z(fi(f,Q))},r,b),n||m?{}:{tabIndex:0}),p)}}),[b,k,O,U,P,N,M,B,Q,m,x,n]),J=(0,vo.useCallback)((function(e){e.stopPropagation()}),[]),V=(0,vo.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,a=e.onChange,o=e.onClick,s=xi(e,["refKey","onChange","onClick"]),c=mi({accept:r,multiple:i,type:"file",style:{display:"none"},onChange:W(fi(a,Q)),onClick:W(fi(o,J)),autoComplete:"off",tabIndex:-1},n,w);return gi(gi({},c),s)}}),[w,r,i,Q,n]),Y=_.length,X=Y>0&&ai({files:_,accept:r,minSize:s,maxSize:o,multiple:i,maxFiles:c}),$=Y>0&&!X;return gi(gi({},T),{},{isDragAccept:X,isDragReject:$,isFocused:D&&!n,getRootProps:K,getInputProps:V,rootRef:b,inputRef:w,open:W(j)})}function Ii(e,t){switch(t.type){case"focus":return gi(gi({},e),{},{isFocused:!0});case"blur":return gi(gi({},e),{},{isFocused:!1});case"openDialog":return gi(gi({},e),{},{isFileDialogActive:!0});case"closeDialog":return gi(gi({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var r=t.isDragActive,n=t.draggedFiles;return gi(gi({},e),{},{draggedFiles:n,isDragActive:r});case"setFiles":return gi(gi({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return gi({},bi);default:return e}}var Ai=yo.Colors.BLUE,Ti=yo.Colors.NEUTRAL,Ri=yo.Colors.PURPLE,Di=yo.Colors.RED,Ci=[ls,ps,fs],_i=xo().div.withConfig({displayName:"Dropzone__DropzoneWrapper",componentId:"j9e9j-0"})(["align-items:center;background-color:",";border-color:",";border-radius:3px;border-style:dashed;border-width:2px;display:flex;flex-direction:column;flex:1;outline:none;padding:32px;transition:border 250ms ease-in-out;"],Ti.N50,(function(e){return function(e){return e.isDragAccept?Ri.P300:e.isDragReject?Di.R300:e.isDragActive?Ai.B300:Ti.N100}(e)}));const ji=function(e){var t=e.onDrop,r=wi({accept:Ci.join(","),onDrop:t}),n=r.getRootProps,a=r.getInputProps,o=r.isDragActive,s=r.isDragAccept,i=r.isDragReject,c=n(),u=c.onBlur,l=c.onClick,f=c.onDragEnter,p=c.onDragLeave,d=c.onDragOver,v=c.onDrop,h=c.onFocus,y=c.onKeyDown,g=c.ref,m=c.tabIndex,x=a(),S=x.accept,E=x.autoComplete,b=x.multiple,w=x.onChange,I=x.onClick,A=x.ref,T=x.style,R=x.tabIndex,D=x.type;return(0,Ro.jsxs)(_i,{isDragActive:o,isDragAccept:s,isDragReject:i,onBlur:u,onClick:l,onDragEnter:f,onDragLeave:p,onDragOver:d,onDrop:v,onFocus:h,onKeyDown:y,ref:g,tabIndex:m,children:[(0,Ro.jsx)("input",{accept:S,autoComplete:E,multiple:b,onChange:w,onClick:I,ref:A,style:T,tabIndex:R,type:D}),(0,Ro.jsx)(yo.Typography,{component:"span",children:"Drop files here or click to select."})]})};const qi=function(e){var t=e.onChange,r=(0,vo.useCallback)((function(e){return t(e)}),[t]);return(0,Ro.jsx)(ji,{onDrop:function(e){Ct()(e).call(e,(function(e){var t=e.name,n=e.type,a=new FileReader;a.onload=function(){var e=a.result;r({file:{base64:e,name:t,type:n}})},a.readAsDataURL(e)}))}})};function ki(e){var t=function(){if("undefined"==typeof Reflect||!Rs())return!1;if(Rs().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Rs()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ls(e);if(t){var a=Ls(this).constructor;r=Rs()(n,arguments,a)}else r=n.apply(this,arguments);return Us(this,r)}}var Oi=p.ReduxUtils.isSuccess,Ui=p.ReduxUtils.isPending,Pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=_s(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qs(e,t)}(o,e);var t,r,n,a=ki(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),u(Cs(t=a.call(this,e)),"onDrop",(function(e){var r,n=e.file,a=t.state.files;t.setState({files:Ue()(r=[]).call(r,qe(a),[n])})})),u(Cs(t),"onDelete",(function(e){var r=t.state,n=r.files,a=r.tags,o=br()(n),s=br()(a);Ms()(o).call(o,e,1),Ms()(s).call(s,e,1),t.setState({files:o,tags:s})})),u(Cs(t),"onTagChange",(function(e,r){var n=t.state.tags,a=br()(n);a[e]=r,t.setState({tags:a})})),u(Cs(t),"onUpload",(function(){var e=t.props,r=e.accessRequestId,n=e.actions,a=t.state,o=a.files,s=a.tags;n.uploadAttachments({accessRequestId:r,files:o,tags:s})})),t.state={files:[],tags:[]},t}return t=o,(r=[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.requestState,r=e.onSuccess;Oi(t)&&r()}},{key:"componentWillUnmount",value:function(){this.props.actions.resetRequestState([K])}},{key:"render",value:function(){var e=this,t=this.state,r=t.files,n=t.tags,a=this.props.requestState;return(0,Ro.jsxs)("div",{children:[(0,Ro.jsx)(qi,{onChange:this.onDrop}),(0,Ro.jsx)(yo.List,{children:mr()(r).call(r,(function(t,a){var o=a!==r.length-1;return(0,Ro.jsx)(Ws,{divider:o,file:t,index:a,onDelete:e.onDelete,onTagChange:e.onTagChange,tag:n[a]},"document-".concat(a))}))}),(0,Ro.jsx)(yo.Button,{color:"primary",disabled:!r.length,fullWidth:!0,isLoading:Ui(a),onClick:this.onUpload,children:"Upload"})]})}}])&&Ds(t.prototype,r),n&&Ds(t,n),o}(vo.Component);const Li=(0,bo.connect)((function(e){return{requestState:e.getIn([h,K,T])}}),(function(e){return{actions:(0,i.bindActionCreators)({resetRequestState:Ie,uploadAttachments:J},e)}}),null,{context:Io})(Pi);var Fi=r(4310),Ni=r.n(Fi),Mi=r(116),Bi=r.n(Mi),Qi=r(4074),Wi=r.n(Qi),Hi=r(9649),zi=r.n(Hi),Gi=r(368),Ki=r.n(Gi),Ji=r(3978),Vi=r.n(Ji),Yi=r(3263),Xi=r(5683),$i=r(9356);function Zi(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=$i(e);for(n=0;n<o.length;n++)r=o[n],Xi(t).call(t,r)>=0||(a[r]=e[r]);return a}(e,t);if(Yi){var o=Yi(e);for(n=0;n<o.length;n++)r=o[n],Xi(t).call(t,r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ec=["children","value","index"];function tc(e,t){var r=Sr()(e);if(Ni()){var n=Ni()(e);t&&(n=Bi()(n).call(n,(function(t){return Wi()(e,t).enumerable}))),r.push.apply(r,n)}return r}function rc(e){for(var t=1;t<arguments.length;t++){var r,n,a=null!=arguments[t]?arguments[t]:{};t%2?Ct()(r=tc(Object(a),!0)).call(r,(function(t){u(e,t,a[t])})):zi()?Ki()(e,zi()(a)):Ct()(n=tc(Object(a))).call(n,(function(t){Vi()(e,t,Wi()(a,t))}))}return e}const nc=function(e){var t=e.children,r=e.value,n=e.index,a=Zi(e,ec);return(0,Ro.jsx)("div",rc(rc({"aria-controls":"tabpanel-".concat(n),"aria-labelledby":"tab-".concat(n),hidden:r!==n,id:"tabpanel-".concat(n),role:"tabpanel"},a),{},{children:r===n&&(0,Ro.jsx)(yo.Box,{paddingTop:3,paddingBottom:3,children:t})}))},ac=require("lattice-fabricate");var oc=xo()(ac.Form).withConfig({displayName:"styled__EdgelessForm",componentId:"sc-1ycpsik-0"})(["margin:-30px;"]),sc=xo().div.withConfig({displayName:"styled__ModalBody",componentId:"sc-1ycpsik-1"})(["max-width:100%;width:","px;"],(function(e){var t=e.width;return"number"==typeof t&&t>0?t:720}));const ic=function(e){var t=e.accessRequestId,r=Pr((0,vo.useState)(0),2),n=r[0],a=r[1];return(0,Ro.jsxs)(sc,{children:[(0,Ro.jsxs)(yo.Tabs,{indicatorColor:"primary",onChange:function(e,t){a(t)},textColor:"primary",value:n,children:[(0,Ro.jsx)(yo.Tab,{label:"Manage"}),(0,Ro.jsx)(yo.Tab,{label:"Upload"})]}),(0,Ro.jsx)(nc,{index:0,value:n,children:(0,Ro.jsx)(As,{accessRequestId:t})}),(0,Ro.jsx)(nc,{index:1,value:n,children:(0,Ro.jsx)(Li,{accessRequestId:t,onSuccess:function(){a(0)}})})]})};const cc=function(e){var t=e.accessRequestId,r=e.isVisible,n=e.onClose;return(0,Ro.jsx)(yo.Modal,{viewportScrolling:!0,textTitle:"Attachments",isVisible:r,onClose:n,withFooter:!1,children:(0,Ro.jsx)(ic,{accessRequestId:t})})};const uc=function(e){var t=e.accessRequestId,r=Pr((0,vo.useState)(!1),2),n=r[0],a=r[1];return(0,Ro.jsxs)(Ro.Fragment,{children:[(0,Ro.jsx)(yo.IconButton,{"aria-controls":n?"access-request-attachment-menu":void 0,"aria-expanded":n?"true":void 0,"aria-haspopup":"menu","aria-label":"access request attachment button",onClick:function(){a(!0)},children:(0,Ro.jsx)(Bo.FontAwesomeIcon,{fixedWidth:!0,icon:Ho.faPaperclip})}),(0,Ro.jsx)(cc,{accessRequestId:t,isVisible:n,onClose:function(){a(!1)}})]})},lc=require("lodash/merge");var fc=r.n(lc),pc=new p.Logger("SchemaUtils"),dc=function(e,t){var r=t.schema,n=t.uiSchema,a=e.schema,o=void 0===a?{}:a,s=e.uiSchema,i=void 0===s?{}:s;return{schema:fc()(o,r),uiSchema:fc()(i,n)}};const vc=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={schema:{},uiSchema:{}};return e.length!==t.length&&pc.warn("generateReviewSchema","schemas and uiSchemas have mismatching lengths"),Ct()(e).call(e,(function(r,a){dc(n,{schema:e[a],uiSchema:t[a]})})),r&&fc()(n.uiSchema,{"ui:disabled":!0,"ui:readonly":!0}),n};var hc=p.DataUtils.getEntityKeyId,yc=p.DataUtils.getPropertyValue,gc=ir.DATE_TIME,mc=ir.FILE_DATA,xc=ir.GROUP_ID,Sc=ir.NAME,Ec=ir.TYPE;const bc=function(e){return mr()(e).call(e,(function(e){var t=yc(e,[gc,0]);return{date:$n.DateTime.fromISO(t).toLocaleString($n.DateTime.DATETIME_SHORT),fieldId:yc(e,[xc,0]),href:yc(e,[mc,0]),id:hc(e),name:yc(e,[Sc,0]),type:yc(e,[Ec,0])}})).valueSeq().groupBy((function(e){return e.fieldId})).toJS()};function wc(e,t){var r=Sr()(e);if(Ni()){var n=Ni()(e);t&&(n=Bi()(n).call(n,(function(t){return Wi()(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r,n,a=null!=arguments[t]?arguments[t]:{};t%2?Ct()(r=wc(Object(a),!0)).call(r,(function(t){u(e,t,a[t])})):zi()?Ki()(e,zi()(a)):Ct()(n=wc(Object(a))).call(n,(function(t){Vi()(e,t,Wi()(a,t))}))}return e}var Ac=p.DataUtils.getPropertyValue,Tc=ir.FORM_DATA,Rc=ir.RJSF_JSON_SCHEMA,Dc=ir.RJSF_UI_SCHEMA,Cc=function(e){var t=e.accessRequestId,r=e.attachments,n=e.data,a=e.isSubmitting,o=e.fRef,s=Ao(),i=Ac(n,[Tc,0]),c=Ac(n,[Rc,0]),u=Ac(n,[Dc,0]);try{var l=JSON.parse(i),f=JSON.parse(c),p=JSON.parse(u),d=bc(r);if($t()(f)&&$t()(p)){var v=vc(f,p);f=v.schema,p=v.uiSchema}var h={attachments:d,formRef:o,onDrop:function(e,r,n){s(re({accessRequestId:t,file:e,formData:n,groupId:r}))},onDeleteAttachment:function(e,r){s(ae({accessRequestId:t,attachment:e,formData:r}))}};return(0,Ro.jsx)(oc,{ref:o,formData:l,formContext:h,isSubmitting:a,onSubmit:function(e){var r=e.formData;s(H({formData:r,entityKeyId:t}))},schema:f,uiSchema:p})}catch(e){return(0,Ro.jsx)("div",{children:"An error has occured. Please contact support."})}};const _c=(0,vo.forwardRef)((function(e,t){return(0,Ro.jsx)(Cc,Ic(Ic({},e),{},{fRef:t}))}));var jc=p.ReduxUtils.isPending,qc=p.ReduxUtils.isStandby,kc=xo().div.withConfig({displayName:"EditAccessRequestContainer__Row",componentId:"sc-182kjan-0"})(["display:flex;"]),Oc=xo()(yo.IconButton).withConfig({displayName:"EditAccessRequestContainer__PrintButton",componentId:"sc-182kjan-1"})(["margin-left:auto;"]);const Uc=function(){var e=Ao(),t=(0,vo.useRef)(),r=To(ur()),n=To(fr()),a=(0,Wo.useReactToPrint)({content:function(){return t.current}}),o=To((function(e){return e.getIn([h,W,T])})),s=To((function(e){return e.getIn([h,U,T])})),i=(0,Qo.useRouteMatch)().params.accessRequestId||"";(0,vo.useEffect)((function(){return e(P(i)),e(G(i)),function(){e(Ie([W])),e(Ie([U])),e(B()),e({type:Q})}}),[i,e]);var c=jc(o);return(0,Ro.jsxs)("div",{children:[(0,Ro.jsxs)(kc,{children:[(0,Ro.jsx)(Oc,{onClick:a,children:(0,Ro.jsx)(Bo.FontAwesomeIcon,{icon:Mo.faPrint,fixedWidth:!0})}),(0,Ro.jsx)(uc,{accessRequestId:i})]}),jc(s)||qc(s)?(0,Ro.jsx)(cs,{children:(0,Ro.jsx)(yo.Spinner,{size:"2x"})}):(0,Ro.jsx)(_c,{accessRequestId:i,attachments:n,data:r,isSubmitting:c,ref:t})]})};var Pc=p.ReduxUtils.isPending,Lc=p.DataUtils.getEntityKeyId,Fc=p.DataUtils.getPropertyValue,Nc=p.ValidationUtils.isValidUUID,Mc=ir.FORM_DATA,Bc=xo().div.withConfig({displayName:"CommonApplicationForm__ActionRow",componentId:"sc-1old4ll-0"})(["align-items:center;display:flex;justify-content:space-between;padding:32px 0;"]);const Qc=function(e){var t=e.schemas,r=e.uiSchemas,n=Ao(),a=To(ur()),o=To(fr()),s=To((function(e){return e.getIn([h,L,T])}));(0,vo.useEffect)((function(){return function(){n(Ie([L])),n(B())}}),[n]);var i,c=Pc(s),u=Lc(a)||"",l=Fc(a,[Mc,0])||"{}",f=bc(o);try{i=JSON.parse(l)}catch(e){return(0,Ro.jsx)("div",{children:"An error has occured. Please contact support."})}var p=function(e,t,r){n(re({accessRequestId:u,file:e,formData:r,groupId:t}))},d=function(e,t){n(ae({accessRequestId:u,attachment:e,formData:t}))};return(0,Ro.jsx)(ac.Paged,{onPageChange:function(e,a){Nc(u)?n(H({formData:a,entityKeyId:u})):n(F({formData:a,schema:t,uiSchema:r,type:"Common Application"}))},render:function(e){var a,o=e.formRef,s=e.onBack,u=e.onNext,l=e.page,v=e.validateAndSubmit,h=t.length,y=l===h-1,g=y?function(){n({route:"/",state:{},type:Va})}:v,m={attachments:f,formRef:o,onDrop:p,onDeleteAttachment:d};return(0,Ro.jsxs)(Ro.Fragment,{children:[(0,Ro.jsx)(oc,{formData:i,formContext:m,hideSubmit:!0,isSubmitting:c,onSubmit:u,ref:o,schema:t[l],uiSchema:r[l]}),(0,Ro.jsxs)(Bc,{children:[(0,Ro.jsx)(yo.Button,{disabled:!(l>0),onClick:s,children:"Back"}),(0,Ro.jsx)("span",{children:Ue()(a="".concat(l+1," of ")).call(a,h)}),(0,Ro.jsx)(yo.Button,{isLoading:c,mode:"primary",onClick:g,children:y?"Complete Survey":"Next"})]})]})}})};var Wc=p.DataUtils.getPropertyValue,Hc=ir.RJSF_JSON_SCHEMA,zc=ir.RJSF_UI_SCHEMA,Gc=p.ReduxUtils.isFailure,Kc=p.ReduxUtils.isPending,Jc=p.ReduxUtils.isStandby;const Vc=function(){var t=Ao(),r=To((function(e){return e.getIn([h,j,T])})),n=To((function(t){return t.getIn([h,_],(0,e.List)())}));if((0,vo.useEffect)((function(){return t(q()),function(){return t(Ie([j]))}}),[t]),Kc(r)||Jc(r))return(0,Ro.jsx)(cs,{children:(0,Ro.jsx)(yo.Spinner,{size:"2x"})});if(Gc(r))return(0,Ro.jsx)("div",{children:"An error has occurred in fetching the form template. Please contact support."});try{var a=n.first(),o=Wc(a,[Hc,0]),s=Wc(a,[zc,0]),i=JSON.parse(o),c=JSON.parse(s);return(0,Ro.jsx)(Qc,{schemas:i,uiSchemas:c})}catch(e){return(0,Ro.jsx)("div",{children:"An error has occured in parsing the form template. Please contact support."})}};var Yc=p.ReduxUtils.isPending,Xc=p.ReduxUtils.isStandby,$c=p.ValidationUtils.isValidUUID;const Zc=function(e){var t,r=e.match,n=e.organizationId,a=e.root,o=Ao();(0,vo.useEffect)((function(){$c(n)&&o(it({match:r,organizationId:n,root:a}))}),[o,n,a]);var s=To((function(e){return e.getIn([y,st,T])}));return Yc(s)||Xc(s)?(0,Ro.jsx)(cs,{children:(0,Ro.jsx)(yo.Spinner,{size:"2x"})}):(0,Ro.jsxs)(go.Switch,{children:[(0,Ro.jsx)(go.Route,{path:"".concat(a,"/new"),render:function(){return(0,Ro.jsx)(Vc,{})}}),(0,Ro.jsx)(go.Route,{path:Ue()(t="".concat(a)).call(t,Ja),render:function(){return(0,Ro.jsx)(Uc,{})}}),(0,Ro.jsx)(go.Route,{render:function(){return(0,Ro.jsx)(No,{})}})]})};function eu(e){var t=e.children;return(0,Ro.jsx)(bo.Provider,{context:Io,store:wo,children:(0,Ro.jsx)(s.ConnectedRouter,{history:uo,context:Io,children:t})})}const tu=function(e){var t=e.match,r=e.organizationId,n=e.root;return(0,Ro.jsx)(eu,{children:(0,Ro.jsx)(Zc,{match:t,organizationId:r,root:n})})}})(),n})()}));