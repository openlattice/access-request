/*!
 * 
 * @openlattice/access-request - v0.4.0
 * OpenLattice module for access request workflows
 * https://github.com/openlattice/access-request
 *
 * Copyright (c) 2017-2021, OpenLattice, Inc. All rights reserved.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openlatticeAccessRequest=t():e.openlatticeAccessRequest=t()}(self,(function(){return(()=>{var e={6419:(e,t,r)=>{e.exports=r(9330)},1511:(e,t,r)=>{e.exports=r(9718)},7766:(e,t,r)=>{e.exports=r(7010)},62:(e,t,r)=>{e.exports=r(973)},116:(e,t,r)=>{e.exports=r(1672)},8914:(e,t,r)=>{e.exports=r(2142)},8580:(e,t,r)=>{e.exports=r(5001)},1643:(e,t,r)=>{e.exports=r(3769)},2991:(e,t,r)=>{e.exports=r(3919)},2366:(e,t,r)=>{e.exports=r(9871)},3649:(e,t,r)=>{e.exports=r(8646)},2762:(e,t,r)=>{e.exports=r(9874)},9828:(e,t,r)=>{e.exports=r(6214)},9340:(e,t,r)=>{e.exports=r(4098)},368:(e,t,r)=>{e.exports=r(7833)},3978:(e,t,r)=>{e.exports=r(2598)},6295:(e,t,r)=>{e.exports=r(1135)},4074:(e,t,r)=>{e.exports=r(9091)},9649:(e,t,r)=>{e.exports=r(9389)},4310:(e,t,r)=>{e.exports=r(3143)},6902:(e,t,r)=>{e.exports=r(6986)},455:(e,t,r)=>{e.exports=r(9027)},1068:(e,t,r)=>{e.exports=r(4471)},3592:(e,t,r)=>{e.exports=r(9387)},8363:(e,t,r)=>{e.exports=r(1801)},6976:(e,t,r)=>{e.exports=r(659)},5683:(e,t,r)=>{e.exports=r(4502)},5238:(e,t,r)=>{e.exports=r(3085)},8317:(e,t,r)=>{e.exports=r(1021)},189:(e,t,r)=>{e.exports=r(8639)},4341:(e,t,r)=>{e.exports=r(9219)},3263:(e,t,r)=>{e.exports=r(3800)},4889:(e,t,r)=>{e.exports=r(5347)},9356:(e,t,r)=>{e.exports=r(4785)},9542:(e,t,r)=>{e.exports=r(9402)},1446:(e,t,r)=>{e.exports=r(8564)},3882:(e,t,r)=>{e.exports=r(1882)},3109:(e,t,r)=>{e.exports=r(6512)},7116:function(e,t,r){var n,o;"undefined"!=typeof self&&self,e.exports=(n=r(9297),o=r(2268),function(){"use strict";var e={629:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.useReactToPrint=t.PrintContextConsumer=void 0;var n=r(655),o=r(297),a=r(268),i=Object.prototype.hasOwnProperty.call(o,"createContext"),s=Object.prototype.hasOwnProperty.call(o,"useMemo")&&Object.prototype.hasOwnProperty.call(o,"useCallback"),c=i?o.createContext({}):null;t.PrintContextConsumer=c?c.Consumer:function(){return null};var u={copyStyles:!0,pageStyle:"@page { size: auto;  margin: 0mm; } @media print { body { -webkit-print-color-adjust: exact; } }",removeAfterPrint:!1,suppressErrors:!1},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPrint=function(e){var r=t.props,n=r.onAfterPrint,o=r.onPrintError,a=r.print,i=r.suppressErrors,s=r.documentTitle;setTimeout((function(){if(e.contentWindow){if(e.contentWindow.focus(),a)a(e).then(t.handleRemoveIframe).catch((function(e){o?o("print",e):i||console.error("An error was thrown by the specified `print` function",e)}));else if(e.contentWindow.print){var r=document.title;s&&(document.title=s),e.contentWindow.print(),s&&(document.title=r),n&&n()}else i||console.error("Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes.");t.handleRemoveIframe()}else i||console.error("Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/")}),500)},t.triggerPrint=function(e){var r=t.props,n=r.onBeforePrint,o=r.onPrintError;if(n){var a=n();a&&"function"==typeof a.then?a.then((function(){t.startPrint(e)})).catch((function(e){o&&o("onBeforePrint",e)})):t.startPrint(e)}else t.startPrint(e)},t.handleClick=function(){var e=t.props,r=e.onBeforeGetContent,n=e.onPrintError;if(r){var o=r();o&&"function"==typeof o.then?o.then(t.handlePrint).catch((function(e){n&&n("onBeforeGetContent",e)})):t.handlePrint()}else t.handlePrint()},t.handlePrint=function(){var e=t.props,r=e.bodyClass,o=e.content,i=e.copyStyles,s=e.fonts,c=e.pageStyle,u=e.suppressErrors,l=o();if(void 0!==l)if(null!==l){var f=document.createElement("iframe");f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.id="printWindow",f.title="Print Window";var p=a.findDOMNode(l);if(p){var d=p instanceof Text,v=document.querySelectorAll("link[rel='stylesheet']"),y=d?[]:p.querySelectorAll("img");t.linkTotal=v.length+y.length,t.linksLoaded=[],t.linksErrored=[],t.fontsLoaded=[],t.fontsErrored=[];var h=function(e,r){r?t.linksLoaded.push(e):(u||console.error('"react-to-print" was unable to load a linked node. It may be invalid. "react-to-print" will continue attempting to print the page. The linked node that errored was:',e),t.linksErrored.push(e)),t.linksLoaded.length+t.linksErrored.length+t.fontsLoaded.length+t.fontsErrored.length===t.linkTotal&&t.triggerPrint(f)};f.onload=function(){var e,o,a,l;f.onload=null;var v=f.contentDocument||(null===(o=f.contentWindow)||void 0===o?void 0:o.document);if(v){v.body.appendChild(p.cloneNode(!0)),s&&((null===(a=f.contentDocument)||void 0===a?void 0:a.fonts)&&(null===(l=f.contentWindow)||void 0===l?void 0:l.FontFace)?s.forEach((function(e){var r=new FontFace(e.family,e.source);f.contentDocument.fonts.add(r),r.loaded.then((function(e){t.fontsLoaded.push(e)})).catch((function(e){t.fontsErrored.push(r),u||console.error('"react-to-print" was unable to load a font. "react-to-print" will continue attempting to print the page. The font that failed to load is:',r,"The error from loading the font is:",e)}))})):u||console.error('"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API'));var m="function"==typeof c?c():c;if("string"!=typeof m)u||console.error('"react-to-print" expected a "string" from `pageStyle` but received "'+typeof m+'". Styles from `pageStyle` will not be applied.');else{var g=v.createElement("style");g.appendChild(v.createTextNode(m)),v.head.appendChild(g)}if(r&&(e=v.body.classList).add.apply(e,n.__spread(r.split(" "))),!d){for(var S=v.querySelectorAll("canvas"),x=p.querySelectorAll("canvas"),E=0,b=S.length;E<b;++E){var I=(L=S[E]).getContext("2d");I&&I.drawImage(x[E],0,0)}for(E=0;E<y.length;E++){var A=y[E],w=A.getAttribute("src");if(w){var R=new Image;R.onload=h.bind(null,A,!0),R.onerror=h.bind(null,A,!1),R.src=w}else u||console.warn('"react-to-print" encountered an <img> tag with an empty "src" attribute. It will not attempt to pre-load it. The <img> is:',A)}var T="input",D=p.querySelectorAll(T),C=v.querySelectorAll(T);for(E=0;E<D.length;E++)C[E].value=D[E].value;var j="input[type=checkbox],input[type=radio]",_=p.querySelectorAll(j),q=v.querySelectorAll(j);for(E=0;E<_.length;E++)q[E].checked=_[E].checked;var k="select",O=p.querySelectorAll(k),U=v.querySelectorAll(k);for(E=0;E<O.length;E++)U[E].value=O[E].value}if(i)for(var P=document.querySelectorAll("style, link[rel='stylesheet']"),F=(E=0,P.length);E<F;++E){var L;if("STYLE"===(L=P[E]).tagName){var N=v.createElement(L.tagName),M=L.sheet;if(M){for(var B="",Q=0,z=M.cssRules.length;Q<z;++Q)"string"==typeof M.cssRules[Q].cssText&&(B+=M.cssRules[Q].cssText+"\r\n");N.setAttribute("id","react-to-print-"+E),N.appendChild(v.createTextNode(B)),v.head.appendChild(N)}}else if(L.getAttribute("href")){N=v.createElement(L.tagName),Q=0;for(var W=L.attributes.length;Q<W;++Q){var H=L.attributes[Q];H&&N.setAttribute(H.nodeName,H.nodeValue||"")}N.onload=h.bind(null,N,!0),N.onerror=h.bind(null,N,!1),v.head.appendChild(N)}else u||console.warn('"react-to-print" encountered a <link> tag with an empty "href" attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:',L),h(L,!0)}}0!==t.linkTotal&&i||t.triggerPrint(f)},t.handleRemoveIframe(!0),document.body.appendChild(f)}else u||console.error('"react-to-print" could not locate the DOM node corresponding with the `content` prop')}else u||console.error('There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.');else u||console.error('For "react-to-print" to work only Class based components can be printed.')},t.handleRemoveIframe=function(e){var r=t.props.removeAfterPrint;if(e||r){var n=document.getElementById("printWindow");n&&document.body.removeChild(n)}},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.children,r=e.suppressErrors,n=e.trigger;if(n)return o.cloneElement(n(),{onClick:this.handleClick});if(!c)return r||console.error('"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"'),null;var a={handlePrint:this.handleClick};return o.createElement(c.Provider,{value:a},t)},t.defaultProps=u,t}(o.Component);t.default=l,t.useReactToPrint=s?function(e){var t=o.useMemo((function(){return new l(n.__assign(n.__assign({},u),e))}),[e]);return o.useCallback((function(){return t.handleClick()}),[t])}:function(e){e.suppressErrors||console.warn('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')}},655:function(e,t,r){r.r(t),r.d(t,{__extends:function(){return o},__assign:function(){return a},__rest:function(){return i},__decorate:function(){return s},__param:function(){return c},__metadata:function(){return u},__awaiter:function(){return l},__generator:function(){return f},__exportStar:function(){return p},__values:function(){return d},__read:function(){return v},__spread:function(){return y},__spreadArrays:function(){return h},__await:function(){return m},__asyncGenerator:function(){return g},__asyncDelegator:function(){return S},__asyncValues:function(){return x},__makeTemplateObject:function(){return E},__importStar:function(){return b},__importDefault:function(){return I},__classPrivateFieldGet:function(){return A},__classPrivateFieldSet:function(){return w}});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function s(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function h(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)n[o]=a[i];return n}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function g(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=o[e](t)).value instanceof m?Promise.resolve(r.value.v).then(c,u):l(a[0][2],r)}catch(e){l(a[0][3],e)}var r}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function S(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=d(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function w(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},297:function(e){e.exports=n},268:function(e){e.exports=o}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(629)}())},9387:e=>{"use strict";e.exports=require("core-js-pure/features/array/from")},1801:e=>{"use strict";e.exports=require("core-js-pure/features/array/is-array")},659:e=>{"use strict";e.exports=require("core-js-pure/features/get-iterator")},4502:e=>{"use strict";e.exports=require("core-js-pure/features/instance/index-of")},3085:e=>{"use strict";e.exports=require("core-js-pure/features/instance/slice")},1021:e=>{"use strict";e.exports=require("core-js-pure/features/is-iterable")},8639:e=>{"use strict";e.exports=require("core-js-pure/features/object/create")},9219:e=>{"use strict";e.exports=require("core-js-pure/features/object/define-property")},3800:e=>{"use strict";e.exports=require("core-js-pure/features/object/get-own-property-symbols")},5347:e=>{"use strict";e.exports=require("core-js-pure/features/object/get-prototype-of")},4785:e=>{"use strict";e.exports=require("core-js-pure/features/object/keys")},9402:e=>{"use strict";e.exports=require("core-js-pure/features/object/set-prototype-of")},8564:e=>{"use strict";e.exports=require("core-js-pure/features/symbol")},1882:e=>{"use strict";e.exports=require("core-js-pure/features/symbol/iterator")},9330:e=>{"use strict";e.exports=require("core-js-pure/stable/array/from")},9718:e=>{"use strict";e.exports=require("core-js-pure/stable/array/is-array")},7010:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/concat")},973:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/every")},1672:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/filter")},2142:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/for-each")},5001:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/includes")},3769:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/index-of")},3919:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/map")},9871:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/reduce")},8646:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/slice")},9874:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/splice")},6214:e=>{"use strict";e.exports=require("core-js-pure/stable/instance/starts-with")},4098:e=>{"use strict";e.exports=require("core-js-pure/stable/json/stringify")},7833:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-properties")},2598:e=>{"use strict";e.exports=require("core-js-pure/stable/object/define-property")},1135:e=>{"use strict";e.exports=require("core-js-pure/stable/object/entries")},9091:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptor")},9389:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-descriptors")},3143:e=>{"use strict";e.exports=require("core-js-pure/stable/object/get-own-property-symbols")},6986:e=>{"use strict";e.exports=require("core-js-pure/stable/object/keys")},9027:e=>{"use strict";e.exports=require("core-js-pure/stable/object/values")},4471:e=>{"use strict";e.exports=require("core-js-pure/stable/reflect/construct")},9297:e=>{"use strict";e.exports=require("react")},2268:e=>{"use strict";e.exports=require("react-dom")},6512:e=>{"use strict";e.exports=require("regenerator-runtime")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AccessRequestContainer:()=>tc,initializeAccessRequestStore:()=>No});const e=require("immutable");var t=r.n(e);const o=require("@redux-saga/core");var a=r.n(o);const i=require("connected-react-router/immutable"),s=require("redux");var c=r(4341);function u(e,t,r){return t in e?c(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=require("lattice-auth"),f=require("redux-immutable"),p=require("lattice-utils"),d=require("redux-reqseq");var v,y="access",h=p.ReduxConstants.APP,m=p.ReduxConstants.AUTH,g=p.ReduxConstants.EDM,S=p.ReduxConstants.ENTITY_SETS,x=p.ReduxConstants.ENTITY_SETS_INDEX_MAP,E=p.ReduxConstants.ENTITY_TYPES,b=p.ReduxConstants.ENTITY_TYPES_INDEX_MAP,I=p.ReduxConstants.ERROR,A=p.ReduxConstants.PROPERTY_TYPES,w=p.ReduxConstants.PROPERTY_TYPES_INDEX_MAP,R=p.ReduxConstants.REQUEST_STATE,T=(u(v={},I,!1),u(v,R,d.RequestStates.STANDBY),v),D=r(116),C=r.n(D),j=r(8580),_=r.n(j),q="accessRequest",k="attachments",O="forms",U="GET_FORMS",P=(0,d.newRequestSequence)(U),F="GET_ALL_ACCESS_REQUESTS",L=(0,d.newRequestSequence)(F),N="GET_ACCESS_REQUEST",M=(0,d.newRequestSequence)(N),B="SUBMIT_ACCESS_REQUEST",Q=(0,d.newRequestSequence)(B),z="SELECT_ACCESS_REQUEST",W="CLEAR_ACCESS_REQUEST",H=function(){return{type:W}},G="UPDATE_ACCESS_REQUEST",J=(0,d.newRequestSequence)(G),Y="GET_ATTACHMENTS",K=(0,d.newRequestSequence)(Y),V="UPLOAD_ATTACHMENTS",X=(0,d.newRequestSequence)(V),$="DELETE_ATTACHMENTS",Z=(0,d.newRequestSequence)($),ee="SAVE_NEW_FORM_TEMPLATE",te=(0,d.newRequestSequence)(ee),re=p.ReduxConstants.REQUEST_STATE,ne=p.DataUtils.getEntityKeyId;function oe(e,t){return Z.reducer(e,t,{REQUEST:function(){return e.setIn([$,re],d.RequestStates.PENDING)},SUCCESS:function(){var r,n=t.value,o=C()(r=e.get(k)).call(r,(function(e){var t=ne(e);return!_()(n).call(n,t)}));return e.set(k,o).setIn([$,re],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([$,re],d.RequestStates.FAILURE)}})}var ae=p.ReduxConstants.REQUEST_STATE;function ie(e,t){return M.reducer(e,t,{REQUEST:function(){return e.setIn([N,ae],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([N,ae],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([N,ae],d.RequestStates.FAILURE)}})}var se=p.ReduxConstants.REQUEST_STATE;function ce(e,t){return L.reducer(e,t,{REQUEST:function(){return e.setIn([F,se],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([F,se],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([F,se],d.RequestStates.FAILURE)}})}var ue=p.ReduxConstants.REQUEST_STATE;function le(e,t){return K.reducer(e,t,{REQUEST:function(){return e.setIn([Y,ue],d.RequestStates.PENDING)},SUCCESS:function(){var r=t.value.data;return e.set(k,r).setIn([Y,ue],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([Y,ue],d.RequestStates.FAILURE)}})}var fe=p.ReduxConstants.REQUEST_STATE;function pe(e,t){return P.reducer(e,t,{REQUEST:function(){return e.setIn([U,fe],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([U,fe],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([U,fe],d.RequestStates.FAILURE)}})}var de=p.ReduxConstants.REQUEST_STATE;function ve(e,t){return Q.reducer(e,t,{REQUEST:function(){return e.setIn([B,de],d.RequestStates.PENDING)},SUCCESS:function(){return e.set(q,t.value).setIn([B,de],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([B,de],d.RequestStates.FAILURE)}})}var ye=p.ReduxConstants.REQUEST_STATE;function he(e,t){return J.reducer(e,t,{REQUEST:function(){var r=t.value,n=r.path,o=r.formData;return e.setIn(n,o).setIn([G,ye],d.RequestStates.PENDING)},SUCCESS:function(){return e.setIn([G,ye],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([G,ye],d.RequestStates.FAILURE)}})}var me=p.ReduxConstants.REQUEST_STATE;function ge(e,t){return X.reducer(e,t,{REQUEST:function(){return e.setIn([V,me],d.RequestStates.PENDING)},SUCCESS:function(){return e.setIn([V,me],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([V,me],d.RequestStates.FAILURE)}})}var Se="RESET_REQUEST_STATE",xe=function(e){return{path:e,type:Se}},Ee=r(8363);function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ie=r(1446),Ae=r(8317),we=r(3592);var Re=r(5238);function Te(e,t){var r;if(e){if("string"==typeof e)return be(e,t);var n=Re(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?we(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}function De(e){return function(e){if(Ee(e))return be(e)}(e)||function(e){if(void 0!==Ie&&Ae(Object(e)))return we(e)}(e)||Te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ce,je=r(7766),_e=r.n(je);function qe(e,t){var r,n,o=t.path;return o&&e.hasIn(o)?e.setIn(_e()(r=[]).call(r,De(o),[I]),!1).setIn(_e()(n=[]).call(n,De(o),[R]),d.RequestStates.STANDBY):e}var ke=p.ReduxConstants.HITS,Oe=(0,e.fromJS)((u(Ce={},q,(0,e.Map)()),u(Ce,k,(0,e.List)()),u(Ce,O,(0,e.List)()),u(Ce,F,T),u(Ce,Y,T),u(Ce,U,T),u(Ce,ke,(0,e.List)()),u(Ce,B,T),u(Ce,G,T),u(Ce,V,T),Ce));function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return qe(e,t);case z:return e.set(q,t.value);case W:return e.set(q,Oe.get(q));case P.case(t.type):return pe(e,t);case M.case(t.type):return ie(e,t);case L.case(t.type):return ce(e,t);case Q.case(t.type):return ve(e,t);case J.case(t.type):return he(e,t);case K.case(t.type):return le(e,t);case X.case(t.type):return ge(e,t);case Z.case(t.type):return oe(e,t);default:return e}}var Pe=r(3109),Fe=r.n(Pe),Le=r(2366),Ne=r.n(Le);const Me=require("@redux-saga/core/effects"),Be=require("lattice-sagas");var Qe="GET_EDM_TYPES",ze=(0,d.newRequestSequence)(Qe),We=Fe().mark($e),He=Fe().mark(Ze),Ge=new p.Logger("EDMSagas"),Je=p.LangUtils.isDefined,Ye=Be.EntityDataModelApiActions.getAllEntityTypes,Ke=Be.EntityDataModelApiActions.getAllPropertyTypes,Ve=Be.EntityDataModelApiSagas.getAllEntityTypesWorker,Xe=Be.EntityDataModelApiSagas.getAllPropertyTypesWorker;function $e(e){var t,r,n,o;return Fe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,Me.put)(ze.request(e.id));case 3:return a.next=5,(0,Me.all)([(0,Me.call)(Ve,Ye()),(0,Me.call)(Xe,Ke())]);case 5:if(n=a.sent,!(o=Ne()(n).call(n,(function(e,t){return Je(e)?e:t.error}),void 0))){a.next=9;break}throw o;case 9:return t={data:(r={},u(r,E,n[0].data),u(r,A,n[1].data),r)},a.next=12,(0,Me.put)(ze.success(e.id,t.data));case 12:a.next=20;break;case 14:return a.prev=14,a.t0=a.catch(0),t={error:a.t0},Ge.error(e.type,a.t0),a.next=20,(0,Me.put)(ze.failure(e.id,a.t0));case 20:return a.prev=20,a.next=23,(0,Me.put)(ze.finally(e.id));case 23:return a.finish(20);case 24:return a.abrupt("return",t);case 25:case"end":return a.stop()}}),We,null,[[0,14,20,24]])}function Ze(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(Qe,$e);case 2:case"end":return e.stop()}}),He)}var et=Error("invalid parameter: action.value is required and must be defined"),tt=Error("invalid parameter: action.value is the incorrect type"),rt=(Error('invalid route: a route must be a non-empty string that starts with "/"'),Error("invalid uuid"),Error("unexpected state"),Error("caught exception in worker saga"),"INITIALIZE_APPLICATION"),nt=(0,d.newRequestSequence)(rt),ot="SET_ROOT",at=Fe().mark(vt),it=Fe().mark(yt),st=Be.AppApiActions.getApp,ct=Be.AppApiActions.getAppConfigs,ut=Be.AppApiSagas.getAppWorker,lt=Be.AppApiSagas.getAppConfigsWorker,ft=p.ValidationUtils.isValidUUID,pt=p.LangUtils.isDefined,dt=new p.Logger("AppSagas");function vt(e){var t,r,n,o,a,i,s,c,u,l;return Fe().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(t={},f.prev=1,n=e.value,o=n.match,a=n.organizationId,i=n.root,ft(a)){f.next=5;break}throw tt;case 5:if("string"==typeof i){f.next=7;break}throw tt;case 7:if(pt(o)){f.next=9;break}throw tt;case 9:return f.next=11,(0,Me.put)(nt.request(e.id));case 11:return f.next=13,(0,Me.all)([(0,Me.call)($e,ze()),(0,Me.call)(ut,st("access_requests"))]);case 13:if(!(s=f.sent)[0].error){f.next=16;break}throw s[0].error;case 16:if(!s[1].error){f.next=18;break}throw s[1].error;case 18:return c=s[1].data,f.next=21,(0,Me.call)(lt,ct(c.id));case 21:if(!(u=f.sent).error){f.next=24;break}throw u.error;case 24:return l=Ne()(r=u.data).call(r,(function(e,t){var r=e;return t.organization.id===a&&(r=t),r}),{}),t.data={appConfig:l,root:i,match:o},f.next=28,(0,Me.put)(nt.success(e.id,t.data));case 28:f.next=35;break;case 30:return f.prev=30,f.t0=f.catch(1),dt.error(e.type,f.t0),f.next=35,(0,Me.put)(nt.failure(e.id,f.t0));case 35:return f.prev=35,f.next=38,(0,Me.put)(nt.finally(e.id));case 38:return f.finish(35);case 39:case"end":return f.stop()}}),at,null,[[1,30,35,39]])}function yt(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(rt,vt);case 2:case"end":return e.stop()}}),it)}var ht,mt=p.ReduxConstants.REQUEST_STATE;function gt(e,t){switch(t.type){case ot:var r=t.value;return e.set("root",r);case nt.case(t.type):var n=t;return nt.reducer(e,n,{REQUEST:function(){return e.setIn([rt,mt],d.RequestStates.PENDING)},SUCCESS:function(){return e.merge(t.value).setIn([rt,mt],d.RequestStates.SUCCESS)},FAILURE:function(){return e.setIn([rt,mt],d.RequestStates.FAILURE)}});default:return e}}var St=(0,e.fromJS)((u(ht={},rt,T),u(ht,"appConfig",{}),u(ht,"root","/"),u(ht,"match",{}),ht)),xt=["app","appConfig","config"],Et=["app","root"],bt=["app","match"];function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return qe(e,t);case nt.case(t.type):return gt(e,t);default:return e}}var At=r(8914),wt=r.n(At);const Rt=require("lattice");var Tt=Rt.Models.EntityTypeBuilder,Dt=Rt.Models.PropertyTypeBuilder;function Ct(t,r){return ze.reducer(t,r,{REQUEST:function(){return t.setIn([Qe,R],d.RequestStates.PENDING).setIn([Qe,r.id],r)},SUCCESS:function(){var n=r.value.entityTypes,o=(0,e.List)().asMutable(),a=(0,e.Map)().asMutable();wt()(n).call(n,(function(e,t){var r=new Tt(e).build();o.push(r),a.set(r.id,t),a.set(r.type,t)}));var i=r.value.propertyTypes,s=(0,e.List)().asMutable(),c=(0,e.Map)().asMutable();return wt()(i).call(i,(function(e,t){var r=new Dt(e).build();s.push(r),c.set(r.id,t),c.set(r.type,t)})),t.set(E,o.asImmutable()).set(b,a.asImmutable()).set(A,s.asImmutable()).set(w,c.asImmutable()).setIn([Qe,R],d.RequestStates.SUCCESS)},FAILURE:function(){return t.set(E,(0,e.List)()).set(b,(0,e.Map)()).set(A,(0,e.List)()).set(w,(0,e.Map)()).setIn([Qe,R],d.RequestStates.FAILURE)},FINALLY:function(){return t.deleteIn([Qe,r.id])}})}var jt=Rt.Models.EntitySetBuilder,_t=Be.EntitySetsApiActions.GET_ENTITY_SET,qt=Be.EntitySetsApiActions.getEntitySet;function kt(e,t){return qt.reducer(e,t,{REQUEST:function(){return e.setIn([_t,R],d.RequestStates.PENDING).setIn([_t,t.id],t)},SUCCESS:function(){if(e.hasIn([_t,t.id])){var r=new jt(t.value).build(),n=e.get(S),o=e.get(x);if(o.has(r.id))n=n.update(o.get(r.id),(function(){return r}));else{var a=(n=n.push(r)).count()-1;o=o.set(r.id,a).set(r.name,a)}return e.set(S,n).set(x,o).setIn([_t,R],d.RequestStates.SUCCESS)}return e},FAILURE:function(){return e.hasIn([_t,t.id])?e.setIn([_t,R],d.RequestStates.FAILURE):e},FINALLY:function(){return e.deleteIn([_t,t.id])}})}var Ot,Ut=r(455),Pt=r.n(Ut),Ft=Rt.Models.EntitySetBuilder,Lt=Be.EntitySetsApiActions.GET_ENTITY_SETS,Nt=Be.EntitySetsApiActions.getEntitySets;function Mt(e,t){return Nt.reducer(e,t,{REQUEST:function(){return e.setIn([Lt,R],d.RequestStates.PENDING).setIn([Lt,t.id],t)},SUCCESS:function(){if(e.hasIn([Lt,t.id])){var r,n=e.get(S),o=e.get(x);return wt()(r=Pt()(t.value)).call(r,(function(e){var t=new Ft(e).build();if(o.has(t.id))n=n.update(o.get(t.id),(function(){return t}));else{var r=(n=n.push(t)).count()-1;o=o.set(t.id,r).set(t.name,r)}})),e.set(S,n).set(x,o).setIn([Lt,R],d.RequestStates.SUCCESS)}return e},FAILURE:function(){return e.hasIn([Lt,t.id])?e.setIn([Lt,R],d.RequestStates.FAILURE):e},FINALLY:function(){return e.deleteIn([Lt,t.id])}})}var Bt=Be.EntitySetsApiActions.GET_ENTITY_SET,Qt=Be.EntitySetsApiActions.GET_ENTITY_SETS,zt=Be.EntitySetsApiActions.getEntitySet,Wt=Be.EntitySetsApiActions.getEntitySets,Ht=(0,e.fromJS)((u(Ot={},Qe,T),u(Ot,Qt,T),u(Ot,Bt,T),u(Ot,S,(0,e.List)()),u(Ot,x,(0,e.Map)()),u(Ot,E,(0,e.List)()),u(Ot,b,(0,e.Map)()),u(Ot,A,(0,e.List)()),u(Ot,w,(0,e.Map)()),Ot));function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return qe(e,t);case ze.case(t.type):return Ct(e,t);case zt.case(t.type):return kt(e,t);case Wt.case(t.type):return Mt(e,t);default:return e}}var Jt=r(1511),Yt=r.n(Jt),Kt=r(62),Vt=r.n(Kt);function Xt(t,r){return(0,e.getIn)(t,[r,"entitySetId"])}var $t="DELETE_BULK_ENTITIES",Zt=(0,d.newRequestSequence)($t),er=Rt.Models.FQN;const tr={ACCESS_REQUEST_SUBMISSION:er.of("app.accessrequestsubmission"),ATTACHED_TO:er.of("app.attachedto"),FILE:er.of("app.file"),FORM:er.of("app.form")};var rr=Rt.Models.FQN;const nr={DATE_TIME:rr.of("ol.datetime"),DESCRIPTION:rr.of("ol.description"),FILE_DATA:rr.of("ol.filedata"),FORM_DATA:rr.of("ol.formdata"),ID:rr.of("ol.id"),LABEL:rr.of("ol.label"),NAME:rr.of("ol.name"),REQUEST_DATE_TIME:rr.of("ol.requestdatetime"),RJSF_JSON_SCHEMA:rr.of("ol.rjsfjsonschema"),RJSF_UI_SCHEMA:rr.of("ol.rjsfuischema"),TYPE:rr.of("ol.type")};var or=p.ReduxConstants.HITS;function ar(){return function(t){return t.getIn([y,q],(0,e.List)())}}function ir(){return function(e){return e.getIn(xt,{})}}const sr=require("lodash/isArray");var cr=r.n(sr),ur=Rt.Models.FQN,lr=(0,e.Map)();function fr(t){return function(r){if(!cr()(t)&&!(0,e.isCollection)(t))return lr;var n=(0,e.Map)().withMutations((function(n){wt()(t).call(t,(function(t){if(ur.isValid(t)){var o=(0,e.getIn)(r,[g,w,t],-1);if(o>=0){var a=(0,e.getIn)(r,[g,A,o]);a&&a.id&&n.set(t,a.id)}}}))}));return n.isEmpty()?lr:n}}p.ReduxUtils.selectEntitySets,p.ReduxUtils.selectEntityTypes,p.ReduxUtils.selectOrganization,p.ReduxUtils.selectPropertyTypes;var pr=r(2991),dr=r.n(pr),vr=r(6902),yr=r.n(vr),hr=r(6419),mr=r.n(hr),gr=Fe().mark(Ir),Sr=new p.Logger("DataSagas"),xr=Rt.Types.DeleteTypes,Er=Be.DataApiActions.deleteEntityData,br=Be.DataApiSagas.deleteEntityDataWorker;function Ir(e){var t,r,n,o,a,i;return Fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t={},s.prev=1,null!=(n=e.value)){s.next=5;break}throw et;case 5:return s.next=7,(0,Me.put)(Zt.request(e.id));case 7:return o=dr()(r=yr()(n)).call(r,(function(e){var t=mr()(n[e]);return(0,Me.call)(br,Er({entitySetId:e,entityKeyIds:t,deleteType:xr.SOFT}))})),s.next=10,(0,Me.all)(o);case 10:if(a=s.sent,!(i=Ne()(a).call(a,(function(e,t){return e.error=e.error||t.error,e}),{})).error){s.next=14;break}throw i;case 14:return s.next=16,(0,Me.put)(Zt.success(e.id));case 16:s.next=24;break;case 18:return s.prev=18,s.t0=s.catch(1),Sr.error(e.type,s.t0),t.error=s.t0,s.next=24,(0,Me.put)(Zt.failure(e.id,s.t0));case 24:return s.prev=24,s.next=27,(0,Me.put)(Zt.finally(e.id));case 27:return s.finish(24);case 28:return s.abrupt("return",t);case 29:case"end":return s.stop()}}),gr,null,[[1,18,24,28]])}var Ar=Fe().mark(Cr),wr=Fe().mark(jr),Rr=p.ValidationUtils.isValidUUID,Tr=tr.FILE,Dr=new p.Logger("AccessSagas");function Cr(e){var t,r,n,o,a,i;return Fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t={},s.prev=1,r=e.value,!Yt()(r)||Vt()(r).call(r,Rr)){s.next=5;break}throw tt;case 5:return s.next=7,(0,Me.put)(Z.request(e.id));case 7:return s.next=9,(0,Me.select)(ir());case 9:return n=s.sent,o=Xt(n,Tr),a=u({},o,r),s.next=14,(0,Me.call)(Ir,Zt(a));case 14:if(!(i=s.sent).error){s.next=17;break}throw i.error;case 17:return t={data:a},s.next=20,(0,Me.put)(Z.success(e.id,r));case 20:s.next=28;break;case 22:return s.prev=22,s.t0=s.catch(1),Dr.error(e.type,s.t0),t={error:s.t0},s.next=28,(0,Me.put)(Z.failure(e.id,s.t0));case 28:return s.prev=28,s.next=31,(0,Me.put)(Z.finally(e.id));case 31:return s.finish(28);case 32:return s.abrupt("return",t);case 33:case"end":return s.stop()}}),Ar,null,[[1,22,28,32]])}function jr(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)($,Cr);case 2:case"end":return e.stop()}}),wr)}var _r=Fe().mark(Lr),qr=Fe().mark(Nr),kr=p.ValidationUtils.isValidUUID,Or=Be.DataApiActions.getEntityData,Ur=Be.DataApiSagas.getEntityDataWorker,Pr=tr.ACCESS_REQUEST_SUBMISSION,Fr=new p.Logger("getAccessRequestSagas");function Lr(t){var r,n,o,a,i;return Fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,n=t.value,kr(n)){s.next=4;break}throw tt;case 4:return s.next=6,(0,Me.put)(M.request(t.id));case 6:return s.next=8,(0,Me.select)(ir());case 8:return o=s.sent,a=Xt(o,Pr),s.next=12,(0,Me.call)(Ur,Or({entitySetId:a,entityKeyId:n}));case 12:if(!(i=s.sent).error){s.next=15;break}throw i.error;case 15:return r={data:(0,e.fromJS)(i.data)},s.next=18,(0,Me.put)(M.success(t.id,u({},q,r.data)));case 18:s.next=26;break;case 20:return s.prev=20,s.t0=s.catch(0),r={error:s.t0},Fr.error(t.type,s.t0),s.next=26,(0,Me.put)(M.failure(t.id,s.t0));case 26:return s.prev=26,s.next=29,(0,Me.put)(M.finally(t.id));case 29:return s.finish(26);case 30:return s.abrupt("return",r);case 31:case"end":return s.stop()}}),_r,null,[[0,20,26,30]])}function Nr(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(N,Lr);case 2:case"end":return e.stop()}}),qr)}var Mr=Fe().mark(Jr),Br=Fe().mark(Yr),Qr=Be.SearchApiActions.searchEntitySetData,zr=Be.SearchApiSagas.searchEntitySetDataWorker,Wr=tr.ACCESS_REQUEST_SUBMISSION,Hr=nr.REQUEST_DATE_TIME,Gr=new p.Logger("getAllAccessRequestsSagas");function Jr(t){var r,n,o,a,i,s;return Fe().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,Me.put)(L.request(t.id));case 3:return c.next=5,(0,Me.select)(ir());case 5:return n=c.sent,o=Xt(n,Wr),c.next=9,(0,Me.select)(fr([Hr]));case 9:return a=c.sent,i=a.get(Hr),c.next=13,(0,Me.call)(zr,Qr({entitySetIds:[o],maxHits:1e4,start:0,constraints:[{constraints:[{type:"simple",searchTerm:"*",fuzzy:!1}]}],sort:{propertyTypeId:i,type:"field"}}));case 13:if(!(s=c.sent).error){c.next=16;break}throw s.error;case 16:return r={data:s.data},c.next=19,(0,Me.put)(L.success(t.id,{hits:(0,e.fromJS)(s.data.hits)}));case 19:c.next=27;break;case 21:return c.prev=21,c.t0=c.catch(0),r={error:c.t0},Gr.error(t.type,c.t0),c.next=27,(0,Me.put)(L.failure(t.id,c.t0));case 27:return c.prev=27,c.next=30,(0,Me.put)(L.finally(t.id));case 30:return c.finish(27);case 31:return c.abrupt("return",r);case 32:case"end":return c.stop()}}),Mr,null,[[0,21,27,31]])}function Yr(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(F,Jr);case 2:case"end":return e.stop()}}),Br)}var Kr=Fe().mark(on),Vr=Fe().mark(an),Xr=new p.Logger("DocumentsSagas"),$r=p.ValidationUtils.isValidUUID,Zr=Be.SearchApiActions.searchEntityNeighborsWithFilter,en=Be.SearchApiSagas.searchEntityNeighborsWithFilterWorker,tn=tr.FILE,rn=tr.ATTACHED_TO,nn=tr.ACCESS_REQUEST_SUBMISSION;function on(t){var r,n,o,a,i,s,c,u,l,f;return Fe().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(r={},p.prev=1,o=t.value,$r(o)){p.next=5;break}throw tt;case 5:return p.next=7,(0,Me.put)(K.request(t.id));case 7:return p.next=9,(0,Me.select)(ir());case 9:return a=p.sent,i=Xt(a,nn),s=Xt(a,tn),c=Xt(a,rn),u={entitySetId:i,filter:{entityKeyIds:[o],edgeEntitySetIds:[c],destinationEntitySetIds:[],sourceEntitySetIds:[s]}},p.next=16,(0,Me.call)(en,Zr(u));case 16:if(!(l=p.sent).error){p.next=19;break}throw l.error;case 19:return f=dr()(n=(0,e.fromJS)(l.data).get(o,(0,e.List)())).call(n,(function(e){return e.get("neighborDetails")})),r.data=f,p.next=23,(0,Me.put)(K.success(t.id,{data:f}));case 23:p.next=30;break;case 25:return p.prev=25,p.t0=p.catch(1),Xr.error(t.type,p.t0),p.next=30,(0,Me.put)(K.failure(t.id));case 30:return p.prev=30,p.next=33,(0,Me.put)(K.finally(t.id));case 33:return p.finish(30);case 34:return p.abrupt("return",r);case 35:case"end":return p.stop()}}),Kr,null,[[1,25,30,34]])}function an(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeLatest)(Y,on);case 2:case"end":return e.stop()}}),Vr)}var sn=Fe().mark(dn),cn=Fe().mark(vn),un=Be.SearchApiActions.searchEntitySetData,ln=Be.SearchApiSagas.searchEntitySetDataWorker,fn=tr.FORM,pn=new p.Logger("getFormsSagas");function dn(t){var r,n,o,a;return Fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,Me.put)(P.request(t.id));case 3:return i.next=5,(0,Me.select)(ir());case 5:return n=i.sent,o=Xt(n,fn),i.next=9,(0,Me.call)(ln,un({entitySetIds:[o],maxHits:1e4,start:0,constraints:[{constraints:[{type:"simple",searchTerm:"Common Application",fuzzy:!1}]}]}));case 9:if(!(a=i.sent).error){i.next=12;break}throw a.error;case 12:return r={data:a.data},i.next=15,(0,Me.put)(P.success(t.id,{forms:(0,e.fromJS)(a.data.hits)}));case 15:i.next=23;break;case 17:return i.prev=17,i.t0=i.catch(0),r={error:i.t0},pn.error(t.type,i.t0),i.next=23,(0,Me.put)(P.failure(t.id,i.t0));case 23:return i.prev=23,i.next=26,(0,Me.put)(P.finally(t.id));case 26:return i.finish(23);case 27:return i.abrupt("return",r);case 28:case"end":return i.stop()}}),sn,null,[[0,17,23,27]])}function vn(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(U,dn);case 2:case"end":return e.stop()}}),cn)}var yn=r(9340),hn=r.n(yn);const mn=require("lodash/isPlainObject");var gn=r.n(mn),Sn=Fe().mark(Dn),xn=Fe().mark(Cn),En=Be.DataApiActions.createOrMergeEntityData,bn=Be.DataApiSagas.createOrMergeEntityDataWorker,In=tr.FORM,An=nr.RJSF_JSON_SCHEMA,wn=nr.RJSF_UI_SCHEMA,Rn=nr.TYPE,Tn=new p.Logger("saveNewFormTemplateSagas");function Dn(e){var t,r,n,o,a,i,s,c,l,f,p,d,v,y,h,m;return Fe().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(g.prev=0,n=e.value,gn()(n)){g.next=4;break}throw tt;case 4:return g.next=6,(0,Me.put)(te.request(e.id));case 6:return g.next=8,(0,Me.select)(ir());case 8:return o=g.sent,a=Xt(o,In),i=n.schema,s=n.uiSchema,c=n.type,g.next=13,(0,Me.select)(fr([An,wn,Rn]));case 13:return l=g.sent,f=l.get(An),p=l.get(wn),d=l.get(Rn),v=hn()(i),y=hn()(s),h=[(r={},u(r,d,[c||"Common Application"]),u(r,f,[v]),u(r,p,[y]),r)],g.next=22,(0,Me.call)(bn,En({entitySetId:a,entityData:h}));case 22:if(!(m=g.sent).error){g.next=25;break}throw m.error;case 25:return t=m,g.next=28,(0,Me.put)(te.success(e.id));case 28:g.next=36;break;case 30:return g.prev=30,g.t0=g.catch(0),t={error:g.t0},Tn.error(e.type,g.t0),g.next=36,(0,Me.put)(te.failure(e.id,g.t0));case 36:return g.prev=36,g.next=39,(0,Me.put)(te.finally(e.id));case 39:return g.finish(36);case 40:return g.abrupt("return",t);case 41:case"end":return g.stop()}}),Sn,null,[[0,30,36,40]])}function Cn(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(ee,Dn);case 2:case"end":return e.stop()}}),xn)}const jn=require("luxon");var _n=Fe().mark(zn),qn=Fe().mark(Wn),kn=Rt.Constants.OPENLATTICE_ID_FQN,On=Be.DataApiActions.createOrMergeEntityData,Un=Be.DataApiSagas.createOrMergeEntityDataWorker,Pn=tr.ACCESS_REQUEST_SUBMISSION,Fn=nr.FORM_DATA,Ln=nr.REQUEST_DATE_TIME,Nn=nr.RJSF_JSON_SCHEMA,Mn=nr.RJSF_UI_SCHEMA,Bn=nr.TYPE,Qn=new p.Logger("submitAccessRequestSagas");function zn(t){var r,n,o,a,i,s,c,l,f,p,d,v,y,h,m,g,S,x,E,b,I,A,w;return Fe().wrap((function(R){for(;;)switch(R.prev=R.next){case 0:if(R.prev=0,a=t.value,gn()(a)){R.next=4;break}throw tt;case 4:return R.next=6,(0,Me.put)(Q.request(t.id));case 6:return R.next=8,(0,Me.select)(ir());case 8:return i=R.sent,s=Xt(i,Pn),c=a.formData,l=a.schema,f=a.uiSchema,p=a.type,R.next=13,(0,Me.select)(fr([Fn,Ln,Nn,Mn,Bn]));case 13:return d=R.sent,v=d.get(Fn),y=d.get(Ln),h=d.get(Nn),m=d.get(Mn),g=d.get(Bn),S=hn()(c),x=hn()(l),E=hn()(f),b=jn.DateTime.local().toISO(),I=[(n={},u(n,g,[p||"Common Application"]),u(n,v,[S]),u(n,h,[x]),u(n,m,[E]),u(n,y,[b]),n)],R.next=26,(0,Me.call)(Un,On({entitySetId:s,entityData:I}));case 26:if(!(A=R.sent).error){R.next=29;break}throw A.error;case 29:return w=(0,e.Map)((u(o={},Bn,[p||"Common Application"]),u(o,Fn,[S]),u(o,Nn,[x]),u(o,Mn,[E]),u(o,Ln,[b]),u(o,kn,A.data),o)),r={data:w},R.next=33,(0,Me.put)(Q.success(t.id,r.data));case 33:R.next=41;break;case 35:return R.prev=35,R.t0=R.catch(0),r={error:R.t0},Qn.error(t.type,R.t0),R.next=41,(0,Me.put)(Q.failure(t.id,R.t0));case 41:return R.prev=41,R.next=44,(0,Me.put)(Q.finally(t.id));case 44:return R.finish(41);case 45:return R.abrupt("return",r);case 46:case"end":return R.stop()}}),_n,null,[[0,35,41,45]])}function Wn(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(B,zn);case 2:case"end":return e.stop()}}),qn)}var Hn=Fe().mark(Zn),Gn=Fe().mark(eo),Jn=Be.DataApiActions.updateEntityData,Yn=Be.DataApiSagas.updateEntityDataWorker,Kn=Rt.Types.UpdateTypes,Vn=tr.ACCESS_REQUEST_SUBMISSION,Xn=nr.FORM_DATA,$n=new p.Logger("updateAccessRequest");function Zn(e){var t,r,n,o,a,i,s,c,l,f,p;return Fe().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,r=e.value,gn()(r)){d.next=4;break}throw tt;case 4:return n=r.formData,o=r.entityKeyId,a=hn()(n),d.next=8,(0,Me.put)(J.request(e.id,{path:["accessRequest",Xn.toString(),0],formData:a}));case 8:return d.next=10,(0,Me.select)(ir());case 10:return i=d.sent,s=Xt(i,Vn),d.next=14,(0,Me.select)(fr([Xn]));case 14:return c=d.sent,l=c.get(Xn),f=u({},o,u({},l,[a])),d.next=19,(0,Me.call)(Yn,Jn({entitySetId:s,entities:f,updateType:Kn.PartialReplace}));case 19:if(!(p=d.sent).error){d.next=22;break}throw p.error;case 22:return t={data:p.data},d.next=25,(0,Me.put)(J.success(e.id));case 25:d.next=33;break;case 27:return d.prev=27,d.t0=d.catch(0),t={error:d.t0},$n.error(e.type,d.t0),d.next=33,(0,Me.put)(J.failure(e.id,d.t0));case 33:return d.prev=33,d.next=36,(0,Me.put)(J.finally(e.id));case 36:return d.finish(33);case 37:return d.abrupt("return",t);case 38:case"end":return d.stop()}}),Hn,null,[[0,27,33,37]])}function eo(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(G,Zn);case 2:case"end":return e.stop()}}),Gn)}var to=r(1643),ro=r.n(to),no=";base64,";const oo=function(e){var t=ro()(e).call(e,no);return t<0?e:e.substring(t+no.length)};var ao=Fe().mark(go),io=Fe().mark(So),so=Rt.Models.DataGraphBuilder,co=tr.ACCESS_REQUEST_SUBMISSION,uo=tr.ATTACHED_TO,lo=tr.FILE,fo=nr.DATE_TIME,po=nr.FILE_DATA,vo=nr.LABEL,yo=nr.NAME,ho=nr.TYPE,mo=new p.Logger("DocumentsSagas");function go(e){var t,r,n,o,a,i,s,c,l,f,p,d,v,y,h,m,g,S,x,E,b;return Fe().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,(0,Me.put)(X.request(e.id));case 3:return r=e.value,n=r.files,o=r.accessRequestId,I.next=6,(0,Me.select)(ir());case 6:return a=I.sent,i=Xt(a,co),s=Xt(a,lo),c=Xt(a,uo),I.next=12,(0,Me.select)(fr([fo,po,vo,yo,ho]));case 12:return l=I.sent,f=l.get(fo),p=l.get(po),d=l.get(yo),v=l.get(ho),y=jn.DateTime.local().toISO(),h=dr()(n).call(n,(function(e){var t,r=e.base64,n=e.name,o=e.type;return u(t={},f,[y]),u(t,v,[o]),u(t,d,[n]),u(t,p,[{"content-type":o,data:oo(r)}]),t})),m=u({},f,[y]),g=[],wt()(n).call(n,(function(e,t){g.push({srcEntitySetId:s,srcEntityIndex:t,dstEntitySetId:i,dstEntityKeyId:o,data:m})})),S=u({},s,h),x=u({},c,g),E=(new so).setAssociations(x).setEntities(S).build(),I.next=27,(0,Me.call)(Rt.DataApi.createEntityAndAssociationData,E);case 27:if(!(b=I.sent).error){I.next=30;break}throw b.error;case 30:return t={data:{}},I.next=33,(0,Me.put)(X.success(e.id));case 33:I.next=41;break;case 35:return I.prev=35,I.t0=I.catch(0),mo.error(e.type,I.t0),t={error:I.t0},I.next=41,(0,Me.put)(X.failure(e.id,I.t0));case 41:return I.prev=41,I.next=44,(0,Me.put)(X.finally(e.id));case 44:return I.finish(41);case 45:return I.abrupt("return",t);case 46:case"end":return I.stop()}}),ao,null,[[0,35,41,45]])}function So(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(V,go);case 2:case"end":return e.stop()}}),io)}const xo=require("history");var Eo="/request/".concat(":accessRequestId"),bo="GO_TO_ROOT";var Io="GO_TO_ROUTE";function Ao(e,t){return{route:t,error:e,type:"ROUTING_FAILURE"}}var wo=r(9828),Ro=r.n(wo);const To=require("connected-react-router");var Do=Fe().mark(ko),Co=Fe().mark(Oo),jo=Fe().mark(Uo),_o=new p.Logger("RoutingSagas"),qo='invalid route: a route must be a non-empty string that starts with "/"';function ko(e){var t,r,n;return Fe().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.route,r=e.state,n=void 0===r?{}:r,null!=t&&Ro()(t).call(t,"/",0)){o.next=6;break}return _o.error(qo,t),o.next=5,(0,Me.put)(Ao(qo,t));case 5:return o.abrupt("return");case 6:return o.next=8,(0,Me.put)((0,To.push)({state:hn()(n),pathname:t}));case 8:case"end":return o.stop()}}),Do)}function Oo(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(Io,ko);case 2:case"end":return e.stop()}}),Co)}function Uo(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.takeEvery)(bo,ko);case 2:case"end":return e.stop()}}),jo)}var Po=(0,xo.createHashHistory)(),Fo=Fe().mark(Lo);function Lo(){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Me.all)([(0,Me.fork)(l.AuthSagas.watchAuthAttempt),(0,Me.fork)(l.AuthSagas.watchAuthSuccess),(0,Me.fork)(l.AuthSagas.watchAuthFailure),(0,Me.fork)(l.AuthSagas.watchAuthExpired),(0,Me.fork)(l.AuthSagas.watchLogout),(0,Me.fork)(yt),(0,Me.fork)(Ze),(0,Me.fork)(Uo),(0,Me.fork)(Oo),(0,Me.fork)(Nr),(0,Me.fork)(an),(0,Me.fork)(Yr),(0,Me.fork)(Wn),(0,Me.fork)(eo),(0,Me.fork)(So),(0,Me.fork)(jr),(0,Me.fork)(Cn),(0,Me.fork)(vn)]);case 2:case"end":return e.stop()}}),Fo)}function No(e){var r=a()(),n=[r,(0,i.routerMiddleware)(e)],o=[s.applyMiddleware.apply(void 0,n)],c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({stateSanitizer:function(e){return e.setIn(["edm","entityTypes"],"HIDDEN").setIn(["edm","entityTypesIndexMap"],"HIDDEN").setIn(["edm","propertyTypes"],"HIDDEN").setIn(["edm","propertyTypesIndexMap"],"HIDDEN")},maxAge:100}):s.compose,p=(0,s.createStore)(function(e){var t;return(0,f.combineReducers)((u(t={},y,Ue),u(t,h,It),u(t,m,l.AuthReducer),u(t,g,Gt),u(t,"router",(0,i.connectRouter)(e)),t))}(e),t().Map(),c.apply(void 0,o));return r.run(Lo),p}var Mo=r(9297),Bo=r.n(Mo);const Qo=require("lattice-ui-kit"),zo=require("react-router-dom"),Wo=require("styled-components");var Ho=r.n(Wo),Go=r(3649),Jo=r.n(Go);const Yo=require("react-redux");var Ko=No(Po),Vo=(0,Mo.createContext)(null),Xo=((0,Yo.createStoreHook)(Vo),(0,Yo.createDispatchHook)(Vo)),$o=(0,Yo.createSelectorHook)(Vo);const Zo=require("react/jsx-runtime");var ea=Rt.Constants.OPENLATTICE_LAST_WRITE_FQN,ta=nr.REQUEST_DATE_TIME,ra=nr.TYPE,na=p.DataUtils.getPropertyValue;const oa=function(e){var t,r,n=e.data,o=e.to,a=Xo(),i=na(n,[ra,0]),s=na(n,[ta,0]),c=na(n,[ea,0]),u=jn.DateTime.fromISO(s),l=jn.DateTime.fromISO(c),f=u.toLocaleString(jn.DateTime.DATE_SHORT),p="Created: ".concat(f);if(l.diff(u,"seconds").seconds>1){var d=l.toRelative({style:"short"});p=_e()(p).call(p," · Updated: ".concat(d))}var v=dr()(t=Jo()(r=i.split(" ")).call(r,0,2)).call(t,(function(e){return e.charAt(0).toUpperCase()})).join("");return(0,Zo.jsxs)(Qo.ListItem,{button:!0,component:zo.Link,disableGutters:!0,onClick:function(){a({type:z,value:n})},to:o,children:[(0,Zo.jsx)(Qo.ListItemAvatar,{children:(0,Zo.jsx)(Qo.Avatar,{children:v})}),(0,Zo.jsx)(Qo.ListItemText,{primary:i,secondary:p})]})};var aa=r(6976);function ia(e,t){return function(e){if(Ee(e))return e}(e)||function(e,t){if(void 0!==Ie&&Ae(Object(e))){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=aa(e);!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}}(e,t)||Te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var sa=r(6295),ca=r.n(sa);const ua=function(e,t){var r;return t.params?Ne()(r=ca()(t.params)).call(r,(function(e,t){var r=ia(t,2),n=r[0],o=r[1];return e.replace(RegExp(":".concat(n),"g"),o)}),e):e};var la=p.DataUtils.getEntityKeyId;const fa=function(){var t=Xo(),r=$o((function(t){return t.getIn([y,or],(0,e.List)())})),n=$o((function(e){return e.getIn(Et)})),o=$o((function(e){return e.getIn(bt)})),a=ua(n,o);return(0,Mo.useEffect)((function(){t(L())}),[t]),(0,Zo.jsx)(Qo.List,{children:dr()(r).call(r,(function(e){var t,r=la(e)||"";return(0,Zo.jsx)(oa,{data:e,to:_e()(t="".concat(a,"/request/")).call(t,r)},r)}))})};var pa=Ho().div.withConfig({displayName:"AllRequestsContainer__HeaderRow",componentId:"k7n8n2-0"})(["display:flex;justify-content:space-between;align-items:center;"]);const da=function(){var e=$o((function(e){return e.getIn(Et)})),t=$o((function(e){return e.getIn(bt)})),r=ua(e,t);return(0,Zo.jsxs)("div",{children:[(0,Zo.jsxs)(pa,{children:[(0,Zo.jsx)(Qo.Typography,{variant:"h1",children:"Access Requests"}),(0,Zo.jsx)(Qo.Button,{color:"primary",component:zo.Link,to:"".concat(r,"/new"),children:"New Request"})]}),(0,Zo.jsx)(fa,{})]})},va=require("@fortawesome/pro-regular-svg-icons/faPrint"),ya=require("@fortawesome/react-fontawesome"),ha=require("react-router");var ma=r(7116);const ga=require("@fortawesome/pro-regular-svg-icons/faPaperclip"),Sa=require("@fortawesome/pro-light-svg-icons/faFilePdf"),xa=require("@fortawesome/pro-light-svg-icons/faFileWord"),Ea=require("@fortawesome/pro-regular-svg-icons/faDownload"),ba=require("@fortawesome/pro-regular-svg-icons/faTrashAlt");"".concat("audio/","*");var Ia,Aa="".concat("image/","*"),wa=("".concat("video/","*"),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"),Ra="application/pdf",Ta=(u(Ia={},Ra,Sa.faFilePdf),u(Ia,wa,xa.faFileWord),Ia),Da=p.DataUtils.getEntityKeyId,Ca=p.DataUtils.getPropertyValue,ja=nr.DATE_TIME,_a=nr.FILE_DATA,qa=nr.NAME,ka=nr.TYPE,Oa=Ho().img.withConfig({displayName:"AttachmentItem__ImagePreview",componentId:"olj6j0-0"})(["max-height:40px;max-width:40px;"]);const Ua=function(e){var t,r,n=e.divider,o=e.file,a=e.onDelete,i=Da(o),s=Ca(o,[qa,0]),c=Ca(o,[ka,0]),u=Ca(o,[_a,0]),l=Ca(o,[ja,0]),f=jn.DateTime.fromISO(l).toLocaleString(jn.DateTime.DATE_SHORT);wt()(t=ca()(Ta)).call(t,(function(e){var t=ia(e,2),n=t[0],o=t[1];Ro()(c).call(c,n)&&(r=o)}));var p=r?(0,Zo.jsx)(ya.FontAwesomeIcon,{fixedWidth:!0,icon:r,size:"2x"}):(0,Zo.jsx)(Oa,{src:u});return(0,Zo.jsxs)(Qo.ListItem,{divider:n,children:[(0,Zo.jsx)(Qo.ListItemAvatar,{children:p}),(0,Zo.jsx)(Qo.ListItemText,{primary:s,secondary:f}),(0,Zo.jsxs)(Qo.ListItemSecondaryAction,{children:[(0,Zo.jsx)("a",{"aria-label":"Download",download:!0,href:u,rel:"noreferrer",target:"_blank",title:"Download",children:(0,Zo.jsx)(Qo.IconButton,{children:(0,Zo.jsx)(ya.FontAwesomeIcon,{icon:Ea.faDownload,fixedWidth:!0})})}),(0,Zo.jsx)(Qo.IconButton,{"aria-label":"Delete",onClick:function(){a(i)},title:"Delete",children:(0,Zo.jsx)(ya.FontAwesomeIcon,{fixedWidth:!0,icon:ba.faTrashAlt})})]})]})};var Pa=p.DataUtils.getEntityKeyId;const Fa=function(e){var t=e.accessRequestId,r=$o((function(e){return e.getIn([y,k])})),n=Xo();(0,Mo.useEffect)((function(){n(K(t))}),[t,n]);var o=function(e){n(Z([e]))};return(0,Zo.jsx)(Qo.List,{children:dr()(r).call(r,(function(e,t){var n=Pa(e),a=t!==r.size-1;return(0,Zo.jsx)(Ua,{divider:a,file:e,onDelete:o},n)}))})};var La=r(1068),Na=r.n(La);function Ma(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),c(e,n.key,n)}}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Qa=r(189),za=r(9542);function Wa(e,t){return(Wa=za||function(e,t){return e.__proto__=t,e})(e,t)}var Ha=r(3882);function Ga(e){return(Ga="function"==typeof Ie&&"symbol"==typeof Ha?function(e){return typeof e}:function(e){return e&&"function"==typeof Ie&&e.constructor===Ie&&e!==Ie.prototype?"symbol":typeof e})(e)}function Ja(e,t){return!t||"object"!==Ga(t)&&"function"!=typeof t?Ba(e):t}var Ya=r(4889);function Ka(e){return(Ka=za?Ya:function(e){return e.__proto__||Ya(e)})(e)}var Va,Xa=r(2762),$a=r.n(Xa),Za=(u(Va={},Ra,Sa.faFilePdf),u(Va,wa,xa.faFileWord),Va),ei=Ho().img.withConfig({displayName:"DocumentItem__ImagePreview",componentId:"sc-15vefxs-0"})(["max-height:40px;max-width:40px;"]);const ti=function(e){var t,r,n=e.divider,o=e.file,a=e.index,i=e.onDelete,s=o.name,c=o.type,u=o.base64;wt()(t=ca()(Za)).call(t,(function(e){var t=ia(e,2),n=t[0],o=t[1];Ro()(c).call(c,n)&&(r=o)}));var l=r?(0,Zo.jsx)(ya.FontAwesomeIcon,{fixedWidth:!0,icon:r,size:"2x"}):(0,Zo.jsx)(ei,{src:u});return(0,Zo.jsxs)(Qo.ListItem,{divider:n,children:[(0,Zo.jsx)(Qo.ListItemAvatar,{children:l}),(0,Zo.jsx)(Qo.ListItemText,{primary:s}),(0,Zo.jsx)(Qo.ListItemSecondaryAction,{children:(0,Zo.jsx)(Qo.IconButton,{"aria-label":"Remove",onClick:function(){i(a)},title:"Remove",children:(0,Zo.jsx)(ya.FontAwesomeIcon,{fixedWidth:!0,icon:ba.faTrashAlt})})})]})},ri=require("prop-types");var ni=r.n(ri);const oi=require("file-selector"),ai=require("attr-accept");var ii=r.n(ai);function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ci(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ui=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},li=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," bytes")}},fi=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," bytes")}},pi={code:"too-many-files",message:"Too many files"};function di(e,t){var r="application/x-moz-file"===e.type||ii()(e,t);return[r,r?null:ui(t)]}function vi(e,t,r){if(yi(e.size))if(yi(t)&&yi(r)){if(e.size>r)return[!1,li(r)];if(e.size<t)return[!1,fi(t)]}else{if(yi(t)&&e.size<t)return[!1,fi(t)];if(yi(r)&&e.size>r)return[!1,li(r)]}return[!0,null]}function yi(e){return null!=e}function hi(e){var t=e.files,r=e.accept,n=e.minSize,o=e.maxSize,a=e.multiple,i=e.maxFiles;return!(!a&&t.length>1||a&&i>=1&&t.length>i)&&t.every((function(e){var t=si(di(e,r),1)[0],a=si(vi(e,n,o),1)[0];return t&&a}))}function mi(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function gi(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Si(e){e.preventDefault()}function xi(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function Ei(e){return-1!==e.indexOf("Edge/")}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return xi(e)||Ei(e)}function Ii(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.some((function(t){return!mi(e)&&t&&t.apply(void 0,[e].concat(n)),mi(e)}))}}function Ai(e){return function(e){if(Array.isArray(e))return Ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ri(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||Ri(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e,t){if(e){if("string"==typeof e)return Ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ti(e,t):void 0}}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(r),!0).forEach((function(t){ji(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var qi=(0,Mo.forwardRef)((function(e,t){var r=e.children,n=Ui(_i(e,["children"])),o=n.open,a=_i(n,["open"]);return(0,Mo.useImperativeHandle)(t,(function(){return{open:o}}),[o]),Bo().createElement(Mo.Fragment,null,r(Ci(Ci({},a),{},{open:o})))}));qi.displayName="Dropzone";var ki={disabled:!1,getFilesFromEvent:oi.fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null};qi.defaultProps=ki,qi.propTypes={children:ni().func,accept:ni().oneOfType([ni().string,ni().arrayOf(ni().string)]),multiple:ni().bool,preventDropOnDocument:ni().bool,noClick:ni().bool,noKeyboard:ni().bool,noDrag:ni().bool,noDragEventsBubbling:ni().bool,minSize:ni().number,maxSize:ni().number,maxFiles:ni().number,disabled:ni().bool,getFilesFromEvent:ni().func,onFileDialogCancel:ni().func,onDragEnter:ni().func,onDragLeave:ni().func,onDragOver:ni().func,onDrop:ni().func,onDropAccepted:ni().func,onDropRejected:ni().func,validator:ni().func};var Oi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ci(Ci({},ki),e),r=t.accept,n=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,i=t.minSize,s=t.multiple,c=t.maxFiles,u=t.onDragEnter,l=t.onDragLeave,f=t.onDragOver,p=t.onDrop,d=t.onDropAccepted,v=t.onDropRejected,y=t.onFileDialogCancel,h=t.preventDropOnDocument,m=t.noClick,g=t.noKeyboard,S=t.noDrag,x=t.noDragEventsBubbling,E=t.validator,b=(0,Mo.useRef)(null),I=(0,Mo.useRef)(null),A=(0,Mo.useReducer)(Pi,Oi),w=wi(A,2),R=w[0],T=w[1],D=R.isFocused,C=R.isFileDialogActive,j=R.draggedFiles,_=(0,Mo.useCallback)((function(){I.current&&(T({type:"openDialog"}),I.current.value=null,I.current.click())}),[T]),q=function(){C&&setTimeout((function(){I.current&&(I.current.files.length||(T({type:"closeDialog"}),"function"==typeof y&&y()))}),300)};(0,Mo.useEffect)((function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}}),[I,C,y]);var k=(0,Mo.useCallback)((function(e){b.current&&b.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),_()))}),[b,I]),O=(0,Mo.useCallback)((function(){T({type:"focus"})}),[]),U=(0,Mo.useCallback)((function(){T({type:"blur"})}),[]),P=(0,Mo.useCallback)((function(){m||(bi()?setTimeout(_,0):_())}),[I,m]),F=(0,Mo.useRef)([]),L=function(e){b.current&&b.current.contains(e.target)||(e.preventDefault(),F.current=[])};(0,Mo.useEffect)((function(){return h&&(document.addEventListener("dragover",Si,!1),document.addEventListener("drop",L,!1)),function(){h&&(document.removeEventListener("dragover",Si),document.removeEventListener("drop",L))}}),[b,h]);var N=(0,Mo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e),F.current=[].concat(Ai(F.current),[e.target]),gi(e)&&Promise.resolve(o(e)).then((function(t){mi(e)&&!x||(T({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e))}))}),[o,u,x]),M=(0,Mo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e);var t=gi(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&f&&f(e),!1}),[f,x]),B=(0,Mo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e);var t=F.current.filter((function(e){return b.current&&b.current.contains(e)})),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),F.current=t,t.length>0||(T({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),gi(e)&&l&&l(e))}),[b,l,x]),Q=(0,Mo.useCallback)((function(e){e.preventDefault(),e.persist(),G(e),F.current=[],gi(e)&&Promise.resolve(o(e)).then((function(t){if(!mi(e)||x){var n=[],o=[];t.forEach((function(e){var t=wi(di(e,r),2),s=t[0],c=t[1],u=wi(vi(e,i,a),2),l=u[0],f=u[1],p=E?E(e):null;if(s&&l&&!p)n.push(e);else{var d=[c,f];p&&(d=d.concat(p)),o.push({file:e,errors:d.filter((function(e){return e}))})}})),(!s&&n.length>1||s&&c>=1&&n.length>c)&&(n.forEach((function(e){o.push({file:e,errors:[pi]})})),n.splice(0)),T({acceptedFiles:n,fileRejections:o,type:"setFiles"}),p&&p(n,o,e),o.length>0&&v&&v(o,e),n.length>0&&d&&d(n,e)}})),T({type:"reset"})}),[s,r,i,a,c,o,p,d,v,x]),z=function(e){return n?null:e},W=function(e){return g?null:z(e)},H=function(e){return S?null:z(e)},G=function(e){x&&e.stopPropagation()},J=(0,Mo.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,o=e.onKeyDown,a=e.onFocus,i=e.onBlur,s=e.onClick,c=e.onDragEnter,u=e.onDragOver,l=e.onDragLeave,f=e.onDrop,p=_i(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return Ci(Ci(ji({onKeyDown:W(Ii(o,k)),onFocus:W(Ii(a,O)),onBlur:W(Ii(i,U)),onClick:z(Ii(s,P)),onDragEnter:H(Ii(c,N)),onDragOver:H(Ii(u,M)),onDragLeave:H(Ii(l,B)),onDrop:H(Ii(f,Q))},r,b),n||g?{}:{tabIndex:0}),p)}}),[b,k,O,U,P,N,M,B,Q,g,S,n]),Y=(0,Mo.useCallback)((function(e){e.stopPropagation()}),[]),K=(0,Mo.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,o=e.onChange,a=e.onClick,i=_i(e,["refKey","onChange","onClick"]),c=ji({accept:r,multiple:s,type:"file",style:{display:"none"},onChange:z(Ii(o,Q)),onClick:z(Ii(a,Y)),autoComplete:"off",tabIndex:-1},n,I);return Ci(Ci({},c),i)}}),[I,r,s,Q,n]),V=j.length,X=V>0&&hi({files:j,accept:r,minSize:i,maxSize:a,multiple:s,maxFiles:c}),$=V>0&&!X;return Ci(Ci({},R),{},{isDragAccept:X,isDragReject:$,isFocused:D&&!n,getRootProps:J,getInputProps:K,rootRef:b,inputRef:I,open:z(_)})}function Pi(e,t){switch(t.type){case"focus":return Ci(Ci({},e),{},{isFocused:!0});case"blur":return Ci(Ci({},e),{},{isFocused:!1});case"openDialog":return Ci(Ci({},e),{},{isFileDialogActive:!0});case"closeDialog":return Ci(Ci({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var r=t.isDragActive,n=t.draggedFiles;return Ci(Ci({},e),{},{draggedFiles:n,isDragActive:r});case"setFiles":return Ci(Ci({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Ci(Ci({},e),{},{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]});default:return e}}var Fi=Qo.Colors.BLUE,Li=Qo.Colors.NEUTRAL,Ni=Qo.Colors.PURPLE,Mi=Qo.Colors.RED,Bi=[Aa,Ra,wa],Qi=Ho().div.withConfig({displayName:"Dropzone__DropzoneWrapper",componentId:"j9e9j-0"})(["align-items:center;background-color:",";border-color:",";border-radius:3px;border-style:dashed;border-width:2px;display:flex;flex-direction:column;flex:1;outline:none;padding:32px;transition:border 250ms ease-in-out;"],Li.N50,(function(e){return function(e){return e.isDragAccept?Ni.P300:e.isDragReject?Mi.R300:e.isDragActive?Fi.B300:Li.N100}(e)}));const zi=function(e){var t=e.onDrop,r=Ui({accept:Bi.join(","),onDrop:t}),n=r.getRootProps,o=r.getInputProps,a=r.isDragActive,i=r.isDragAccept,s=r.isDragReject,c=n(),u=c.onBlur,l=c.onClick,f=c.onDragEnter,p=c.onDragLeave,d=c.onDragOver,v=c.onDrop,y=c.onFocus,h=c.onKeyDown,m=c.ref,g=c.tabIndex,S=o(),x=S.accept,E=S.autoComplete,b=S.multiple,I=S.onChange,A=S.onClick,w=S.ref,R=S.style,T=S.tabIndex,D=S.type;return(0,Zo.jsxs)(Qi,{isDragActive:a,isDragAccept:i,isDragReject:s,onBlur:u,onClick:l,onDragEnter:f,onDragLeave:p,onDragOver:d,onDrop:v,onFocus:y,onKeyDown:h,ref:m,tabIndex:g,children:[(0,Zo.jsx)("input",{accept:x,autoComplete:E,multiple:b,onChange:I,onClick:A,ref:w,style:R,tabIndex:T,type:D}),(0,Zo.jsx)(Qo.Typography,{component:"span",children:"Drop files here or click to select."})]})};const Wi=function(e){var t=e.onChange,r=(0,Mo.useCallback)((function(e){return t(e)}),[t]);return(0,Zo.jsx)(zi,{onDrop:function(e){wt()(e).call(e,(function(e){var t=e.name,n=e.type,o=new FileReader;o.onload=function(){var e=o.result;r({file:{base64:e,name:t,type:n}})},o.readAsDataURL(e)}))}})};function Hi(e){var t=function(){if("undefined"==typeof Reflect||!Na())return!1;if(Na().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Na()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ka(e);if(t){var o=Ka(this).constructor;r=Na()(n,arguments,o)}else r=n.apply(this,arguments);return Ja(this,r)}}var Gi=p.ReduxUtils.isSuccess,Ji=p.ReduxUtils.isPending,Yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Qa(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(a,e);var t,r,n,o=Hi(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u(Ba(t=o.call(this,e)),"getInitialState",(function(){return{files:[],tags:[]}})),u(Ba(t),"onDrop",(function(e){var r,n=e.file,o=t.state.files;t.setState({files:_e()(r=[]).call(r,De(o),[n])})})),u(Ba(t),"onDelete",(function(e){var r=t.state.files;$a()(r).call(r,e,1),t.setState({files:r})})),u(Ba(t),"onUpload",(function(){var e=t.props,r=e.accessRequestId,n=e.actions,o=t.state,a=o.files,i=o.tags;n.uploadAttachments({files:a,tags:i,accessRequestId:r})})),t.state=t.getInitialState(),t}return t=a,(r=[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.requestState,r=e.onSuccess;Gi(t)&&r()}},{key:"componentWillUnmount",value:function(){this.props.actions.resetRequestState([V])}},{key:"render",value:function(){var e=this,t=this.state.files,r=this.props.requestState;return(0,Zo.jsxs)("div",{children:[(0,Zo.jsx)(Wi,{onChange:this.onDrop}),(0,Zo.jsx)(Qo.List,{children:dr()(t).call(t,(function(r,n){var o=n!==t.length-1;return(0,Zo.jsx)(ti,{divider:o,file:r,index:n,onDelete:e.onDelete})}))}),(0,Zo.jsx)(Qo.Button,{color:"primary",disabled:!t.length,fullWidth:!0,isLoading:Ji(r),onClick:this.onUpload,children:"Upload"})]})}}])&&Ma(t.prototype,r),n&&Ma(t,n),a}(Mo.Component);const Ki=(0,Yo.connect)((function(e){return{requestState:e.getIn([y,V,R])}}),(function(e){return{actions:(0,s.bindActionCreators)({resetRequestState:xe,uploadAttachments:X},e)}}),null,{context:Vo})(Yi);var Vi=r(4310),Xi=r.n(Vi),$i=r(4074),Zi=r.n($i),es=r(9649),ts=r.n(es),rs=r(368),ns=r.n(rs),os=r(3978),as=r.n(os),is=r(3263),ss=r(5683),cs=r(9356);function us(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=cs(e);for(n=0;n<a.length;n++)r=a[n],ss(t).call(t,r)>=0||(o[r]=e[r]);return o}(e,t);if(is){var a=is(e);for(n=0;n<a.length;n++)r=a[n],ss(t).call(t,r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ls(e,t){var r=yr()(e);if(Xi()){var n=Xi()(e);t&&(n=C()(n).call(n,(function(t){return Zi()(e,t).enumerable}))),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)wt()(r=ls(Object(n),!0)).call(r,(function(t){u(e,t,n[t])}));else if(ts())ns()(e,ts()(n));else{var o;wt()(o=ls(Object(n))).call(o,(function(t){as()(e,t,Zi()(n,t))}))}}return e}const ps=function(e){var t=e.children,r=e.value,n=e.index,o=us(e,["children","value","index"]);return(0,Zo.jsx)("div",fs(fs({"aria-controls":"tabpanel-".concat(n),"aria-labelledby":"tab-".concat(n),hidden:r!==n,id:"tabpanel-".concat(n),role:"tabpanel"},o),{},{children:r===n&&(0,Zo.jsx)(Qo.Box,{paddingTop:3,paddingBottom:3,children:t})}))},ds=require("lattice-fabricate");var vs=Ho()(ds.Form).withConfig({displayName:"styled__EdgelessForm",componentId:"sc-1ycpsik-0"})(["margin:-30px;"]),ys=Ho().div.withConfig({displayName:"styled__ModalBody",componentId:"sc-1ycpsik-1"})(["max-width:100%;width:","px;"],(function(e){var t=e.width;return"number"==typeof t&&t>0?t:720}));const hs=function(e){var t=e.accessRequestId,r=ia((0,Mo.useState)(0),2),n=r[0],o=r[1];return(0,Zo.jsxs)(ys,{children:[(0,Zo.jsxs)(Qo.Tabs,{indicatorColor:"primary",onChange:function(e,t){o(t)},textColor:"primary",value:n,children:[(0,Zo.jsx)(Qo.Tab,{label:"Manage"}),(0,Zo.jsx)(Qo.Tab,{label:"Upload"})]}),(0,Zo.jsx)(ps,{index:0,value:n,children:(0,Zo.jsx)(Fa,{accessRequestId:t})}),(0,Zo.jsx)(ps,{index:1,value:n,children:(0,Zo.jsx)(Ki,{accessRequestId:t,onSuccess:function(){o(0)}})})]})};const ms=function(e){var t=e.accessRequestId,r=e.isVisible,n=e.onClose;return(0,Zo.jsx)(Qo.Modal,{textTitle:"Attachments",isVisible:r,onClose:n,withFooter:!1,children:(0,Zo.jsx)(hs,{accessRequestId:t})})};const gs=function(e){var t=e.accessRequestId,r=ia((0,Mo.useState)(!1),2),n=r[0],o=r[1];return(0,Zo.jsxs)(Zo.Fragment,{children:[(0,Zo.jsx)(Qo.IconButton,{"aria-controls":n?"access-request-attachment-menu":void 0,"aria-expanded":n?"true":void 0,"aria-haspopup":"menu","aria-label":"access request attachment button",children:(0,Zo.jsx)(ya.FontAwesomeIcon,{fixedWidth:!0,icon:ga.faPaperclip,onClick:function(){o(!0)}})}),(0,Zo.jsx)(ms,{accessRequestId:t,isVisible:n,onClose:function(){o(!1)}})]})},Ss=require("lodash/merge");var xs=r.n(Ss),Es=new p.Logger("SchemaUtils"),bs=function(e,t){var r=t.schema,n=t.uiSchema,o=e.schema,a=void 0===o?{}:o,i=e.uiSchema,s=void 0===i?{}:i;return{schema:xs()(a,r),uiSchema:xs()(s,n)}};const Is=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={schema:{},uiSchema:{}};return e.length!==t.length&&Es.warn("generateReviewSchema","schemas and uiSchemas have mismatching lengths"),wt()(e).call(e,(function(r,o){bs(n,{schema:e[o],uiSchema:t[o]})})),r&&xs()(n.uiSchema,{"ui:disabled":!0,"ui:readonly":!0}),n};function As(e,t){var r=yr()(e);if(Xi()){var n=Xi()(e);t&&(n=C()(n).call(n,(function(t){return Zi()(e,t).enumerable}))),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)wt()(r=As(Object(n),!0)).call(r,(function(t){u(e,t,n[t])}));else if(ts())ns()(e,ts()(n));else{var o;wt()(o=As(Object(n))).call(o,(function(t){as()(e,t,Zi()(n,t))}))}}return e}var Rs=p.DataUtils.getPropertyValue,Ts=nr.FORM_DATA,Ds=nr.RJSF_JSON_SCHEMA,Cs=nr.RJSF_UI_SCHEMA,js=function(e){var t=e.accessRequestId,r=e.data,n=e.isSubmitting,o=e.fRef,a=Xo(),i=Rs(r,[Ts,0]),s=Rs(r,[Ds,0]),c=Rs(r,[Cs,0]);try{var u=JSON.parse(i),l=JSON.parse(s),f=JSON.parse(c);if(Yt()(l)&&Yt()(f)){var p=Is(l,f);l=p.schema,f=p.uiSchema}return(0,Zo.jsx)(vs,{ref:o,formData:u,isSubmitting:n,onSubmit:function(e){var r=e.formData;a(J({formData:r,entityKeyId:t}))},schema:l,uiSchema:f})}catch(e){return(0,Zo.jsx)("div",{children:"An error has occured. Please contact support."})}};const _s=(0,Mo.forwardRef)((function(e,t){return(0,Zo.jsx)(js,ws(ws({},e),{},{fRef:t}))}));var qs=Ho().div.withConfig({displayName:"styled__CenterWrapper",componentId:"sc-6qf0vq-0"})(["align-items:center;display:flex;height:100%;justify-content:center;"]),ks=p.ReduxUtils.isPending,Os=p.ReduxUtils.isStandby,Us=Ho().div.withConfig({displayName:"EditAccessRequestContainer__Row",componentId:"sc-182kjan-0"})(["display:flex;"]),Ps=Ho()(Qo.IconButton).withConfig({displayName:"EditAccessRequestContainer__PrintButton",componentId:"sc-182kjan-1"})(["margin-left:auto;"]);const Fs=function(){var e=Xo(),t=(0,Mo.useRef)(),r=$o(ar()),n=(0,ma.useReactToPrint)({content:function(){return t.current}}),o=$o((function(e){return e.getIn([y,G,R])})),a=$o((function(e){return e.getIn([y,N,R])})),i=(0,ha.useRouteMatch)().params.accessRequestId||"";(0,Mo.useEffect)((function(){return e(M(i)),function(){e(xe([G])),e(xe([N])),e(H())}}),[i,e]);var s=ks(o);return(0,Zo.jsxs)("div",{children:[(0,Zo.jsxs)(Us,{children:[(0,Zo.jsx)(Ps,{onClick:n,children:(0,Zo.jsx)(ya.FontAwesomeIcon,{icon:va.faPrint,fixedWidth:!0})}),(0,Zo.jsx)(gs,{accessRequestId:i})]}),ks(a)||Os(a)?(0,Zo.jsx)(qs,{children:(0,Zo.jsx)(Qo.Spinner,{size:"2x"})}):(0,Zo.jsx)(_s,{accessRequestId:i,data:r,isSubmitting:s,ref:t})]})};var Ls=p.ReduxUtils.isPending,Ns=p.DataUtils.getEntityKeyId,Ms=p.ValidationUtils.isValidUUID,Bs=Ho().div.withConfig({displayName:"CommonApplicationForm__ActionRow",componentId:"sc-1old4ll-0"})(["align-items:center;display:flex;justify-content:space-between;padding:32px 0;"]);const Qs=function(e){var t=e.schemas,r=e.uiSchemas,n=Xo(),o=$o(ar()),a=$o((function(e){return e.getIn([y,B,R])})),i=Ls(a),s=Ns(o)||"";(0,Mo.useEffect)((function(){return function(){n(xe([B])),n(H())}}),[n]);return(0,Zo.jsx)(ds.Paged,{onPageChange:function(e,o){Ms(s)?n(J({formData:o,entityKeyId:s})):n(Q({formData:o,schema:t,uiSchema:r,type:"Common Application"}))},render:function(e){var o,a=e.formRef,s=e.onBack,c=e.onNext,u=e.page,l=e.pagedData,f=e.validateAndSubmit,p=t.length,d=u===p-1,v=d?function(){n({route:"/",state:{},type:bo})}:f;return(0,Zo.jsxs)(Zo.Fragment,{children:[(0,Zo.jsx)(vs,{formData:l,hideSubmit:!0,isSubmitting:i,onSubmit:c,ref:a,schema:t[u],uiSchema:r[u]}),(0,Zo.jsxs)(Bs,{children:[(0,Zo.jsx)(Qo.Button,{disabled:!(u>0),onClick:s,children:"Back"}),(0,Zo.jsx)("span",{children:_e()(o="".concat(u+1," of ")).call(o,p)}),(0,Zo.jsx)(Qo.Button,{isLoading:i,mode:"primary",onClick:v,children:d?"Complete Survey":"Next"})]})]})}})};var zs=p.DataUtils.getPropertyValue,Ws=nr.RJSF_JSON_SCHEMA,Hs=nr.RJSF_UI_SCHEMA,Gs=p.ReduxUtils.isFailure,Js=p.ReduxUtils.isPending,Ys=p.ReduxUtils.isStandby;const Ks=function(){var t=Xo(),r=$o((function(e){return e.getIn([y,U,R])})),n=$o((function(t){return t.getIn([y,O],(0,e.List)())}));if((0,Mo.useEffect)((function(){return t(P()),function(){return t(xe([U]))}}),[t]),Js(r)||Ys(r))return(0,Zo.jsx)(qs,{children:(0,Zo.jsx)(Qo.Spinner,{size:"2x"})});if(Gs(r))return(0,Zo.jsx)("div",{children:"An error has occurred in fetching the form template. Please contact support."});try{var o=n.first(),a=zs(o,[Ws,0]),i=zs(o,[Hs,0]),s=JSON.parse(a),c=JSON.parse(i);return(0,Zo.jsx)(Qs,{schemas:s,uiSchemas:c})}catch(e){return(0,Zo.jsx)("div",{children:"An error has occured in parsing the form template. Please contact support."})}};var Vs=p.ReduxUtils.isPending,Xs=p.ReduxUtils.isStandby,$s=p.ValidationUtils.isValidUUID;const Zs=function(e){var t,r=e.match,n=e.organizationId,o=e.root,a=Xo();(0,Mo.useEffect)((function(){$s(n)&&a(nt({match:r,organizationId:n,root:o}))}),[a,n,o]);var i=$o((function(e){return e.getIn([h,rt,R])}));return Vs(i)||Xs(i)?(0,Zo.jsx)(qs,{children:(0,Zo.jsx)(Qo.Spinner,{size:"2x"})}):(0,Zo.jsxs)(zo.Switch,{children:[(0,Zo.jsx)(zo.Route,{path:"".concat(o,"/new"),render:function(){return(0,Zo.jsx)(Ks,{})}}),(0,Zo.jsx)(zo.Route,{path:_e()(t="".concat(o)).call(t,Eo),render:function(){return(0,Zo.jsx)(Fs,{})}}),(0,Zo.jsx)(zo.Route,{render:function(){return(0,Zo.jsx)(da,{})}})]})};function ec(e){var t=e.children;return(0,Zo.jsx)(Yo.Provider,{context:Vo,store:Ko,children:(0,Zo.jsx)(i.ConnectedRouter,{history:Po,context:Vo,children:t})})}const tc=function(e){var t=e.match,r=e.organizationId,n=e.root;return(0,Zo.jsx)(ec,{children:(0,Zo.jsx)(Zs,{match:t,organizationId:r,root:n})})}})(),n})()}));