/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openlatticeAccessRequest=t():e.openlatticeAccessRequest=t()}(self,(function(){return(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a:a}),a},d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{AccessRequestContainer:()=>zs,initializeAccessRequestStore:()=>Ja});require("core-js/modules/web.dom-collections.iterator.js");const a=require("immutable");var i=e.n(a);const s=require("@redux-saga/core");var n=e.n(s);const r=require("connected-react-router/immutable"),o=require("redux"),c=require("lattice-auth"),l=require("redux-immutable"),d=require("lattice-utils"),u=require("redux-reqseq"),{APP:p,AUTH:m,EDM:h,ENTITY_SETS:f,ENTITY_SETS_INDEX_MAP:y,ENTITY_TYPES:S,ENTITY_TYPES_INDEX_MAP:E,ERROR:g,PROPERTY_TYPES:I,PROPERTY_TYPES_INDEX_MAP:A,REQUEST_STATE:T}=d.ReduxConstants,b={[g]:!1,[T]:u.RequestStates.STANDBY},C=require("@babel/runtime-corejs3/core-js-stable/instance/filter");var N=e.n(C);const R=require("@babel/runtime-corejs3/core-js-stable/instance/includes");var D=e.n(R);const w=(0,u.newRequestSequence)("GET_FORMS"),_=(0,u.newRequestSequence)("GET_ALL_ACCESS_REQUESTS"),v=(0,u.newRequestSequence)("GET_ACCESS_REQUEST"),j=(0,u.newRequestSequence)("SUBMIT_ACCESS_REQUEST"),x=(0,u.newRequestSequence)("UPDATE_ACCESS_REQUEST"),U=(0,u.newRequestSequence)("GET_ATTACHMENTS"),q=(0,u.newRequestSequence)("UPLOAD_ATTACHMENTS"),P=(0,u.newRequestSequence)("DELETE_ATTACHMENTS"),{REQUEST_STATE:L}=d.ReduxConstants,{getEntityKeyId:O}=d.DataUtils;const{REQUEST_STATE:M}=d.ReduxConstants;const{REQUEST_STATE:k}=d.ReduxConstants;const{REQUEST_STATE:F}=d.ReduxConstants;const{REQUEST_STATE:H}=d.ReduxConstants;const{REQUEST_STATE:Q}=d.ReduxConstants;const{REQUEST_STATE:B}=d.ReduxConstants;const{REQUEST_STATE:W}=d.ReduxConstants;const Y=e=>({path:e,type:"RESET_REQUEST_STATE"});function G(e,t){const{path:a}=t;return a&&e.hasIn(a)?e.setIn([...a,g],!1).setIn([...a,T],u.RequestStates.STANDBY):e}const{HITS:z}=d.ReduxConstants,V=(0,a.fromJS)({accessRequest:(0,a.Map)(),attachments:(0,a.List)(),GET_ALL_ACCESS_REQUESTS:b,GET_ATTACHMENTS:b,GET_FORMS:b,[z]:(0,a.List)(),SUBMIT_ACCESS_REQUEST:b,UPDATE_ACCESS_REQUEST:b,UPLOAD_ATTACHMENTS:b});function J(e=V,t){switch(t.type){case"RESET_REQUEST_STATE":return G(e,t);case"SELECT_ACCESS_REQUEST":return e.set("accessRequest",t.value);case"CLEAR_ACCESS_REQUEST":return e.set("accessRequest",V.get("accessRequest"));case w.case(t.type):return function(e,t){return w.reducer(e,t,{REQUEST:()=>e.setIn(["GET_FORMS",H],u.RequestStates.PENDING),SUCCESS:()=>e.merge(t.value).setIn(["GET_FORMS",H],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["GET_FORMS",H],u.RequestStates.FAILURE)})}(e,t);case v.case(t.type):return function(e,t){return v.reducer(e,t,{REQUEST:()=>e.setIn(["GET_ACCESS_REQUEST",M],u.RequestStates.PENDING),SUCCESS:()=>e.merge(t.value).setIn(["GET_ACCESS_REQUEST",M],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["GET_ACCESS_REQUEST",M],u.RequestStates.FAILURE)})}(e,t);case _.case(t.type):return function(e,t){return _.reducer(e,t,{REQUEST:()=>e.setIn(["GET_ALL_ACCESS_REQUESTS",k],u.RequestStates.PENDING),SUCCESS:()=>e.merge(t.value).setIn(["GET_ALL_ACCESS_REQUESTS",k],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["GET_ALL_ACCESS_REQUESTS",k],u.RequestStates.FAILURE)})}(e,t);case j.case(t.type):return function(e,t){return j.reducer(e,t,{REQUEST:()=>e.setIn(["SUBMIT_ACCESS_REQUEST",Q],u.RequestStates.PENDING),SUCCESS:()=>e.set("accessRequest",t.value).setIn(["SUBMIT_ACCESS_REQUEST",Q],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["SUBMIT_ACCESS_REQUEST",Q],u.RequestStates.FAILURE)})}(e,t);case x.case(t.type):return function(e,t){return x.reducer(e,t,{REQUEST:()=>{const{path:a,formData:i}=t.value;return e.setIn(a,i).setIn(["UPDATE_ACCESS_REQUEST",B],u.RequestStates.PENDING)},SUCCESS:()=>e.setIn(["UPDATE_ACCESS_REQUEST",B],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["UPDATE_ACCESS_REQUEST",B],u.RequestStates.FAILURE)})}(e,t);case U.case(t.type):return function(e,t){return U.reducer(e,t,{REQUEST:()=>e.setIn(["GET_ATTACHMENTS",F],u.RequestStates.PENDING),SUCCESS:()=>{const{data:a}=t.value;return e.set("attachments",a).setIn(["GET_ATTACHMENTS",F],u.RequestStates.SUCCESS)},FAILURE:()=>e.setIn(["GET_ATTACHMENTS",F],u.RequestStates.FAILURE)})}(e,t);case q.case(t.type):return function(e,t){return q.reducer(e,t,{REQUEST:()=>e.setIn(["UPLOAD_ATTACHMENTS",W],u.RequestStates.PENDING),SUCCESS:()=>e.setIn(["UPLOAD_ATTACHMENTS",W],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["UPLOAD_ATTACHMENTS",W],u.RequestStates.FAILURE)})}(e,t);case P.case(t.type):return function(e,t){return P.reducer(e,t,{REQUEST:()=>e.setIn(["DELETE_ATTACHMENTS",L],u.RequestStates.PENDING),SUCCESS:()=>{var a;const{value:i}=t,s=N()(a=e.get("attachments")).call(a,e=>{const t=O(e);return!D()(i).call(i,t)});return e.set("attachments",s).setIn(["DELETE_ATTACHMENTS",L],u.RequestStates.SUCCESS)},FAILURE:()=>e.setIn(["DELETE_ATTACHMENTS",L],u.RequestStates.FAILURE)})}(e,t);default:return e}}require("core-js/modules/es.promise.finally.js");const K=require("@babel/runtime-corejs3/core-js-stable/instance/reduce");var X=e.n(K);const Z=require("@redux-saga/core/effects"),$=require("lattice-sagas"),ee=(0,u.newRequestSequence)("GET_EDM_TYPES"),te=new d.Logger("EDMSagas"),{isDefined:ae}=d.LangUtils,{getAllEntityTypes:ie,getAllPropertyTypes:se}=$.EntityDataModelApiActions,{getAllEntityTypesWorker:ne,getAllPropertyTypesWorker:re}=$.EntityDataModelApiSagas;function*oe(e){let t;try{yield(0,Z.put)(ee.request(e.id));const a=yield(0,Z.all)([(0,Z.call)(ne,ie()),(0,Z.call)(re,se())]),i=X()(a).call(a,(e,t)=>ae(e)?e:t.error,void 0);if(i)throw i;t={data:{[S]:a[0].data,[I]:a[1].data}},yield(0,Z.put)(ee.success(e.id,t.data))}catch(a){t={error:a},te.error(e.type,a),yield(0,Z.put)(ee.failure(e.id,a))}finally{yield(0,Z.put)(ee.finally(e.id))}return t}function*ce(){yield(0,Z.takeEvery)("GET_EDM_TYPES",oe)}const le=Error("invalid parameter: action.value is required and must be defined"),de=Error("invalid parameter: action.value is the incorrect type"),ue=(Error('invalid route: a route must be a non-empty string that starts with "/"'),Error("invalid uuid"),Error("unexpected state"),Error("caught exception in worker saga"),(0,u.newRequestSequence)("INITIALIZE_APPLICATION")),{getApp:pe,getAppConfigs:me}=$.AppApiActions,{getAppWorker:he,getAppConfigsWorker:fe}=$.AppApiSagas,{isValidUUID:ye}=d.ValidationUtils,{isDefined:Se}=d.LangUtils,Ee=new d.Logger("AppSagas");function*ge(e){const t={};try{var a;const{value:{match:i,organizationId:s,root:n}}=e;if(!ye(s))throw de;if("string"!=typeof n)throw de;if(!Se(i))throw de;yield(0,Z.put)(ue.request(e.id));const r=yield(0,Z.all)([(0,Z.call)(oe,ee()),(0,Z.call)(he,pe("access_requests"))]);if(r[0].error)throw r[0].error;if(r[1].error)throw r[1].error;const o=r[1].data,c=yield(0,Z.call)(fe,me(o.id));if(c.error)throw c.error;const l=X()(a=c.data).call(a,(e,t)=>{let a=e;return t.organization.id===s&&(a=t),a},{});t.data={appConfig:l,root:n,match:i},yield(0,Z.put)(ue.success(e.id,t.data))}catch(t){Ee.error(e.type,t),yield(0,Z.put)(ue.failure(e.id,t))}finally{yield(0,Z.put)(ue.finally(e.id))}}function*Ie(){yield(0,Z.takeEvery)("INITIALIZE_APPLICATION",ge)}const{REQUEST_STATE:Ae}=d.ReduxConstants;const Te=(0,a.fromJS)({INITIALIZE_APPLICATION:b,appConfig:{},root:"/",match:{}}),be=["app","appConfig","config"],Ce=["app","root"],Ne=["app","match"];function Re(e=Te,t){switch(t.type){case"RESET_REQUEST_STATE":return G(e,t);case ue.case(t.type):return function(e,t){switch(t.type){case"SET_ROOT":{const{value:a}=t;return e.set("root",a)}case ue.case(t.type):{const a=t;return ue.reducer(e,a,{REQUEST:()=>e.setIn(["INITIALIZE_APPLICATION",Ae],u.RequestStates.PENDING),SUCCESS:()=>e.merge(t.value).setIn(["INITIALIZE_APPLICATION",Ae],u.RequestStates.SUCCESS),FAILURE:()=>e.setIn(["INITIALIZE_APPLICATION",Ae],u.RequestStates.FAILURE)})}default:return e}}(e,t);default:return e}}const De=require("@babel/runtime-corejs3/core-js-stable/instance/for-each");var we=e.n(De);const _e=require("lattice"),{EntityTypeBuilder:ve,PropertyTypeBuilder:je}=_e.Models;const{EntitySetBuilder:xe}=_e.Models,{GET_ENTITY_SET:Ue,getEntitySet:qe}=$.EntitySetsApiActions;const Pe=require("@babel/runtime-corejs3/core-js-stable/object/values");var Le=e.n(Pe);const{EntitySetBuilder:Oe}=_e.Models,{GET_ENTITY_SETS:Me,getEntitySets:ke}=$.EntitySetsApiActions;const{GET_ENTITY_SET:Fe,GET_ENTITY_SETS:He,getEntitySet:Qe,getEntitySets:Be}=$.EntitySetsApiActions,We=(0,a.fromJS)({GET_EDM_TYPES:b,[He]:b,[Fe]:b,[f]:(0,a.List)(),[y]:(0,a.Map)(),[S]:(0,a.List)(),[E]:(0,a.Map)(),[I]:(0,a.List)(),[A]:(0,a.Map)()});function Ye(e=We,t){switch(t.type){case"RESET_REQUEST_STATE":return G(e,t);case ee.case(t.type):return function(e,t){return ee.reducer(e,t,{REQUEST:()=>e.setIn(["GET_EDM_TYPES",T],u.RequestStates.PENDING).setIn(["GET_EDM_TYPES",t.id],t),SUCCESS:()=>{const i=t.value.entityTypes,s=(0,a.List)().asMutable(),n=(0,a.Map)().asMutable();we()(i).call(i,(e,t)=>{const a=new ve(e).build();s.push(a),n.set(a.id,t),n.set(a.type,t)});const r=t.value.propertyTypes,o=(0,a.List)().asMutable(),c=(0,a.Map)().asMutable();return we()(r).call(r,(e,t)=>{const a=new je(e).build();o.push(a),c.set(a.id,t),c.set(a.type,t)}),e.set(S,s.asImmutable()).set(E,n.asImmutable()).set(I,o.asImmutable()).set(A,c.asImmutable()).setIn(["GET_EDM_TYPES",T],u.RequestStates.SUCCESS)},FAILURE:()=>e.set(S,(0,a.List)()).set(E,(0,a.Map)()).set(I,(0,a.List)()).set(A,(0,a.Map)()).setIn(["GET_EDM_TYPES",T],u.RequestStates.FAILURE),FINALLY:()=>e.deleteIn(["GET_EDM_TYPES",t.id])})}(e,t);case Qe.case(t.type):return function(e,t){return qe.reducer(e,t,{REQUEST:()=>e.setIn([Ue,T],u.RequestStates.PENDING).setIn([Ue,t.id],t),SUCCESS:()=>{if(e.hasIn([Ue,t.id])){const a=new xe(t.value).build();let i=e.get(f),s=e.get(y);if(s.has(a.id))i=i.update(s.get(a.id),()=>a);else{i=i.push(a);const e=i.count()-1;s=s.set(a.id,e).set(a.name,e)}return e.set(f,i).set(y,s).setIn([Ue,T],u.RequestStates.SUCCESS)}return e},FAILURE:()=>e.hasIn([Ue,t.id])?e.setIn([Ue,T],u.RequestStates.FAILURE):e,FINALLY:()=>e.deleteIn([Ue,t.id])})}(e,t);case Be.case(t.type):return function(e,t){return ke.reducer(e,t,{REQUEST:()=>e.setIn([Me,T],u.RequestStates.PENDING).setIn([Me,t.id],t),SUCCESS:()=>{if(e.hasIn([Me,t.id])){var a;let i=e.get(f),s=e.get(y);return we()(a=Le()(t.value)).call(a,e=>{const t=new Oe(e).build();if(s.has(t.id))i=i.update(s.get(t.id),()=>t);else{i=i.push(t);const e=i.count()-1;s=s.set(t.id,e).set(t.name,e)}}),e.set(f,i).set(y,s).setIn([Me,T],u.RequestStates.SUCCESS)}return e},FAILURE:()=>e.hasIn([Me,t.id])?e.setIn([Me,T],u.RequestStates.FAILURE):e,FINALLY:()=>e.deleteIn([Me,t.id])})}(e,t);default:return e}}const Ge=require("@babel/runtime-corejs3/core-js-stable/array/is-array");var ze=e.n(Ge);const Ve=require("@babel/runtime-corejs3/core-js-stable/instance/every");var Je=e.n(Ve);function Ke(e,t){return(0,a.getIn)(e,[t,"entitySetId"])}const Xe=(0,u.newRequestSequence)("DELETE_BULK_ENTITIES"),{FQN:Ze}=_e.Models,$e={ACCESS_REQUEST_SUBMISSION:Ze.of("app.accessrequestsubmission"),ATTACHED_TO:Ze.of("app.attachedto"),FILE:Ze.of("app.file"),FORM:Ze.of("app.form")},{FQN:et}=_e.Models,tt={DATE_TIME:et.of("ol.datetime"),DESCRIPTION:et.of("ol.description"),FILE_DATA:et.of("ol.filedata"),FORM_DATA:et.of("ol.formdata"),ID:et.of("ol.id"),LABEL:et.of("ol.label"),NAME:et.of("ol.name"),REQUEST_DATE_TIME:et.of("ol.requestdatetime"),RJSF_JSON_SCHEMA:et.of("ol.rjsfjsonschema"),RJSF_UI_SCHEMA:et.of("ol.rjsfuischema"),TYPE:et.of("ol.type")},at=require("@babel/runtime-corejs3/core-js-stable/instance/map");var it=e.n(at);const st=require("@babel/runtime-corejs3/core-js-stable/object/keys");var nt=e.n(st);const rt=require("@babel/runtime-corejs3/core-js-stable/array/from");var ot=e.n(rt);const ct=new d.Logger("DataSagas"),{DeleteTypes:lt}=_e.Types,{deleteEntityData:dt}=$.DataApiActions,{deleteEntityDataWorker:ut}=$.DataApiSagas;function*pt(e){const t={};try{var a;const{value:t}=e;if(null==t)throw le;yield(0,Z.put)(Xe.request(e.id));const i=it()(a=nt()(t)).call(a,e=>{const a=ot()(t[e]);return(0,Z.call)(ut,dt({entitySetId:e,entityKeyIds:a,deleteType:lt.SOFT}))}),s=yield(0,Z.all)(i),n=X()(s).call(s,(e,t)=>(e.error=e.error||t.error,e),{});if(n.error)throw n;yield(0,Z.put)(Xe.success(e.id))}catch(a){ct.error(e.type,a),t.error=a,yield(0,Z.put)(Xe.failure(e.id,a))}finally{yield(0,Z.put)(Xe.finally(e.id))}return t}const{isValidUUID:mt}=d.ValidationUtils,{FILE:ht}=$e,ft=new d.Logger("AccessSagas");function*yt(e){let t={};try{const{value:a}=e;if(ze()(a)&&!Je()(a).call(a,mt))throw de;yield(0,Z.put)(P.request(e.id));const i=yield(0,Z.select)(e=>e.getIn(be)),s={[Ke(i,ht)]:a},n=yield(0,Z.call)(pt,Xe(s));if(n.error)throw n.error;t={data:s},yield(0,Z.put)(P.success(e.id,a))}catch(a){ft.error(e.type,a),t={error:a},yield(0,Z.put)(P.failure(e.id,a))}finally{yield(0,Z.put)(P.finally(e.id))}return t}function*St(){yield(0,Z.takeEvery)("DELETE_ATTACHMENTS",yt)}const{isValidUUID:Et}=d.ValidationUtils,{getEntityData:gt}=$.DataApiActions,{getEntityDataWorker:It}=$.DataApiSagas,{ACCESS_REQUEST_SUBMISSION:At}=$e,Tt=new d.Logger("getAccessRequestSagas");function*bt(e){let t;try{const{value:i}=e;if(!Et(i))throw de;yield(0,Z.put)(v.request(e.id));const s=Ke(yield(0,Z.select)(e=>e.getIn(be)),At),n=yield(0,Z.call)(It,gt({entitySetId:s,entityKeyId:i}));if(n.error)throw n.error;t={data:(0,a.fromJS)(n.data)},yield(0,Z.put)(v.success(e.id,{accessRequest:t.data}))}catch(a){t={error:a},Tt.error(e.type,a),yield(0,Z.put)(v.failure(e.id,a))}finally{yield(0,Z.put)(v.finally(e.id))}return t}function*Ct(){yield(0,Z.takeEvery)("GET_ACCESS_REQUEST",bt)}const Nt=require("lodash/isArray");var Rt=e.n(Nt);const{FQN:Dt}=_e.Models,wt=(0,a.Map)();function _t(e){return t=>{if(!Rt()(e)&&!(0,a.isCollection)(e))return wt;const i=(0,a.Map)().withMutations(i=>{we()(e).call(e,e=>{if(Dt.isValid(e)){const s=(0,a.getIn)(t,[h,A,e],-1);if(s>=0){const n=(0,a.getIn)(t,[h,I,s]);n&&n.id&&i.set(e,n.id)}}})});return i.isEmpty()?wt:i}}const{HITS:vt}=d.ReduxConstants;function jt(){return e=>e.getIn(["access","accessRequest"],(0,a.List)())}const{selectEntitySets:xt,selectEntityTypes:Ut,selectOrganization:qt,selectPropertyTypes:Pt}=d.ReduxUtils,{searchEntitySetData:Lt}=$.SearchApiActions,{searchEntitySetDataWorker:Ot}=$.SearchApiSagas,{ACCESS_REQUEST_SUBMISSION:Mt}=$e,{REQUEST_DATE_TIME:kt}=tt,Ft=new d.Logger("getAllAccessRequestsSagas");function*Ht(e){let t;try{yield(0,Z.put)(_.request(e.id));const i=Ke(yield(0,Z.select)(e=>e.getIn(be)),Mt),s=(yield(0,Z.select)(_t([kt]))).get(kt),n=yield(0,Z.call)(Ot,Lt({entitySetIds:[i],maxHits:1e4,start:0,constraints:[{constraints:[{type:"simple",searchTerm:"*",fuzzy:!1}]}],sort:{propertyTypeId:s,type:"field"}}));if(n.error)throw n.error;t={data:n.data},yield(0,Z.put)(_.success(e.id,{hits:(0,a.fromJS)(n.data.hits)}))}catch(a){t={error:a},Ft.error(e.type,a),yield(0,Z.put)(_.failure(e.id,a))}finally{yield(0,Z.put)(_.finally(e.id))}return t}function*Qt(){yield(0,Z.takeEvery)("GET_ALL_ACCESS_REQUESTS",Ht)}const Bt=new d.Logger("DocumentsSagas"),{isValidUUID:Wt}=d.ValidationUtils,{searchEntityNeighborsWithFilter:Yt}=$.SearchApiActions,{searchEntityNeighborsWithFilterWorker:Gt}=$.SearchApiSagas,{FILE:zt,ATTACHED_TO:Vt,ACCESS_REQUEST_SUBMISSION:Jt}=$e;function*Kt(e){const t={};try{var i;const{value:s}=e;if(!Wt(s))throw de;yield(0,Z.put)(U.request(e.id));const n=yield(0,Z.select)(e=>e.getIn(be)),r=Ke(n,Jt),o=Ke(n,zt),c={entitySetId:r,filter:{entityKeyIds:[s],edgeEntitySetIds:[Ke(n,Vt)],destinationEntitySetIds:[],sourceEntitySetIds:[o]}},l=yield(0,Z.call)(Gt,Yt(c));if(l.error)throw l.error;const d=it()(i=(0,a.fromJS)(l.data).get(s,(0,a.List)())).call(i,e=>e.get("neighborDetails"));t.data=d,yield(0,Z.put)(U.success(e.id,{data:d}))}catch(t){Bt.error(e.type,t),yield(0,Z.put)(U.failure(e.id))}finally{yield(0,Z.put)(U.finally(e.id))}return t}function*Xt(){yield(0,Z.takeLatest)("GET_ATTACHMENTS",Kt)}const Zt=require("@babel/runtime-corejs3/core-js-stable/json/stringify");var $t=e.n(Zt);const ea=require("lodash/isPlainObject");var ta=e.n(ea);const aa=require("luxon"),{OPENLATTICE_ID_FQN:ia}=_e.Constants,{createOrMergeEntityData:sa}=$.DataApiActions,{createOrMergeEntityDataWorker:na}=$.DataApiSagas,{ACCESS_REQUEST_SUBMISSION:ra}=$e,{FORM_DATA:oa,REQUEST_DATE_TIME:ca,RJSF_JSON_SCHEMA:la,RJSF_UI_SCHEMA:da,TYPE:ua}=tt,pa=new d.Logger("submitAccessRequestSagas");function*ma(e){let t;try{const{value:i}=e;if(!ta()(i))throw de;yield(0,Z.put)(j.request(e.id));const s=Ke(yield(0,Z.select)(e=>e.getIn(be)),ra),{formData:n,schema:r,uiSchema:o,type:c}=i,l=yield(0,Z.select)(_t([oa,ca,la,da,ua])),d=l.get(oa),u=l.get(ca),p=l.get(la),m=l.get(da),h=l.get(ua),f=$t()(n),y=$t()(r),S=$t()(o),E=aa.DateTime.local().toISO(),g=[{[h]:[c||"Common Application"],[d]:[f],[p]:[y],[m]:[S],[u]:[E]}],I=yield(0,Z.call)(na,sa({entitySetId:s,entityData:g}));if(I.error)throw I.error;t={data:(0,a.Map)({[ua]:[c||"Common Application"],[oa]:[f],[la]:[y],[da]:[S],[ca]:[E],[ia]:I.data})},yield(0,Z.put)(j.success(e.id,t.data))}catch(a){t={error:a},pa.error(e.type,a),yield(0,Z.put)(j.failure(e.id,a))}finally{yield(0,Z.put)(j.finally(e.id))}return t}function*ha(){yield(0,Z.takeEvery)("SUBMIT_ACCESS_REQUEST",ma)}const{updateEntityData:fa}=$.DataApiActions,{updateEntityDataWorker:ya}=$.DataApiSagas,{UpdateTypes:Sa}=_e.Types,{ACCESS_REQUEST_SUBMISSION:Ea}=$e,{FORM_DATA:ga}=tt,Ia=new d.Logger("updateAccessRequest");function*Aa(e){let t;try{const{value:a}=e;if(!ta()(a))throw de;const{formData:i,entityKeyId:s}=a,n=$t()(i);yield(0,Z.put)(x.request(e.id,{path:["accessRequest",ga.toString(),0],formData:n}));const r=Ke(yield(0,Z.select)(e=>e.getIn(be)),Ea),o=yield(0,Z.select)(_t([ga])),c={[s]:{[o.get(ga)]:[n]}},l=yield(0,Z.call)(ya,fa({entitySetId:r,entities:c,updateType:Sa.PartialReplace}));if(l.error)throw l.error;t={data:l.data},yield(0,Z.put)(x.success(e.id))}catch(a){t={error:a},Ia.error(e.type,a),yield(0,Z.put)(x.failure(e.id,a))}finally{yield(0,Z.put)(x.finally(e.id))}return t}function*Ta(){yield(0,Z.takeEvery)("UPDATE_ACCESS_REQUEST",Aa)}const ba=require("@babel/runtime-corejs3/core-js-stable/instance/index-of");var Ca=e.n(ba);const Na=function(e){const t=Ca()(e).call(e,";base64,");return t<0?e:e.substring(t+";base64,".length)},{DataGraphBuilder:Ra}=_e.Models,{ACCESS_REQUEST_SUBMISSION:Da,ATTACHED_TO:wa,FILE:_a}=$e,{DATE_TIME:va,FILE_DATA:ja,LABEL:xa,NAME:Ua,TYPE:qa}=tt,Pa=new d.Logger("DocumentsSagas");function*La(e){let t;try{yield(0,Z.put)(q.request(e.id));const{files:a,accessRequestId:i}=e.value,s=yield(0,Z.select)(e=>e.getIn(be)),n=Ke(s,Da),r=Ke(s,_a),o=Ke(s,wa),c=yield(0,Z.select)(_t([va,ja,xa,Ua,qa])),l=c.get(va),d=c.get(ja),u=c.get(Ua),p=c.get(qa),m=aa.DateTime.local().toISO(),h=it()(a).call(a,({base64:e,name:t,type:a})=>({[l]:[m],[p]:[a],[u]:[t],[d]:[{"content-type":a,data:Na(e)}]})),f={[l]:[m]},y=[];we()(a).call(a,(e,t)=>{y.push({srcEntitySetId:r,srcEntityIndex:t,dstEntitySetId:n,dstEntityKeyId:i,data:f})});const S={[r]:h},E={[o]:y},g=(new Ra).setAssociations(E).setEntities(S).build(),I=yield(0,Z.call)(_e.DataApi.createEntityAndAssociationData,g);if(I.error)throw I.error;t={data:{}},yield(0,Z.put)(q.success(e.id))}catch(a){Pa.error(e.type,a),t={error:a},yield(0,Z.put)(q.failure(e.id,a))}finally{yield(0,Z.put)(q.finally(e.id))}return t}function*Oa(){yield(0,Z.takeEvery)("UPLOAD_ATTACHMENTS",La)}const Ma=require("history");const ka="/request/".concat(":accessRequestId");const Fa=require("@babel/runtime-corejs3/core-js-stable/instance/starts-with");var Ha=e.n(Fa);const Qa=require("connected-react-router"),Ba=new d.Logger("RoutingSagas");function*Wa(e){const{route:t,state:a={}}=e;if(null==t||!Ha()(t).call(t,"/",0))return Ba.error('invalid route: a route must be a non-empty string that starts with "/"',t),void(yield(0,Z.put)(function(e,t){return{route:t,error:e,type:"ROUTING_FAILURE"}}('invalid route: a route must be a non-empty string that starts with "/"',t)));yield(0,Z.put)((0,Qa.push)({state:$t()(a),pathname:t}))}function*Ya(){yield(0,Z.takeEvery)("GO_TO_ROUTE",Wa)}function*Ga(){yield(0,Z.takeEvery)("GO_TO_ROOT",Wa)}const za=(0,Ma.createHashHistory)();function*Va(){yield(0,Z.all)([(0,Z.fork)(c.AuthSagas.watchAuthAttempt),(0,Z.fork)(c.AuthSagas.watchAuthSuccess),(0,Z.fork)(c.AuthSagas.watchAuthFailure),(0,Z.fork)(c.AuthSagas.watchAuthExpired),(0,Z.fork)(c.AuthSagas.watchLogout),(0,Z.fork)(Ie),(0,Z.fork)(ce),(0,Z.fork)(Ga),(0,Z.fork)(Ya),(0,Z.fork)(Ct),(0,Z.fork)(Xt),(0,Z.fork)(Qt),(0,Z.fork)(ha),(0,Z.fork)(Ta),(0,Z.fork)(Oa),(0,Z.fork)(St)])}function Ja(e){const t=n()(),a=[t,(0,r.routerMiddleware)(e)],s=[(0,o.applyMiddleware)(...a)],d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({stateSanitizer:e=>e.setIn(["edm","entityTypes"],"HIDDEN").setIn(["edm","entityTypesIndexMap"],"HIDDEN").setIn(["edm","propertyTypes"],"HIDDEN").setIn(["edm","propertyTypesIndexMap"],"HIDDEN"),maxAge:100}):o.compose,u=(0,o.createStore)(function(e){return(0,l.combineReducers)({access:J,[p]:Re,[m]:c.AuthReducer,[h]:Ye,router:(0,r.connectRouter)(e)})}(e),i().Map(),d(...s));return t.run(Va),u}const Ka=require("@babel/runtime-corejs3/core-js-stable/instance/concat");var Xa=e.n(Ka);const Za=require("react"),$a=require("lattice-ui-kit"),ei=require("react-router-dom"),ti=require("styled-components");var ai=e.n(ti);const ii=require("@babel/runtime-corejs3/core-js-stable/instance/slice");var si=e.n(ii);const ni=require("react-redux"),ri=Ja(za),oi=(0,Za.createContext)(null),ci=((0,ni.createStoreHook)(oi),(0,ni.createDispatchHook)(oi)),li=(0,ni.createSelectorHook)(oi),di=require("react/jsx-runtime"),{OPENLATTICE_LAST_WRITE_FQN:ui}=_e.Constants,{REQUEST_DATE_TIME:pi,TYPE:mi}=tt,{getPropertyValue:hi}=d.DataUtils,fi=({data:e,to:t})=>{var a,i;const s=ci(),n=hi(e,[mi,0]),r=hi(e,[pi,0]),o=hi(e,[ui,0]),c=aa.DateTime.fromISO(r),l=aa.DateTime.fromISO(o),d=c.toLocaleString(aa.DateTime.DATE_SHORT);let u="Created: ".concat(d);const p=l.diff(c,"seconds"),{seconds:m}=p;if(m>1){const e=l.toRelative({style:"short"});u=Xa()(u).call(u," · Updated: ".concat(e))}const h=it()(a=si()(i=n.split(" ")).call(i,0,2)).call(a,e=>e.charAt(0).toUpperCase()).join("");return(0,di.jsxs)($a.ListItem,{button:!0,component:ei.Link,disableGutters:!0,onClick:()=>{s({type:"SELECT_ACCESS_REQUEST",value:e})},to:t,children:[(0,di.jsx)($a.ListItemAvatar,{children:(0,di.jsx)($a.Avatar,{children:h})}),(0,di.jsx)($a.ListItemText,{primary:n,secondary:u})]})},yi=(require("core-js/modules/es.string.replace.js"),require("@babel/runtime-corejs3/core-js-stable/object/entries"));var Si=e.n(yi);const Ei=(e,t)=>{var a;return t.params?X()(a=Si()(t.params)).call(a,(e,[t,a])=>e.replace(RegExp(":".concat(t),"g"),a),e):e},{getEntityKeyId:gi}=d.DataUtils,Ii=()=>{const e=ci(),t=li(e=>e.getIn(["access",vt],(0,a.List)())),i=li(e=>e.getIn(Ce)),s=li(e=>e.getIn(Ne)),n=Ei(i,s);return(0,Za.useEffect)(()=>{e(_())},[e]),(0,di.jsx)($a.List,{children:it()(t).call(t,e=>{var t;const a=gi(e)||"";return(0,di.jsx)(fi,{data:e,to:Xa()(t="".concat(n,"/request/")).call(t,a)},a)})})},Ai=ai().div.withConfig({displayName:"AllRequestsContainer__HeaderRow",componentId:"k7n8n2-0"})(["display:flex;justify-content:space-between;align-items:center;"]),Ti=()=>{const e=li(e=>e.getIn(Ce)),t=li(e=>e.getIn(Ne)),a=Ei(e,t);return(0,di.jsxs)("div",{children:[(0,di.jsxs)(Ai,{children:[(0,di.jsx)($a.Typography,{variant:"h1",children:"Access Requests"}),(0,di.jsx)($a.Button,{color:"primary",component:ei.Link,to:"".concat(a,"/new"),children:"New Request"})]}),(0,di.jsx)(Ii,{})]})},bi=require("react-router"),Ci=require("react-to-print"),Ni=require("@fortawesome/pro-regular-svg-icons/faEllipsisV"),Ri=require("@fortawesome/react-fontawesome"),Di=require("@fortawesome/pro-light-svg-icons/faFilePdf"),wi=require("@fortawesome/pro-light-svg-icons/faFileWord"),_i=require("@fortawesome/pro-regular-svg-icons/faDownload"),vi=require("@fortawesome/pro-regular-svg-icons/faTrashAlt"),ji=("".concat("audio/","*"),"".concat("image/","*")),xi=("".concat("video/","*"),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"),Ui={"application/pdf":Di.faFilePdf,[xi]:wi.faFileWord},{getEntityKeyId:qi,getPropertyValue:Pi}=d.DataUtils,{DATE_TIME:Li,FILE_DATA:Oi,NAME:Mi,TYPE:ki}=tt,Fi=ai().img.withConfig({displayName:"AttachmentItem__ImagePreview",componentId:"olj6j0-0"})(["max-height:40px;max-width:40px;"]),Hi=({divider:e,file:t,onDelete:a})=>{var i;const s=qi(t),n=Pi(t,[Mi,0]),r=Pi(t,[ki,0]),o=Pi(t,[Oi,0]),c=Pi(t,[Li,0]),l=aa.DateTime.fromISO(c).toLocaleString(aa.DateTime.DATE_SHORT);let d;we()(i=Si()(Ui)).call(i,([e,t])=>{Ha()(r).call(r,e)&&(d=t)});const u=d?(0,di.jsx)(Ri.FontAwesomeIcon,{fixedWidth:!0,icon:d,size:"2x"}):(0,di.jsx)(Fi,{src:o});return(0,di.jsxs)($a.ListItem,{divider:e,children:[(0,di.jsx)($a.ListItemAvatar,{children:u}),(0,di.jsx)($a.ListItemText,{primary:n,secondary:l}),(0,di.jsxs)($a.ListItemSecondaryAction,{children:[(0,di.jsx)("a",{"aria-label":"Download",download:!0,href:o,rel:"noreferrer",target:"_blank",title:"Download",children:(0,di.jsx)($a.IconButton,{children:(0,di.jsx)(Ri.FontAwesomeIcon,{icon:_i.faDownload,fixedWidth:!0})})}),(0,di.jsx)($a.IconButton,{"aria-label":"Delete",onClick:()=>{a(s)},title:"Delete",children:(0,di.jsx)(Ri.FontAwesomeIcon,{fixedWidth:!0,icon:vi.faTrashAlt})})]})]})},{getEntityKeyId:Qi}=d.DataUtils,Bi=({accessRequestId:e})=>{const t=li(e=>e.getIn(["access","attachments"])),a=ci();(0,Za.useEffect)(()=>{a(U(e))},[e,a]);const i=e=>{a(P([e]))};return(0,di.jsx)($a.List,{children:it()(t).call(t,(e,a)=>{const s=Qi(e),n=a!==t.size-1;return(0,di.jsx)(Hi,{divider:n,file:e,onDelete:i},s)})})},Wi=require("@babel/runtime-corejs3/helpers/defineProperty");var Yi=e.n(Wi);const Gi=require("@babel/runtime-corejs3/core-js-stable/instance/splice");var zi=e.n(Gi);const Vi={"application/pdf":Di.faFilePdf,[xi]:wi.faFileWord},Ji=ai().img.withConfig({displayName:"DocumentItem__ImagePreview",componentId:"sc-15vefxs-0"})(["max-height:40px;max-width:40px;"]),Ki=({divider:e,file:t,index:a,onDelete:i})=>{var s;const{name:n,type:r,base64:o}=t;let c;we()(s=Si()(Vi)).call(s,([e,t])=>{Ha()(r).call(r,e)&&(c=t)});const l=c?(0,di.jsx)(Ri.FontAwesomeIcon,{fixedWidth:!0,icon:c,size:"2x"}):(0,di.jsx)(Ji,{src:o});return(0,di.jsxs)($a.ListItem,{divider:e,children:[(0,di.jsx)($a.ListItemAvatar,{children:l}),(0,di.jsx)($a.ListItemText,{primary:n}),(0,di.jsx)($a.ListItemSecondaryAction,{children:(0,di.jsx)($a.IconButton,{"aria-label":"Remove",onClick:()=>{i(a)},title:"Remove",children:(0,di.jsx)(Ri.FontAwesomeIcon,{fixedWidth:!0,icon:vi.faTrashAlt})})})]})},Xi=require("react-dropzone"),{BLUE:Zi,NEUTRAL:$i,PURPLE:es,RED:ts}=$a.Colors,as=[ji,"application/pdf",xi],is=ai().div.withConfig({displayName:"Dropzone__DropzoneWrapper",componentId:"j9e9j-0"})(["align-items:center;background-color:",";border-color:",";border-radius:3px;border-style:dashed;border-width:2px;display:flex;flex-direction:column;flex:1;outline:none;padding:32px;transition:border 250ms ease-in-out;"],$i.N50,e=>(e=>e.isDragAccept?es.P300:e.isDragReject?ts.R300:e.isDragActive?Zi.B300:$i.N100)(e)),ss=e=>{const{onDrop:t}=e,{getRootProps:a,getInputProps:i,isDragActive:s,isDragAccept:n,isDragReject:r}=(0,Xi.useDropzone)({accept:as.join(","),onDrop:t}),{onBlur:o,onClick:c,onDragEnter:l,onDragLeave:d,onDragOver:u,onDrop:p,onFocus:m,onKeyDown:h,ref:f,tabIndex:y}=a(),{accept:S,autoComplete:E,multiple:g,onChange:I,onClick:A,ref:T,style:b,tabIndex:C,type:N}=i();return(0,di.jsxs)(is,{isDragActive:s,isDragAccept:n,isDragReject:r,onBlur:o,onClick:c,onDragEnter:l,onDragLeave:d,onDragOver:u,onDrop:p,onFocus:m,onKeyDown:h,ref:f,tabIndex:y,children:[(0,di.jsx)("input",{accept:S,autoComplete:E,multiple:g,onChange:I,onClick:A,ref:T,style:b,tabIndex:C,type:N}),(0,di.jsx)($a.Typography,{component:"span",children:"Drop files here or click to select."})]})},ns=({onChange:e})=>{const t=(0,Za.useCallback)(t=>e(t),[e]);return(0,di.jsx)(ss,{onDrop:e=>{we()(e).call(e,e=>{const{name:a,type:i}=e,s=new FileReader;s.onload=()=>{const e=s.result;t({file:{base64:e,name:a,type:i}})},s.readAsDataURL(e)})}})},{isSuccess:rs,isPending:os}=d.ReduxUtils;class cs extends Za.Component{constructor(e){super(e),Yi()(this,"getInitialState",()=>({files:[],tags:[]})),Yi()(this,"onDrop",({file:e})=>{const{files:t}=this.state;this.setState({files:[...t,e]})}),Yi()(this,"onDelete",e=>{const{files:t}=this.state;zi()(t).call(t,e,1),this.setState({files:t})}),Yi()(this,"onUpload",()=>{const{accessRequestId:e,actions:t}=this.props,{files:a,tags:i}=this.state;t.uploadAttachments({files:a,tags:i,accessRequestId:e})}),this.state=this.getInitialState()}componentDidUpdate(){const{requestState:e,onSuccess:t}=this.props;rs(e)&&t()}componentWillUnmount(){const{actions:e}=this.props;e.resetRequestState(["UPLOAD_ATTACHMENTS"])}render(){const{files:e}=this.state,{requestState:t}=this.props;return(0,di.jsxs)("div",{children:[(0,di.jsx)(ns,{onChange:this.onDrop}),(0,di.jsx)($a.List,{children:it()(e).call(e,(t,a)=>{const i=a!==e.length-1;return(0,di.jsx)(Ki,{divider:i,file:t,index:a,onDelete:this.onDelete})})}),(0,di.jsx)($a.Button,{color:"primary",disabled:!e.length,fullWidth:!0,isLoading:os(t),onClick:this.onUpload,children:"Upload"})]})}}const ls=(0,ni.connect)(e=>({requestState:e.getIn(["access","UPLOAD_ATTACHMENTS",T])}),e=>({actions:(0,o.bindActionCreators)({resetRequestState:Y,uploadAttachments:q},e)}),null,{context:oi})(cs),ds=({children:e,value:t,index:a,...i})=>(0,di.jsx)("div",{"aria-controls":"tabpanel-".concat(a),"aria-labelledby":"tab-".concat(a),hidden:t!==a,id:"tabpanel-".concat(a),role:"tabpanel",...i,children:t===a&&(0,di.jsx)($a.Box,{paddingTop:3,paddingBottom:3,children:e})}),us=require("lattice-fabricate"),ps=ai()(us.Form).withConfig({displayName:"styled__EdgelessForm",componentId:"sc-1ycpsik-0"})(["margin:-30px;"]),ms=ai().div.withConfig({displayName:"styled__ModalBody",componentId:"sc-1ycpsik-1"})(["max-width:100%;width:","px;"],({width:e})=>"number"==typeof e&&e>0?e:720),hs=({accessRequestId:e})=>{const[t,a]=(0,Za.useState)(0);return(0,di.jsxs)(ms,{children:[(0,di.jsxs)($a.Tabs,{indicatorColor:"primary",onChange:(e,t)=>{a(t)},textColor:"primary",value:t,children:[(0,di.jsx)($a.Tab,{label:"Manage"}),(0,di.jsx)($a.Tab,{label:"Upload"})]}),(0,di.jsx)(ds,{index:0,value:t,children:(0,di.jsx)(Bi,{accessRequestId:e})}),(0,di.jsx)(ds,{index:1,value:t,children:(0,di.jsx)(ls,{accessRequestId:e,onSuccess:()=>{a(0)}})})]})},fs=({accessRequestId:e,isVisible:t,onClose:a})=>(0,di.jsx)($a.Modal,{textTitle:"Attachments",isVisible:t,onClose:a,withFooter:!1,children:(0,di.jsx)(hs,{accessRequestId:e})}),ys={attachmentsOpen:!1,menuOpen:!1},Ss=(e,t)=>{switch(t.type){case"CLOSE_MENU":return{...e,menuOpen:!1};case"OPEN_MENU":return{...e,menuOpen:!0};case"CLOSE_ATTACHMENTS":return{...e,attachmentsOpen:!1};case"OPEN_ATTACHMENTS":return{...e,attachmentsOpen:!0,menuOpen:!1};default:return e}},Es=({accessRequestId:e,onPrint:t})=>{const[a,i]=(0,Za.useReducer)(Ss,ys),s=(0,Za.useRef)(null);return(0,di.jsxs)(di.Fragment,{children:[(0,di.jsx)($a.IconButton,{"aria-controls":a.menuOpen?"access-request-action-menu":void 0,"aria-expanded":a.menuOpen?"true":void 0,"aria-haspopup":"menu","aria-label":"access request action button",onClick:()=>{i({type:"OPEN_MENU"})},ref:s,variant:"text",children:(0,di.jsx)(Ri.FontAwesomeIcon,{fixedWidth:!0,icon:Ni.faEllipsisV})}),(0,di.jsxs)($a.Menu,{anchorEl:s.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},elevation:4,getContentAnchorEl:null,id:"access-request-action-menu",onClose:()=>{i({type:"CLOSE_MENU"})},open:a.menuOpen,transformOrigin:{horizontal:"right",vertical:"top"},children:[(0,di.jsx)($a.MenuItem,{onClick:t,children:"Print"}),(0,di.jsx)($a.MenuItem,{onClick:()=>{i({type:"OPEN_ATTACHMENTS"})},children:"Manage Attachments"})]}),(0,di.jsx)(fs,{accessRequestId:e,isVisible:a.attachmentsOpen,onClose:()=>{i({type:"CLOSE_ATTACHMENTS"})}})]})},gs=require("lodash/merge");var Is=e.n(gs);const As=new d.Logger("SchemaUtils"),Ts=(e,t,a=!1)=>{const i={schema:{},uiSchema:{}};return e.length!==t.length&&As.warn("generateReviewSchema","schemas and uiSchemas have mismatching lengths"),we()(e).call(e,(a,s)=>{((e,t)=>{const{schema:a,uiSchema:i}=t,{schema:s={},uiSchema:n={}}=e;Is()(s,a),Is()(n,i)})(i,{schema:e[s],uiSchema:t[s]})}),a&&Is()(i.uiSchema,{"ui:disabled":!0,"ui:readonly":!0}),i},{getPropertyValue:bs}=d.DataUtils,{FORM_DATA:Cs,RJSF_JSON_SCHEMA:Ns,RJSF_UI_SCHEMA:Rs}=tt,Ds=({accessRequestId:e,data:t,isSubmitting:a,fRef:i})=>{const s=ci(),n=bs(t,[Cs,0]),r=bs(t,[Ns,0]),o=bs(t,[Rs,0]);try{const t=JSON.parse(n);let c=JSON.parse(r),l=JSON.parse(o);if(ze()(c)&&ze()(l)){const e=Ts(c,l);c=e.schema,l=e.uiSchema}const d=t=>{const{formData:a}=t;s(x({formData:a,entityKeyId:e}))};return(0,di.jsx)(ps,{ref:i,formData:t,isSubmitting:a,onSubmit:d,schema:c,uiSchema:l})}catch(e){return(0,di.jsx)("div",{children:"An error has occured. Please contact support."})}},ws=(0,Za.forwardRef)((e,t)=>(0,di.jsx)(Ds,{...e,fRef:t})),_s=ai().div.withConfig({displayName:"styled__CenterWrapper",componentId:"sc-6qf0vq-0"})(["align-items:center;display:flex;height:100%;justify-content:center;"]),{isPending:vs,isStandby:js}=d.ReduxUtils,xs=ai().div.withConfig({displayName:"EditAccessRequestContainer__Row",componentId:"sc-182kjan-0"})(["display:flex;button{margin-left:auto;}"]),Us=()=>{const e=ci(),t=(0,Za.useRef)(),a=li(jt()),i=(0,Ci.useReactToPrint)({content:()=>t.current}),s=li(e=>e.getIn(["access","UPDATE_ACCESS_REQUEST",T])),n=li(e=>e.getIn(["access","GET_ACCESS_REQUEST",T])),r=(0,bi.useRouteMatch)().params.accessRequestId||"";(0,Za.useEffect)(()=>(e(v(r)),()=>{e(Y(["UPDATE_ACCESS_REQUEST"])),e(Y(["GET_ACCESS_REQUEST"])),e({type:"CLEAR_ACCESS_REQUEST"})}),[r,e]);const o=vs(s);return(0,di.jsxs)("div",{children:[(0,di.jsx)(xs,{children:(0,di.jsx)(Es,{accessRequestId:r,onPrint:i})}),vs(n)||js(n)?(0,di.jsx)(_s,{children:(0,di.jsx)($a.Spinner,{size:"2x"})}):(0,di.jsx)(ws,{accessRequestId:r,data:a,isSubmitting:o,ref:t})]})},qs=[{definitions:{person:{type:"object",properties:{firstName:{type:"string",title:"First Name"},lastName:{type:"string",title:"Last Name"},title:{type:"string",title:"Title"},address:{type:"string",title:"Address"},phoneNumber:{type:"string",title:"Phone Number"},email:{type:"string",title:"Email"}}}},type:"object",title:"Common Application",properties:{projectAdministrativeInformation:{type:"object",title:"Project Administration Information",properties:{projectTitle:{type:"string",title:"Project Title"},principalInvestigator:{title:"Principal Investigator",$ref:"#/definitions/person"},coPrincipalInvestigator:{title:"Co-Principal Investigator",$ref:"#/definitions/person"},projectContact:{title:"Project Contact",$ref:"#/definitions/person"}}}}},{type:"object",title:"Common Application",properties:{funding:{type:"object",title:"Funding",properties:{typeOfFunding:{type:"array",title:"Indicate the type of funding for this research",description:"Check all that apply",items:{type:"string",enum:["Federally Funded","State Funded","University Funded","Privately Funded"]},uniqueItems:!0},fundingDescription:{type:"string",title:"Please describe the source of funding and attach a budget showing how costs for the study will be covered."}}}}},{type:"object",title:"Common Application",properties:{projectUtilization:{type:"object",title:"Project Utilization",properties:{projectUtilizationType:{type:"array",title:"How will the project be utilized?",description:'Check all that apply.\nNote: If you believe the project should be considered "not research" then you must submit the Determination Request Form from the Committee for the Protection of Human Subjects website rather than this form.',items:{type:"string",enum:["Public health surveillance (must be conducted by public health authority)","Program evaluation (used only for internal program improvement purposes)","Generalizable knowledge (publication in scientific journals, scientific presentations, etc.)"]},uniqueItems:!0}}}}},{type:"object",title:"Common Application",properties:{institutionalAffiliation:{type:"object",title:"Institutional Affiliation",properties:{institutionName:{type:"string",title:"Institution Name"},institutionType:{type:"array",title:"Check all that apply",items:{type:"string",enum:["For-profit Educational Institution","Non-profit Educational Institution","Another non-profit entity requesting education-related data","Research Institution"]},uniqueItems:!0},responsibleOfficial:{type:"object",title:"Responsible Official",properties:{name:{type:"string",title:"Name"},title:{type:"string",title:"Title"},phoneNumber:{type:"string",title:"Phone Number"},email:{type:"string",title:"Institutional Email"}}},irbApproval:{type:"boolean",title:"Has the institution's IRB reviewed and approved this project? If Yes, upload a copy of the approval letter.",enumNames:["Yes","No"]},irbRequestingCPHSReview:{type:"boolean",title:"Is the institution's IRB requesting to rely upon CPHS review? If Yes, upload a signed copy of the form available on the CPHS website.",enumNames:["Yes","No"]},cphsRequestingIRBReview:{type:"boolean",title:"Is the CPHS being requested to rely upon the institution's IRB or another IRB? If Yes, please specify the IRB and the justification.",enumNames:["Yes","No"]}}}}},{type:"object",title:"Common Application",properties:{conflictOfInterest:{type:"object",title:"Conflict of Interest",properties:{conflictOfInterest:{type:"boolean",title:"Do any members of the research team, or their spouses or dependent children, have any financial interest related to the work to be conducted as part of this project that will, or could be perceived to, affect the objective conduct of the research, including the interpretation and publication of the findings?",description:"Note: financial interests include but are not limited to:\n• Present or anticipated ownership of stock, stock options, or other financial obligations of the source of funding.\n• Receipt or expectation of payment of any sort in connection with papers, symposia, consulting, editing, etc. from the source of funding.\n• The sale or licensing or anticipated sale or licensing of medical or other products or intellectual property, such as patents, copyrights, or trade secrets to the source of funding or other entities.\n• Any past, present or anticipated receipt of money or other valuable consideration from the source of research funding by the researcher(s), the family of the researcher(s), the research institution, or by an institution in which the researcher(s) or the family of the researcher(s) has an interest as owner, creditor, or officer.",enumNames:["Yes","No"]}},dependencies:{conflictOfInterest:{oneOf:[{properties:{conflictOfInterest:{enum:[!0]},interestedIndividuals:{type:"array",title:"Interested Individuals",items:{type:"object",properties:{firstName:{type:"string",title:"First Name"},lastName:{type:"string",title:"Last Name"},conflictDescription:{type:"string",title:"Conflict Description"}}},default:[{}]}}},{properties:{conflictOfInterest:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{majorResearchQuestions:{type:"object",title:"Major Research Questions",properties:{majorResearchQuestions:{type:"string",title:"What are the major research questions to be addressed in this project? What led to the development of these questions, and why are these questions important? Use terminology that is understandable to the general public."}}}}},{type:"object",title:"Common Application",properties:{procedures:{type:"object",title:"Procedures",properties:{procedureDescription:{type:"string",title:"Describe the procedures for this research. Do not attach grant applications or similar documents. Information in this application must be sufficient to fully explain the procedures without such documents."}}}}},{type:"object",title:"Common Application",properties:{humanSubjects:{type:"object",title:"Human Subjects",properties:{humanSubjectInvolvement:{type:"boolean",title:"Does the project involve contact with human subjects?",enumNames:["Yes","No"]}},dependencies:{humanSubjectInvolvement:{oneOf:[{properties:{humanSubjectInvolvement:{enum:[!0]},humanSubjectDescription:{type:"string",title:"Please describe the nature of the contact (including surveys, interviews, focus groups, etc.) and how long that contact will last (e.g. participants will be interviewed on three occasions for approximately 50 minutes, so the total time for their participation will be 2.5 hours). Explain how the human subjects will be selected, specifying inclusion and exclusion criteria."},specialPopulations:{type:"array",title:"If your study involves contact with human subjects, will it be with any of the special populations listed below?",description:"Check all that apply and upload a completed check list from the CPHS website for populations designated with an asterisk.",items:{type:"string",enum:["Children*","Foster Children","Prisoners*","Pregnant Women*","Human Fetuses","Neonates*","Individuals with Impaired Decision-making Ability","Economically or Educationally Disadvantaged Persons"]},uniqueItems:!0},descriptionOfProceduresObtainingInformedConsent:{type:"string",title:"Provide a description of procedures to be used in obtaining and documenting informed consent (or for minors, informed assent) from participants. See instructions and examples on the CPHS website."},consentAttachmentDescription:{type:"string",title:"Attach copies of consent/assent forms and any other letters, information sheets, or verbal scripts that will be used to obtain informed consent/assent. Also attach the Participant’s Bill of Rights (download it from the CPHS website).\nSee examples of consent and assent forms on the CPHS website. Be sure to include a concise explanation of key information for participants at the beginning of your consent or assent form, as shown in the examples on the website. The same elements that are required in a consent form must be adequately covered in an assent form.\nAssent forms must be understandable to children who are 7-17 years of age. The reading level must be age appropriate, and a shortened form may be needed for younger children or those with more limited reading ability. Different versions of the assent form may be needed if the study involves children of significantly different ages. A question-and-answer format, as shown in the CPHS example of an assent form, may be especially appropriate."},consentWaiverDescription:{type:"string",title:"CPHS may approve the use of a consent/assent procedure which does not include, or which alters, some or all of the elements of informed consent/assent. If a waiver or alteration is being requested, attach a document that explains how the criteria for informed consent or assent will be satisfied."}}},{properties:{humanSubjectInvolvement:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{benefitsAndRisks:{type:"object",title:"Benefits and Risks",properties:{benefitsDescription:{type:"string",title:"Describe the benefits, if any, to the subjects or to society from conducting this project. If no direct benefit is anticipated for the subjects, state that clearly."},risksDescription:{type:"string",title:"Describe the possible risks to participants: physical, psychological, social, economic, loss of data security, and/or loss of confidentiality."},justificationDescription:{type:"string",title:"Describe and justify whether the research is minimal risk or greater than minimal risk."}}}}},{type:"object",title:"Common Application",properties:{protectedHealthInformation:{type:"object",title:"Protected Health Information",properties:{involveProtectedHealthInformation:{type:"boolean",title:"Does the project involve accessing protected health information from a state department?",enumNames:["Yes","No"]}},dependencies:{involveProtectedHealthInformation:{oneOf:[{properties:{involveProtectedHealthInformation:{enum:[!0]},specifyProtectedHealthInformation:{type:"string",title:"If Yes, specify the department, the data set, and attach a list of the data elements you are requesting. For each data element, list the range of dates you are requesting and a justification for the data element. Access will not be granted for data elements lacking justification or requests for more than the minimum data necessary to perform the research. Also upload the application and data dictionary you have submitted to the department. If requesting death data, describe and justify any risk to the estate of a deceased or to a living person by use of the death data."},dataSource:{type:"string",title:"Data Source",enum:["California Department of Aging","California Department of Child Support Services","California Department of Community Services & Development","California Department of Developmental Services","California Department of Healthcare Services","California Department of Managed Healthcare","California Department of Public Health","California Department of Rehabilitation","California Department of Social Services","California Department of State Hospitals","Office of Health Information Integrity","Office of Law Enforcement Support","Office of Statewide Health Planning & Development","Office of Systems Integration","Office of the Patient Advocate","Other State Department"]},dataSet:{type:"string",title:"Data Set"}}},{properties:{involveProtectedHealthInformation:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{personalIdentifiers:{type:"object",title:"Personal Identifiers",properties:{usePersonalIdentifiers:{type:"boolean",title:"Will you be using any of the following personal identifiers?",enumNames:["Yes","No"]}},dependencies:{usePersonalIdentifiers:{oneOf:[{properties:{usePersonalIdentifiers:{enum:[!0]},personalIdentifierTypes:{type:"array",title:"If yes, check all that apply.",items:{type:"string",enum:["Name","Address (all geographic subdivisions smaller than state, including street address, city, county, and zip code)","Dates (all elements of dates related to an individual, except years, including birth date, admission date, discharge date, date of death, and exact age if over 89)","Telephone Numbers","Fax Number","Email Address","Social Security Number","Medical Record Number","Health Plan Beneficiary Number","Account Number","Certificate or License Number","Vehicle Identifier","Device (e.g. cell phone or computer) identifier","Web URL","Internet Protocol (IP) Address","Finger or Voice Print or Other Biometric Identifier","Photographic Image - no limited to images of the face.","Any other characteristic that could uniquely identify the individual"]},uniqueItems:!0},explainObtainingConsent:{type:"string",title:"Explain how consent was or will be obtained from the individuals for your use of this information."},explainWhyConsentCannotBeObtained:{type:"string",title:"If you are requesting a HIPAA Waiver of Authorization, explain why consent cannot be obtained from the individuals."}}},{properties:{usePersonalIdentifiers:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{dataUseAgreement:{type:"object",title:"Data Use Agreement",properties:{obtainDataUseAgreement:{type:"boolean",title:"Will you obtain a Data Use Agreement (DUA) with each department from which you are requesting data? If yes, upload the document(s).",enumNames:["Yes","No"]}},dependencies:{obtainDataUseAgreement:{oneOf:[{properties:{obtainDataUseAgreement:{enum:[!0]},cphsApprovalRequiredForExecution:{type:"boolean",title:"If Yes, is CPHS approval required for execution of the DUA?",enumNames:["Yes","No"]}}},{properties:{obtainDataUseAgreement:{enum:[!1]},explainWhyDUANotObtained:{type:"string",title:"If No, please explain."}}}]}}}}},{type:"object",title:"Common Application",properties:{deidentifiedAnalysis:{type:"object",title:"De-identified Analysis",properties:{analysisDataDeidentified:{type:"boolean",title:"Will analysis data be de-identified?",enumNames:["Yes","No"]},whichPersonalIdentifiersRemovedOrRetained:{type:"string",title:"What personal identifiers will be removed and which ones, if any, will be retained in the data?"}},dependencies:{analysisDataDeidentified:{oneOf:[{properties:{analysisDataDeidentified:{enum:[!0]},describeWhenAndHowDataIsDeidentified:{type:"string",title:"If yes, describe when and how."}}},{properties:{analysisDataDeidentified:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{personalIdentifierStorage:{type:"object",title:"Personal Identifier Storage",properties:{personalIdentifiersStoredSeparately:{type:"boolean",title:"Will personal identifiers be stored separately from analysis data?",enumNames:["Yes","No"]}},dependencies:{personalIdentifiersStoredSeparately:{oneOf:[{properties:{personalIdentifiersStoredSeparately:{enum:[!0]},explainWhenPersonalIdentifiersWillBeDestroyed:{type:"string",title:"If Yes, explain when the personal identifiers will be destroyed."}}},{properties:{personalIdentifiersStoredSeparately:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{dataLinkage:{type:"object",title:"Data Linkage",properties:{willDataBeLinkedToAnotherDataSet:{type:"boolean",title:"Will data be linked to another data set?",enumNames:["Yes","No"]}},dependencies:{willDataBeLinkedToAnotherDataSet:{oneOf:[{properties:{willDataBeLinkedToAnotherDataSet:{enum:[!0]},whoWillLinkData:{type:"string",title:"If yes, who will do the linking? Your research team? A State Department? If so, which one(s)? If you will provide a finder file for a state department to perform the linkage, please describe. A third party? If a third party will be used to link data, provide evidence of the third party’s ability to protect personally identifiable data, including the third party’s ability to comply with all CPHS data security requirements."},whatProceduresSoftwareForLinking:{type:"string",title:"What procedures and/or software will be used?"},whatVariablesUsedForLinking:{type:"string",title:"What variables will be used?"}}},{properties:{willDataBeLinkedToAnotherDataSet:{enum:[!1]}}}]}}}}},{type:"object",title:"Common Application",properties:{dataStorageLocation:{type:"object",title:"Where will the data be stored?",properties:{institutionName:{type:"string",title:"Institution Name"},physicalAddress:{type:"string",title:"Physical Address"},secondaryAddress:{type:"string",title:"Secondary Address, if any"}}}}},{type:"object",title:"Common Application",properties:{thirdPartyManagement:{type:"object",title:"Third-Party Mangement",properties:{thirdPartyManagement:{type:"boolean",title:"Will a third-party business/contractor be managing any of the data?",description:"If Yes, please specify and provide assurance in the data security letter (item #25) that all data security requirements will be met.",enumNames:["Yes","No"]}}}}},{type:"object",title:"Common Application",properties:{cloudStorage:{type:"object",title:"Cloud Storage",properties:{cloudStorage:{type:"boolean",title:"Will any of the data be stored on a cloud server?",description:"If Yes, please specify and provide assurance in the data security letter (item #25) that all data security requirements will be met.",enumNames:["Yes","No"]}}}}},{type:"object",title:"Common Application",properties:{dataDestruction:{type:"object",title:"Data Destruction",properties:{description:{type:"string",title:"Explain how and when the data will be destroyed."}}}}},{type:"object",title:"Common Application",properties:{dataBreachCompliance:{type:"object",title:"Data Breach Compliance",properties:{dataBreachCompliance:{type:"boolean",title:"Do you agree to comply with CHHS department-specific instructions in the event of a data breach?",enumNames:["Yes","No"]}},dependencies:{dataBreachCompliance:{oneOf:[{properties:{dataBreachCompliance:{enum:[!0]}}},{properties:{dataBreachCompliance:{enum:[!1]},explainDataBreachNoncompliance:{type:"string",title:"If No, explain."}}}]}}}}},{type:"object",title:"Common Application",properties:{departmentSupportDataReleaseLetter:{type:"object",title:"Department Support/Data Release Letter",properties:{departmentSupportDataReleaseLetter:{type:"string",title:"Obtain and upload a department support/data release letter. This is a statement from the state agency or department you are receiving information from. It must be on that agency’s/department’s letterhead and should indicate both (1) that the release of the desired data is legal and (2) that the agency is willing to release the data to you. If you are not receiving data, the letter should indicate that the department is supportive of your research."}}}}},{type:"object",title:"Common Application",properties:{dataSecurityLetter:{type:"object",title:"Data Security Letter",properties:{dataSecurityLetter:{type:"string",title:"Upload a data security letter, on institutional letterhead, signed by the institution’s Chief Information Officer, Privacy Officer, Security Officer or equivalent and by the Principal Investigator. The letter must provide assurance that the study will meet all CPHS Data Security Requirements (see the CPHS website) and the data security requirements of state agencies from which data is requested. If there are any exceptions, explain why they are necessary and what alternate procedures will provide similar data security. See example of a data security letter on the CPHS website. Attach a data security checklist verifying which requirements are met."}}}}}],Ps=[{projectAdministrativeInformation:{classNames:"column-span-12 grid-container",projectTitle:{classNames:"column-span-12"},principalInvestigator:{classNames:"column-span-12 grid-container",firstName:{classNames:"column-span-6"},lastName:{classNames:"column-span-6"},title:{classNames:"column-span-12"},address:{classNames:"column-span-12"},phoneNumber:{classNames:"column-span-6"},email:{classNames:"column-span-6"}},coPrincipalInvestigator:{classNames:"column-span-12 grid-container",firstName:{classNames:"column-span-6"},lastName:{classNames:"column-span-6"},title:{classNames:"column-span-12"},address:{classNames:"column-span-12"},phoneNumber:{classNames:"column-span-6"},email:{classNames:"column-span-6"}},projectContact:{classNames:"column-span-12 grid-container",firstName:{classNames:"column-span-6"},lastName:{classNames:"column-span-6"},title:{classNames:"column-span-12"},address:{classNames:"column-span-12"},phoneNumber:{classNames:"column-span-6"},email:{classNames:"column-span-6"}}}},{classNames:"column-span-12",funding:{classNames:"column-span-12 grid-container",typeOfFunding:{classNames:"column-span-12","ui:widget":"checkboxes","ui:options":{withOther:!0}},fundingDescription:{classNames:"column-span-12","ui:widget":"textarea"}}},{projectUtilization:{classNames:"column-span-12",projectUtilizationType:{classNames:"column-span-12","ui:widget":"checkboxes","ui:options":{withOther:!0}}}},{institutionalAffiliation:{classNames:"column-span-12 grid-container",institutionName:{classNames:"column-span-12"},institutionType:{classNames:"column-span-12","ui:widget":"checkboxes","ui:options":{withOther:!0}},responsibleOfficial:{classNames:"column-span-12 grid-container",name:{classNames:"column-span-12"},title:{classNames:"column-span-12"},phoneNumber:{classNames:"column-span-12"},email:{classNames:"column-span-12"}},irbApproval:{classNames:"column-span-12","ui:widget":"radio"},irbRequestingCPHSReview:{classNames:"column-span-12","ui:widget":"radio"},cphsRequestingIRBReview:{classNames:"column-span-12","ui:widget":"radio"}}},{conflictOfInterest:{classNames:"column-span-12 grid-container",conflictOfInterest:{classNames:"column-span-12","ui:widget":"radio"},interestedIndividuals:{classNames:"column-span-12","ui:options":{addButtonText:"+ Add Individual",orderable:!1},items:{classNames:"grid-container",firstName:{classNames:"column-span-6"},lastName:{classNames:"column-span-6"},conflictDescription:{classNames:"column-span-12","ui:widget":"textarea"}}}}},{majorResearchQuestions:{classNames:"column-span-12 grid-container",majorResearchQuestions:{classNames:"column-span-12","ui:widget":"textarea"}}},{procedures:{classNames:"column-span-12 grid-container",procedureDescription:{classNames:"column-span-12","ui:widget":"textarea"}}},{humanSubjects:{classNames:"column-span-12 grid-container",humanSubjectInvolvement:{classNames:"column-span-12","ui:widget":"radio"},humanSubjectDescription:{classNames:"column-span-12","ui:widget":"textarea"},specialPopulations:{classNames:"column-span-12","ui:widget":"checkboxes","ui:options":{withNone:!0,noneText:"None of the above"}},descriptionOfProceduresObtainingInformedConsent:{classNames:"column-span-12","ui:widget":"textarea"},consentAttachmentDescription:{classNames:"column-span-12","ui:field":"ParagraphField"},consentWaiverDescription:{classNames:"column-span-12","ui:field":"ParagraphField"}}},{benefitsAndRisks:{classNames:"column-span-12 grid-container",benefitsDescription:{classNames:"column-span-12","ui:widget":"textarea"},risksDescription:{classNames:"column-span-12","ui:widget":"textarea"},justificationDescription:{classNames:"column-span-12","ui:widget":"textarea"}}},{protectedHealthInformation:{classNames:"column-span-12 grid-container",involveProtectedHealthInformation:{classNames:"column-span-12","ui:widget":"radio"},specifyProtectedHealthInformation:{classNames:"column-span-12","ui:field":"ParagraphField"},dataSource:{classNames:"column-span-12"},dataSet:{classNames:"column-span-12"}}},{personalIdentifiers:{classNames:"column-span-12 grid-container",usePersonalIdentifiers:{classNames:"column-span-12","ui:widget":"radio"},personalIdentifierTypes:{classNames:"column-span-12","ui:widget":"checkboxes"},explainObtainingConsent:{classNames:"column-span-12","ui:widget":"textarea"},explainWhyConsentCannotBeObtained:{classNames:"column-span-12","ui:widget":"textarea"}}},{dataUseAgreement:{classNames:"column-span-12 grid-container",obtainDataUseAgreement:{classNames:"column-span-12","ui:widget":"radio"},cphsApprovalRequiredForExecution:{classNames:"column-span-12","ui:widget":"radio"},explainWhyDUANotObtained:{classNames:"column-span-12","ui:widget":"textarea"}}},{deidentifiedAnalysis:{classNames:"column-span-12 grid-container",analysisDataDeidentified:{classNames:"column-span-12","ui:widget":"radio"},describeWhenAndHowDataIsDeidentified:{classNames:"column-span-12","ui:widget":"textarea"},whichPersonalIdentifiersRemovedOrRetained:{classNames:"column-span-12","ui:widget":"textarea"},"ui:order":["analysisDataDeidentified","describeWhenAndHowDataIsDeidentified","whichPersonalIdentifiersRemovedOrRetained"]}},{personalIdentifierStorage:{classNames:"column-span-12 grid-container",personalIdentifiersStoredSeparately:{classNames:"column-span-12","ui:widget":"radio"},explainWhenPersonalIdentifiersWillBeDestroyed:{classNames:"column-span-12","ui:widget":"textarea"}}},{dataLinkage:{classNames:"column-span-12 grid-container",willDataBeLinkedToAnotherDataSet:{classNames:"column-span-12","ui:widget":"radio"},whoWillLinkData:{classNames:"column-span-12","ui:widget":"textarea"},whatProceduresSoftwareForLinking:{classNames:"column-span-12","ui:widget":"textarea"},whatVariablesUsedForLinking:{classNames:"column-span-12","ui:widget":"textarea"}}},{dataStorageLocation:{classNames:"column-span-12 grid-container",institutionName:{classNames:"column-span-12"},physicalAddress:{classNames:"column-span-12"},secondaryAddress:{classNames:"column-span-12"}}},{thirdPartyManagement:{classNames:"column-span-12 grid-container",thirdPartyManagement:{classNames:"column-span-12","ui:widget":"radio"}}},{cloudStorage:{classNames:"column-span-12 grid-container",cloudStorage:{classNames:"column-span-12","ui:widget":"radio"}}},{dataDestruction:{classNames:"column-span-12 grid-container",description:{classNames:"column-span-12","ui:widget":"textarea"}}},{dataBreachCompliance:{classNames:"column-span-12 grid-container",dataBreachCompliance:{classNames:"column-span-12","ui:widget":"radio"},explainDataBreachNoncompliance:{classNames:"column-span-12","ui:widget":"textarea"}}},{departmentSupportDataReleaseLetter:{classNames:"column-span-12 grid-container",departmentSupportDataReleaseLetter:{classNames:"column-span-12","ui:field":"ParagraphField"}}},{dataSecurityLetter:{classNames:"column-span-12 grid-container",dataSecurityLetter:{classNames:"column-span-12","ui:field":"ParagraphField"}}}],{isPending:Ls}=d.ReduxUtils,{getEntityKeyId:Os}=d.DataUtils,{isValidUUID:Ms}=d.ValidationUtils,ks=ai().div.withConfig({displayName:"CommonApplicationForm__ActionRow",componentId:"sc-1old4ll-0"})(["align-items:center;display:flex;justify-content:space-between;padding:0 30px 30px 30px;"]),Fs=()=>{const e=ci(),t=li(jt()),a=li(e=>e.getIn(["access","SUBMIT_ACCESS_REQUEST",T])),i=Ls(a),s=Os(t)||"";(0,Za.useEffect)(()=>()=>{e(Y(["SUBMIT_ACCESS_REQUEST"])),e({type:"CLEAR_ACCESS_REQUEST"})},[e]);return(0,di.jsx)(us.Paged,{onPageChange:(t,a)=>{if(Ms(s))e(x({formData:a,entityKeyId:s}));else{e(j({formData:a,schema:qs,uiSchema:Ps,type:"Common Application"}))}},render:t=>{var a;const{formRef:s,onBack:n,onNext:r,page:o,pagedData:c,validateAndSubmit:l}=t,d=qs.length,u=o===d-1,p=u?()=>{e({route:"/",state:{},type:"GO_TO_ROOT"})}:l;return(0,di.jsxs)(di.Fragment,{children:[(0,di.jsx)(ps,{formData:c,hideSubmit:!0,isSubmitting:i,onSubmit:r,ref:s,schema:qs[o],uiSchema:Ps[o]}),(0,di.jsxs)(ks,{children:[(0,di.jsx)($a.Button,{disabled:!(o>0),onClick:n,children:"Back"}),(0,di.jsx)("span",{children:Xa()(a="".concat(o+1," of ")).call(a,d)}),(0,di.jsx)($a.Button,{isLoading:i,mode:"primary",onClick:p,children:u?"Complete Survey":"Next"})]})]})}})},Hs=()=>(0,di.jsx)(Fs,{}),{isPending:Qs,isStandby:Bs}=d.ReduxUtils,{isValidUUID:Ws}=d.ValidationUtils,Ys=({match:e,organizationId:t,root:a})=>{var i;const s=ci();(0,Za.useEffect)(()=>{Ws(t)&&s(ue({match:e,organizationId:t,root:a}))},[s,t,a]);const n=li(e=>e.getIn([p,"INITIALIZE_APPLICATION",T]));return Qs(n)||Bs(n)?(0,di.jsx)(_s,{children:(0,di.jsx)($a.Spinner,{size:"2x"})}):(0,di.jsxs)(ei.Switch,{children:[(0,di.jsx)(ei.Route,{path:"".concat(a,"/new"),render:()=>(0,di.jsx)(Hs,{})}),(0,di.jsx)(ei.Route,{path:Xa()(i="".concat(a)).call(i,ka),render:()=>(0,di.jsx)(Us,{})}),(0,di.jsx)(ei.Route,{render:()=>(0,di.jsx)(Ti,{})})]})};function Gs({children:e}){return(0,di.jsx)(ni.Provider,{context:oi,store:ri,children:(0,di.jsx)(r.ConnectedRouter,{history:za,context:oi,children:e})})}const zs=e=>{const{match:t,organizationId:a,root:i}=e;return(0,di.jsx)(Gs,{children:(0,di.jsx)(Ys,{match:t,organizationId:a,root:i})})};return t})()}));